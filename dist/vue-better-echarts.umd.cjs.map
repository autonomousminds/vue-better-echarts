{"version":3,"file":"vue-better-echarts.umd.cjs","sources":["../node_modules/ssf/ssf.js","../src/utils/autoFormatting.ts","../src/utils/builtInFormats.ts","../src/utils/dateParsing.ts","../src/utils/formatting.ts","../src/themes/echartsThemes.ts","../node_modules/chroma-js/src/utils/limit.js","../node_modules/chroma-js/src/utils/clip_rgb.js","../node_modules/chroma-js/src/utils/type.js","../node_modules/chroma-js/src/utils/unpack.js","../node_modules/chroma-js/src/utils/last.js","../node_modules/chroma-js/src/utils/index.js","../node_modules/chroma-js/src/io/input.js","../node_modules/chroma-js/src/Color.js","../node_modules/chroma-js/src/version.js","../node_modules/chroma-js/src/chroma.js","../node_modules/chroma-js/src/io/cmyk/cmyk2rgb.js","../node_modules/chroma-js/src/io/cmyk/rgb2cmyk.js","../node_modules/chroma-js/src/io/cmyk/index.js","../node_modules/chroma-js/src/io/css/hsl2css.js","../node_modules/chroma-js/src/io/hsl/rgb2hsl.js","../node_modules/chroma-js/src/io/css/rgb2css.js","../node_modules/chroma-js/src/io/hsl/hsl2rgb.js","../node_modules/chroma-js/src/io/css/css2rgb.js","../node_modules/chroma-js/src/io/css/index.js","../node_modules/chroma-js/src/io/gl/index.js","../node_modules/chroma-js/src/io/hcg/hcg2rgb.js","../node_modules/chroma-js/src/io/hcg/rgb2hcg.js","../node_modules/chroma-js/src/io/hcg/index.js","../node_modules/chroma-js/src/io/hex/hex2rgb.js","../node_modules/chroma-js/src/io/hex/rgb2hex.js","../node_modules/chroma-js/src/io/hex/index.js","../node_modules/chroma-js/src/io/hsi/hsi2rgb.js","../node_modules/chroma-js/src/io/hsi/rgb2hsi.js","../node_modules/chroma-js/src/io/hsi/index.js","../node_modules/chroma-js/src/io/hsl/index.js","../node_modules/chroma-js/src/io/hsv/hsv2rgb.js","../node_modules/chroma-js/src/io/hsv/rgb2hsv.js","../node_modules/chroma-js/src/io/hsv/index.js","../node_modules/chroma-js/src/io/lab/lab-constants.js","../node_modules/chroma-js/src/io/lab/lab2rgb.js","../node_modules/chroma-js/src/io/lab/rgb2lab.js","../node_modules/chroma-js/src/io/lab/index.js","../node_modules/chroma-js/src/io/lch/lch2lab.js","../node_modules/chroma-js/src/io/lch/lch2rgb.js","../node_modules/chroma-js/src/io/lch/hcl2rgb.js","../node_modules/chroma-js/src/io/lch/lab2lch.js","../node_modules/chroma-js/src/io/lch/rgb2lch.js","../node_modules/chroma-js/src/io/lch/index.js","../node_modules/chroma-js/src/colors/w3cx11.js","../node_modules/chroma-js/src/io/named/index.js","../node_modules/chroma-js/src/io/num/num2rgb.js","../node_modules/chroma-js/src/io/num/rgb2num.js","../node_modules/chroma-js/src/io/num/index.js","../node_modules/chroma-js/src/io/rgb/index.js","../node_modules/chroma-js/src/io/temp/temperature2rgb.js","../node_modules/chroma-js/src/io/temp/rgb2temperature.js","../node_modules/chroma-js/src/io/temp/index.js","../node_modules/chroma-js/src/io/oklab/oklab2rgb.js","../node_modules/chroma-js/src/io/oklab/rgb2oklab.js","../node_modules/chroma-js/src/io/oklab/index.js","../node_modules/chroma-js/src/io/oklch/oklch2rgb.js","../node_modules/chroma-js/src/io/oklch/rgb2oklch.js","../node_modules/chroma-js/src/io/oklch/index.js","../node_modules/chroma-js/src/ops/alpha.js","../node_modules/chroma-js/src/ops/clipped.js","../node_modules/chroma-js/src/ops/darken.js","../node_modules/chroma-js/src/ops/get.js","../node_modules/chroma-js/src/ops/luminance.js","../node_modules/chroma-js/src/interpolator/index.js","../node_modules/chroma-js/src/generator/mix.js","../node_modules/chroma-js/src/ops/mix.js","../node_modules/chroma-js/src/ops/premultiply.js","../node_modules/chroma-js/src/ops/saturate.js","../node_modules/chroma-js/src/ops/set.js","../node_modules/chroma-js/src/ops/shade.js","../node_modules/chroma-js/src/interpolator/rgb.js","../node_modules/chroma-js/src/interpolator/lrgb.js","../node_modules/chroma-js/src/interpolator/lab.js","../node_modules/chroma-js/src/interpolator/_hsx.js","../node_modules/chroma-js/src/interpolator/lch.js","../node_modules/chroma-js/src/interpolator/num.js","../node_modules/chroma-js/src/interpolator/hcg.js","../node_modules/chroma-js/src/interpolator/hsi.js","../node_modules/chroma-js/src/interpolator/hsl.js","../node_modules/chroma-js/src/interpolator/hsv.js","../node_modules/chroma-js/src/interpolator/oklab.js","../node_modules/chroma-js/src/interpolator/oklch.js","../node_modules/chroma-js/src/generator/average.js","../node_modules/chroma-js/src/generator/scale.js","../node_modules/chroma-js/src/generator/bezier.js","../node_modules/chroma-js/src/generator/blend.js","../node_modules/chroma-js/src/generator/cubehelix.js","../node_modules/chroma-js/src/generator/random.js","../node_modules/chroma-js/src/utils/analyze.js","../node_modules/chroma-js/src/utils/contrast.js","../node_modules/chroma-js/src/utils/delta-e.js","../node_modules/chroma-js/src/utils/distance.js","../node_modules/chroma-js/src/utils/valid.js","../node_modules/chroma-js/src/utils/scales.js","../node_modules/chroma-js/src/colors/colorbrewer.js","../node_modules/chroma-js/index.js","../src/themes/colorPalettes.ts","../node_modules/debounce/index.js","../src/composables/useECharts.ts","../src/composables/useFormatting.ts","../src/symbols/injectionKeys.ts","../src/composables/useTheme.ts","../node_modules/downloadjs/download.js","../node_modules/export-to-csv/output/index.js","../src/composables/useExport.ts","../src/composables/useTooltip.ts","../src/composables/useChartConfig.ts","../src/composables/useInteractiveFeatures.ts","../src/components/core/EChartsBase.vue","../src/components/core/ChartProvider.vue","../src/components/core/ChartFooter.vue","../src/components/charts/BarChart.vue","../src/components/charts/LineChart.vue","../src/components/charts/AreaChart.vue","../src/components/charts/ScatterPlot.vue","../src/components/charts/BubbleChart.vue","../src/components/charts/BoxPlot.vue","../src/components/charts/Histogram.vue","../src/components/charts/FunnelChart.vue","../src/components/charts/Heatmap.vue","../src/components/charts/CalendarHeatmap.vue","../src/components/charts/SankeyDiagram.vue","../src/components/maps/USMap.vue","../src/components/maps/AreaMap.vue","../src/components/maps/PointMap.vue","../src/components/maps/BubbleMap.vue","../src/components/references/ReferenceLine.vue","../src/components/references/ReferenceArea.vue","../src/components/references/ReferencePoint.vue"],"sourcesContent":["/* ssf.js (C) 2013-present SheetJS -- http://sheetjs.com */\n/* vim: set ts=2: */\n/*jshint -W041 */\nvar SSF = ({});\nvar make_ssf = function make_ssf(SSF){\nSSF.version = '0.11.2';\nfunction _strrev(x) { var o = \"\", i = x.length-1; while(i>=0) o += x.charAt(i--); return o; }\nfunction fill(c,l) { var o = \"\"; while(o.length < l) o+=c; return o; }\nfunction pad0(v,d){var t=\"\"+v; return t.length>=d?t:fill('0',d-t.length)+t;}\nfunction pad_(v,d){var t=\"\"+v;return t.length>=d?t:fill(' ',d-t.length)+t;}\nfunction rpad_(v,d){var t=\"\"+v; return t.length>=d?t:t+fill(' ',d-t.length);}\nfunction pad0r1(v,d){var t=\"\"+Math.round(v); return t.length>=d?t:fill('0',d-t.length)+t;}\nfunction pad0r2(v,d){var t=\"\"+v; return t.length>=d?t:fill('0',d-t.length)+t;}\nvar p2_32 = Math.pow(2,32);\nfunction pad0r(v,d){if(v>p2_32||v<-p2_32) return pad0r1(v,d); var i = Math.round(v); return pad0r2(i,d); }\nfunction isgeneral(s, i) { i = i || 0; return s.length >= 7 + i && (s.charCodeAt(i)|32) === 103 && (s.charCodeAt(i+1)|32) === 101 && (s.charCodeAt(i+2)|32) === 110 && (s.charCodeAt(i+3)|32) === 101 && (s.charCodeAt(i+4)|32) === 114 && (s.charCodeAt(i+5)|32) === 97 && (s.charCodeAt(i+6)|32) === 108; }\nvar days = [\n\t['Sun', 'Sunday'],\n\t['Mon', 'Monday'],\n\t['Tue', 'Tuesday'],\n\t['Wed', 'Wednesday'],\n\t['Thu', 'Thursday'],\n\t['Fri', 'Friday'],\n\t['Sat', 'Saturday']\n];\nvar months = [\n\t['J', 'Jan', 'January'],\n\t['F', 'Feb', 'February'],\n\t['M', 'Mar', 'March'],\n\t['A', 'Apr', 'April'],\n\t['M', 'May', 'May'],\n\t['J', 'Jun', 'June'],\n\t['J', 'Jul', 'July'],\n\t['A', 'Aug', 'August'],\n\t['S', 'Sep', 'September'],\n\t['O', 'Oct', 'October'],\n\t['N', 'Nov', 'November'],\n\t['D', 'Dec', 'December']\n];\nfunction init_table(t) {\n\tt[0]=  'General';\n\tt[1]=  '0';\n\tt[2]=  '0.00';\n\tt[3]=  '#,##0';\n\tt[4]=  '#,##0.00';\n\tt[9]=  '0%';\n\tt[10]= '0.00%';\n\tt[11]= '0.00E+00';\n\tt[12]= '# ?/?';\n\tt[13]= '# ??/??';\n\tt[14]= 'm/d/yy';\n\tt[15]= 'd-mmm-yy';\n\tt[16]= 'd-mmm';\n\tt[17]= 'mmm-yy';\n\tt[18]= 'h:mm AM/PM';\n\tt[19]= 'h:mm:ss AM/PM';\n\tt[20]= 'h:mm';\n\tt[21]= 'h:mm:ss';\n\tt[22]= 'm/d/yy h:mm';\n\tt[37]= '#,##0 ;(#,##0)';\n\tt[38]= '#,##0 ;[Red](#,##0)';\n\tt[39]= '#,##0.00;(#,##0.00)';\n\tt[40]= '#,##0.00;[Red](#,##0.00)';\n\tt[45]= 'mm:ss';\n\tt[46]= '[h]:mm:ss';\n\tt[47]= 'mmss.0';\n\tt[48]= '##0.0E+0';\n\tt[49]= '@';\n\tt[56]= '\"上午/下午 \"hh\"時\"mm\"分\"ss\"秒 \"';\n}\n\nvar table_fmt = {};\ninit_table(table_fmt);\n/* Defaults determined by systematically testing in Excel 2019 */\n\n/* These formats appear to default to other formats in the table */\nvar default_map = [];\nvar defi = 0;\n\n//  5 -> 37 ...  8 -> 40\nfor(defi = 5; defi <= 8; ++defi) default_map[defi] = 32 + defi;\n\n// 23 ->  0 ... 26 ->  0\nfor(defi = 23; defi <= 26; ++defi) default_map[defi] = 0;\n\n// 27 -> 14 ... 31 -> 14\nfor(defi = 27; defi <= 31; ++defi) default_map[defi] = 14;\n// 50 -> 14 ... 58 -> 14\nfor(defi = 50; defi <= 58; ++defi) default_map[defi] = 14;\n\n// 59 ->  1 ... 62 ->  4\nfor(defi = 59; defi <= 62; ++defi) default_map[defi] = defi - 58;\n// 67 ->  9 ... 68 -> 10\nfor(defi = 67; defi <= 68; ++defi) default_map[defi] = defi - 58;\n// 72 -> 14 ... 75 -> 17\nfor(defi = 72; defi <= 75; ++defi) default_map[defi] = defi - 58;\n\n// 69 -> 12 ... 71 -> 14\nfor(defi = 67; defi <= 68; ++defi) default_map[defi] = defi - 57;\n\n// 76 -> 20 ... 78 -> 22\nfor(defi = 76; defi <= 78; ++defi) default_map[defi] = defi - 56;\n\n// 79 -> 45 ... 81 -> 47\nfor(defi = 79; defi <= 81; ++defi) default_map[defi] = defi - 34;\n\n// 82 ->  0 ... 65536 -> 0 (omitted)\n\n/* These formats technically refer to Accounting formats with no equivalent */\nvar default_str = [];\n\n//  5 -- Currency,   0 decimal, black negative\ndefault_str[5] = default_str[63] = '\"$\"#,##0_);\\\\(\"$\"#,##0\\\\)';\n//  6 -- Currency,   0 decimal, red   negative\ndefault_str[6] = default_str[64] = '\"$\"#,##0_);[Red]\\\\(\"$\"#,##0\\\\)';\n//  7 -- Currency,   2 decimal, black negative\ndefault_str[7] = default_str[65] = '\"$\"#,##0.00_);\\\\(\"$\"#,##0.00\\\\)';\n//  8 -- Currency,   2 decimal, red   negative\ndefault_str[8] = default_str[66] = '\"$\"#,##0.00_);[Red]\\\\(\"$\"#,##0.00\\\\)';\n\n// 41 -- Accounting, 0 decimal, No Symbol\ndefault_str[41] = '_(* #,##0_);_(* \\\\(#,##0\\\\);_(* \"-\"_);_(@_)';\n// 42 -- Accounting, 0 decimal, $  Symbol\ndefault_str[42] = '_(\"$\"* #,##0_);_(\"$\"* \\\\(#,##0\\\\);_(\"$\"* \"-\"_);_(@_)';\n// 43 -- Accounting, 2 decimal, No Symbol\ndefault_str[43] = '_(* #,##0.00_);_(* \\\\(#,##0.00\\\\);_(* \"-\"??_);_(@_)';\n// 44 -- Accounting, 2 decimal, $  Symbol\ndefault_str[44] = '_(\"$\"* #,##0.00_);_(\"$\"* \\\\(#,##0.00\\\\);_(\"$\"* \"-\"??_);_(@_)';\nfunction frac(x, D, mixed) {\n\tvar sgn = x < 0 ? -1 : 1;\n\tvar B = x * sgn;\n\tvar P_2 = 0, P_1 = 1, P = 0;\n\tvar Q_2 = 1, Q_1 = 0, Q = 0;\n\tvar A = Math.floor(B);\n\twhile(Q_1 < D) {\n\t\tA = Math.floor(B);\n\t\tP = A * P_1 + P_2;\n\t\tQ = A * Q_1 + Q_2;\n\t\tif((B - A) < 0.00000005) break;\n\t\tB = 1 / (B - A);\n\t\tP_2 = P_1; P_1 = P;\n\t\tQ_2 = Q_1; Q_1 = Q;\n\t}\n\tif(Q > D) { if(Q_1 > D) { Q = Q_2; P = P_2; } else { Q = Q_1; P = P_1; } }\n\tif(!mixed) return [0, sgn * P, Q];\n\tvar q = Math.floor(sgn * P/Q);\n\treturn [q, sgn*P - q*Q, Q];\n}\nfunction parse_date_code(v,opts,b2) {\n\tif(v > 2958465 || v < 0) return null;\n\tvar date = (v|0), time = Math.floor(86400 * (v - date)), dow=0;\n\tvar dout=[];\n\tvar out={D:date, T:time, u:86400*(v-date)-time,y:0,m:0,d:0,H:0,M:0,S:0,q:0};\n\tif(Math.abs(out.u) < 1e-6) out.u = 0;\n\tif(opts && opts.date1904) date += 1462;\n\tif(out.u > 0.9999) {\n\t\tout.u = 0;\n\t\tif(++time == 86400) { out.T = time = 0; ++date; ++out.D; }\n\t}\n\tif(date === 60) {dout = b2 ? [1317,10,29] : [1900,2,29]; dow=3;}\n\telse if(date === 0) {dout = b2 ? [1317,8,29] : [1900,1,0]; dow=6;}\n\telse {\n\t\tif(date > 60) --date;\n\t\t/* 1 = Jan 1 1900 in Gregorian */\n\t\tvar d = new Date(1900, 0, 1);\n\t\td.setDate(d.getDate() + date - 1);\n\t\tdout = [d.getFullYear(), d.getMonth()+1,d.getDate()];\n\t\tdow = d.getDay();\n\t\tif(date < 60) dow = (dow + 6) % 7;\n\t\tif(b2) dow = fix_hijri(d, dout);\n\t}\n\tout.y = dout[0]; out.m = dout[1]; out.d = dout[2];\n\tout.S = time % 60; time = Math.floor(time / 60);\n\tout.M = time % 60; time = Math.floor(time / 60);\n\tout.H = time;\n\tout.q = dow;\n\treturn out;\n}\nSSF.parse_date_code = parse_date_code;\nvar basedate = new Date(1899, 11, 31, 0, 0, 0);\nvar dnthresh = basedate.getTime();\nvar base1904 = new Date(1900, 2, 1, 0, 0, 0);\nfunction datenum_local(v, date1904) {\n\tvar epoch = v.getTime();\n\tif(date1904) epoch -= 1461*24*60*60*1000;\n\telse if(v >= base1904) epoch += 24*60*60*1000;\n\treturn (epoch - (dnthresh + (v.getTimezoneOffset() - basedate.getTimezoneOffset()) * 60000)) / (24 * 60 * 60 * 1000);\n}\n/* The longest 32-bit integer text is \"-4294967296\", exactly 11 chars */\nfunction general_fmt_int(v) { return v.toString(10); }\nSSF._general_int = general_fmt_int;\n\n/* ECMA-376 18.8.30 numFmt*/\n/* Note: `toPrecision` uses standard form when prec > E and E >= -6 */\nvar general_fmt_num = (function make_general_fmt_num() {\n\tvar trailing_zeroes_and_decimal = /(?:\\.0*|(\\.\\d*[1-9])0+)$/;\n\tfunction strip_decimal(o) {\n\t\treturn (o.indexOf(\".\") == -1) ? o : o.replace(trailing_zeroes_and_decimal, \"$1\");\n\t}\n\n\t/* General Exponential always shows 2 digits exp and trims the mantissa */\n\tvar mantissa_zeroes_and_decimal = /(?:\\.0*|(\\.\\d*[1-9])0+)[Ee]/;\n\tvar exp_with_single_digit = /(E[+-])(\\d)$/;\n\tfunction normalize_exp(o) {\n\t\tif(o.indexOf(\"E\") == -1) return o;\n\t\treturn o.replace(mantissa_zeroes_and_decimal,\"$1E\").replace(exp_with_single_digit,\"$10$2\");\n\t}\n\n\t/* exponent >= -9 and <= 9 */\n\tfunction small_exp(v) {\n\t\tvar w = (v<0?12:11);\n\t\tvar o = strip_decimal(v.toFixed(12)); if(o.length <= w) return o;\n\t\to = v.toPrecision(10); if(o.length <= w) return o;\n\t\treturn v.toExponential(5);\n\t}\n\n\t/* exponent >= 11 or <= -10 likely exponential */\n\tfunction large_exp(v) {\n\t\tvar o = strip_decimal(v.toFixed(11));\n\t\treturn (o.length > (v<0?12:11) || o === \"0\" || o === \"-0\") ? v.toPrecision(6) : o;\n\t}\n\n\tfunction general_fmt_num_base(v) {\n\t\tvar V = Math.floor(Math.log(Math.abs(v))*Math.LOG10E), o;\n\n\t\tif(V >= -4 && V <= -1) o = v.toPrecision(10+V);\n\t\telse if(Math.abs(V) <= 9) o = small_exp(v);\n\t\telse if(V === 10) o = v.toFixed(10).substr(0,12);\n\t\telse o = large_exp(v);\n\n\t\treturn strip_decimal(normalize_exp(o.toUpperCase()));\n\t}\n\n\treturn general_fmt_num_base;\n})();\nSSF._general_num = general_fmt_num;\n\n/*\n\t\"General\" rules:\n\t- text is passed through (\"@\")\n\t- booleans are rendered as TRUE/FALSE\n\t- \"up to 11 characters\" displayed for numbers\n\t- Default date format (code 14) used for Dates\n\n\tTODO: technically the display depends on the width of the cell\n*/\nfunction general_fmt(v, opts) {\n\tswitch(typeof v) {\n\t\tcase 'string': return v;\n\t\tcase 'boolean': return v ? \"TRUE\" : \"FALSE\";\n\t\tcase 'number': return (v|0) === v ? v.toString(10) : general_fmt_num(v);\n\t\tcase 'undefined': return \"\";\n\t\tcase 'object':\n\t\t\tif(v == null) return \"\";\n\t\t\tif(v instanceof Date) return format(14, datenum_local(v, opts && opts.date1904), opts);\n\t}\n\tthrow new Error(\"unsupported value in General format: \" + v);\n}\nSSF._general = general_fmt;\nfunction fix_hijri(date, o) {\n  /* TODO: properly adjust y/m/d and  */\n  o[0] -= 581;\n  var dow = date.getDay();\n  if(date < 60) dow = (dow + 6) % 7;\n  return dow;\n}\nvar THAI_DIGITS = \"\\u0E50\\u0E51\\u0E52\\u0E53\\u0E54\\u0E55\\u0E56\\u0E57\\u0E58\\u0E59\".split(\"\");\n/*jshint -W086 */\nfunction write_date(type, fmt, val, ss0) {\n\tvar o=\"\", ss=0, tt=0, y = val.y, out, outl = 0;\n\tswitch(type) {\n\t\tcase 98: /* 'b' buddhist year */\n\t\t\ty = val.y + 543;\n\t\t\t/* falls through */\n\t\tcase 121: /* 'y' year */\n\t\tswitch(fmt.length) {\n\t\t\tcase 1: case 2: out = y % 100; outl = 2; break;\n\t\t\tdefault: out = y % 10000; outl = 4; break;\n\t\t} break;\n\t\tcase 109: /* 'm' month */\n\t\tswitch(fmt.length) {\n\t\t\tcase 1: case 2: out = val.m; outl = fmt.length; break;\n\t\t\tcase 3: return months[val.m-1][1];\n\t\t\tcase 5: return months[val.m-1][0];\n\t\t\tdefault: return months[val.m-1][2];\n\t\t} break;\n\t\tcase 100: /* 'd' day */\n\t\tswitch(fmt.length) {\n\t\t\tcase 1: case 2: out = val.d; outl = fmt.length; break;\n\t\t\tcase 3: return days[val.q][0];\n\t\t\tdefault: return days[val.q][1];\n\t\t} break;\n\t\tcase 104: /* 'h' 12-hour */\n\t\tswitch(fmt.length) {\n\t\t\tcase 1: case 2: out = 1+(val.H+11)%12; outl = fmt.length; break;\n\t\t\tdefault: throw 'bad hour format: ' + fmt;\n\t\t} break;\n\t\tcase 72: /* 'H' 24-hour */\n\t\tswitch(fmt.length) {\n\t\t\tcase 1: case 2: out = val.H; outl = fmt.length; break;\n\t\t\tdefault: throw 'bad hour format: ' + fmt;\n\t\t} break;\n\t\tcase 77: /* 'M' minutes */\n\t\tswitch(fmt.length) {\n\t\t\tcase 1: case 2: out = val.M; outl = fmt.length; break;\n\t\t\tdefault: throw 'bad minute format: ' + fmt;\n\t\t} break;\n\t\tcase 115: /* 's' seconds */\n\t\t\tif(fmt != 's' && fmt != 'ss' && fmt != '.0' && fmt != '.00' && fmt != '.000') throw 'bad second format: ' + fmt;\n\t\t\tif(val.u === 0 && (fmt == \"s\" || fmt == \"ss\")) return pad0(val.S, fmt.length);\nif(ss0 >= 2) tt = ss0 === 3 ? 1000 : 100;\n\t\t\telse tt = ss0 === 1 ? 10 : 1;\n\t\t\tss = Math.round((tt)*(val.S + val.u));\n\t\t\tif(ss >= 60*tt) ss = 0;\n\t\t\tif(fmt === 's') return ss === 0 ? \"0\" : \"\"+ss/tt;\n\t\t\to = pad0(ss,2 + ss0);\n\t\t\tif(fmt === 'ss') return o.substr(0,2);\n\t\t\treturn \".\" + o.substr(2,fmt.length-1);\n\t\tcase 90: /* 'Z' absolute time */\n\t\tswitch(fmt) {\n\t\t\tcase '[h]': case '[hh]': out = val.D*24+val.H; break;\n\t\t\tcase '[m]': case '[mm]': out = (val.D*24+val.H)*60+val.M; break;\n\t\t\tcase '[s]': case '[ss]': out = ((val.D*24+val.H)*60+val.M)*60+Math.round(val.S+val.u); break;\n\t\t\tdefault: throw 'bad abstime format: ' + fmt;\n\t\t} outl = fmt.length === 3 ? 1 : 2; break;\n\t\tcase 101: /* 'e' era */\n\t\t\tout = y; outl = 1; break;\n\t}\n\tvar outstr = outl > 0 ? pad0(out, outl) : \"\";\n\treturn outstr;\n}\n/*jshint +W086 */\nfunction commaify(s) {\n\tvar w = 3;\n\tif(s.length <= w) return s;\n\tvar j = (s.length % w), o = s.substr(0,j);\n\tfor(; j!=s.length; j+=w) o+=(o.length > 0 ? \",\" : \"\") + s.substr(j,w);\n\treturn o;\n}\nvar write_num = (function make_write_num(){\nvar pct1 = /%/g;\nfunction write_num_pct(type, fmt, val){\n\tvar sfmt = fmt.replace(pct1,\"\"), mul = fmt.length - sfmt.length;\n\treturn write_num(type, sfmt, val * Math.pow(10,2*mul)) + fill(\"%\",mul);\n}\nfunction write_num_cm(type, fmt, val){\n\tvar idx = fmt.length - 1;\n\twhile(fmt.charCodeAt(idx-1) === 44) --idx;\n\treturn write_num(type, fmt.substr(0,idx), val / Math.pow(10,3*(fmt.length-idx)));\n}\nfunction write_num_exp(fmt, val){\n\tvar o;\n\tvar idx = fmt.indexOf(\"E\") - fmt.indexOf(\".\") - 1;\n\tif(fmt.match(/^#+0.0E\\+0$/)) {\n\t\tif(val == 0) return \"0.0E+0\";\n\t\telse if(val < 0) return \"-\" + write_num_exp(fmt, -val);\n\t\tvar period = fmt.indexOf(\".\"); if(period === -1) period=fmt.indexOf('E');\n\t\tvar ee = Math.floor(Math.log(val)*Math.LOG10E)%period;\n\t\tif(ee < 0) ee += period;\n\t\to = (val/Math.pow(10,ee)).toPrecision(idx+1+(period+ee)%period);\n\t\tif(o.indexOf(\"e\") === -1) {\n\t\t\tvar fakee = Math.floor(Math.log(val)*Math.LOG10E);\n\t\t\tif(o.indexOf(\".\") === -1) o = o.charAt(0) + \".\" + o.substr(1) + \"E+\" + (fakee - o.length+ee);\n\t\t\telse o += \"E+\" + (fakee - ee);\n\t\t\twhile(o.substr(0,2) === \"0.\") {\n\t\t\t\to = o.charAt(0) + o.substr(2,period) + \".\" + o.substr(2+period);\n\t\t\t\to = o.replace(/^0+([1-9])/,\"$1\").replace(/^0+\\./,\"0.\");\n\t\t\t}\n\t\t\to = o.replace(/\\+-/,\"-\");\n\t\t}\n\t\to = o.replace(/^([+-]?)(\\d*)\\.(\\d*)[Ee]/,function($$,$1,$2,$3) { return $1 + $2 + $3.substr(0,(period+ee)%period) + \".\" + $3.substr(ee) + \"E\"; });\n\t} else o = val.toExponential(idx);\n\tif(fmt.match(/E\\+00$/) && o.match(/e[+-]\\d$/)) o = o.substr(0,o.length-1) + \"0\" + o.charAt(o.length-1);\n\tif(fmt.match(/E\\-/) && o.match(/e\\+/)) o = o.replace(/e\\+/,\"e\");\n\treturn o.replace(\"e\",\"E\");\n}\nvar frac1 = /# (\\?+)( ?)\\/( ?)(\\d+)/;\nfunction write_num_f1(r, aval, sign) {\n\tvar den = parseInt(r[4],10), rr = Math.round(aval * den), base = Math.floor(rr/den);\n\tvar myn = (rr - base*den), myd = den;\n\treturn sign + (base === 0 ? \"\" : \"\"+base) + \" \" + (myn === 0 ? fill(\" \", r[1].length + 1 + r[4].length) : pad_(myn,r[1].length) + r[2] + \"/\" + r[3] + pad0(myd,r[4].length));\n}\nfunction write_num_f2(r, aval, sign) {\n\treturn sign + (aval === 0 ? \"\" : \"\"+aval) + fill(\" \", r[1].length + 2 + r[4].length);\n}\nvar dec1 = /^#*0*\\.([0#]+)/;\nvar closeparen = /\\).*[0#]/;\nvar phone = /\\(###\\) ###\\\\?-####/;\nfunction hashq(str) {\n\tvar o = \"\", cc;\n\tfor(var i = 0; i != str.length; ++i) switch((cc=str.charCodeAt(i))) {\n\t\tcase 35: break;\n\t\tcase 63: o+= \" \"; break;\n\t\tcase 48: o+= \"0\"; break;\n\t\tdefault: o+= String.fromCharCode(cc);\n\t}\n\treturn o;\n}\nfunction rnd(val, d) { var dd = Math.pow(10,d); return \"\"+(Math.round(val * dd)/dd); }\nfunction dec(val, d) {\n\tvar _frac = val - Math.floor(val), dd = Math.pow(10,d);\n\tif (d < ('' + Math.round(_frac * dd)).length) return 0;\n\treturn Math.round(_frac * dd);\n}\nfunction carry(val, d) {\n\tif (d < ('' + Math.round((val-Math.floor(val))*Math.pow(10,d))).length) {\n\t\treturn 1;\n\t}\n\treturn 0;\n}\nfunction flr(val) {\n\tif(val < 2147483647 && val > -2147483648) return \"\"+(val >= 0 ? (val|0) : (val-1|0));\n\treturn \"\"+Math.floor(val);\n}\nfunction write_num_flt(type, fmt, val) {\n\tif(type.charCodeAt(0) === 40 && !fmt.match(closeparen)) {\n\t\tvar ffmt = fmt.replace(/\\( */,\"\").replace(/ \\)/,\"\").replace(/\\)/,\"\");\n\t\tif(val >= 0) return write_num_flt('n', ffmt, val);\n\t\treturn '(' + write_num_flt('n', ffmt, -val) + ')';\n\t}\n\tif(fmt.charCodeAt(fmt.length - 1) === 44) return write_num_cm(type, fmt, val);\n\tif(fmt.indexOf('%') !== -1) return write_num_pct(type, fmt, val);\n\tif(fmt.indexOf('E') !== -1) return write_num_exp(fmt, val);\n\tif(fmt.charCodeAt(0) === 36) return \"$\"+write_num_flt(type,fmt.substr(fmt.charAt(1)==' '?2:1),val);\n\tvar o;\n\tvar r, ri, ff, aval = Math.abs(val), sign = val < 0 ? \"-\" : \"\";\n\tif(fmt.match(/^00+$/)) return sign + pad0r(aval,fmt.length);\n\tif(fmt.match(/^[#?]+$/)) {\n\t\to = pad0r(val,0); if(o === \"0\") o = \"\";\n\t\treturn o.length > fmt.length ? o : hashq(fmt.substr(0,fmt.length-o.length)) + o;\n\t}\n\tif((r = fmt.match(frac1))) return write_num_f1(r, aval, sign);\n\tif(fmt.match(/^#+0+$/)) return sign + pad0r(aval,fmt.length - fmt.indexOf(\"0\"));\n\tif((r = fmt.match(dec1))) {\n\t\to = rnd(val, r[1].length).replace(/^([^\\.]+)$/,\"$1.\"+hashq(r[1])).replace(/\\.$/,\".\"+hashq(r[1])).replace(/\\.(\\d*)$/,function($$, $1) { return \".\" + $1 + fill(\"0\", hashq(r[1]).length-$1.length); });\n\t\treturn fmt.indexOf(\"0.\") !== -1 ? o : o.replace(/^0\\./,\".\");\n\t}\n\tfmt = fmt.replace(/^#+([0.])/, \"$1\");\n\tif((r = fmt.match(/^(0*)\\.(#*)$/))) {\n\t\treturn sign + rnd(aval, r[2].length).replace(/\\.(\\d*[1-9])0*$/,\".$1\").replace(/^(-?\\d*)$/,\"$1.\").replace(/^0\\./,r[1].length?\"0.\":\".\");\n\t}\n\tif((r = fmt.match(/^#{1,3},##0(\\.?)$/))) return sign + commaify(pad0r(aval,0));\n\tif((r = fmt.match(/^#,##0\\.([#0]*0)$/))) {\n\t\treturn val < 0 ? \"-\" + write_num_flt(type, fmt, -val) : commaify(\"\"+(Math.floor(val) + carry(val, r[1].length))) + \".\" + pad0(dec(val, r[1].length),r[1].length);\n\t}\n\tif((r = fmt.match(/^#,#*,#0/))) return write_num_flt(type,fmt.replace(/^#,#*,/,\"\"),val);\n\tif((r = fmt.match(/^([0#]+)(\\\\?-([0#]+))+$/))) {\n\t\to = _strrev(write_num_flt(type, fmt.replace(/[\\\\-]/g,\"\"), val));\n\t\tri = 0;\n\t\treturn _strrev(_strrev(fmt.replace(/\\\\/g,\"\")).replace(/[0#]/g,function(x){return ri<o.length?o.charAt(ri++):x==='0'?'0':\"\";}));\n\t}\n\tif(fmt.match(phone)) {\n\t\to = write_num_flt(type, \"##########\", val);\n\t\treturn \"(\" + o.substr(0,3) + \") \" + o.substr(3, 3) + \"-\" + o.substr(6);\n\t}\n\tvar oa = \"\";\n\tif((r = fmt.match(/^([#0?]+)( ?)\\/( ?)([#0?]+)/))) {\n\t\tri = Math.min(r[4].length,7);\n\t\tff = frac(aval, Math.pow(10,ri)-1, false);\n\t\to = \"\" + sign;\n\t\toa = write_num(\"n\", r[1], ff[1]);\n\t\tif(oa.charAt(oa.length-1) == \" \") oa = oa.substr(0,oa.length-1) + \"0\";\n\t\to += oa + r[2] + \"/\" + r[3];\n\t\toa = rpad_(ff[2],ri);\n\t\tif(oa.length < r[4].length) oa = hashq(r[4].substr(r[4].length-oa.length)) + oa;\n\t\to += oa;\n\t\treturn o;\n\t}\n\tif((r = fmt.match(/^# ([#0?]+)( ?)\\/( ?)([#0?]+)/))) {\n\t\tri = Math.min(Math.max(r[1].length, r[4].length),7);\n\t\tff = frac(aval, Math.pow(10,ri)-1, true);\n\t\treturn sign + (ff[0]||(ff[1] ? \"\" : \"0\")) + \" \" + (ff[1] ? pad_(ff[1],ri) + r[2] + \"/\" + r[3] + rpad_(ff[2],ri): fill(\" \", 2*ri+1 + r[2].length + r[3].length));\n\t}\n\tif((r = fmt.match(/^[#0?]+$/))) {\n\t\to = pad0r(val, 0);\n\t\tif(fmt.length <= o.length) return o;\n\t\treturn hashq(fmt.substr(0,fmt.length-o.length)) + o;\n\t}\n\tif((r = fmt.match(/^([#0?]+)\\.([#0]+)$/))) {\n\t\to = \"\" + val.toFixed(Math.min(r[2].length,10)).replace(/([^0])0+$/,\"$1\");\n\t\tri = o.indexOf(\".\");\n\t\tvar lres = fmt.indexOf(\".\") - ri, rres = fmt.length - o.length - lres;\n\t\treturn hashq(fmt.substr(0,lres) + o + fmt.substr(fmt.length-rres));\n\t}\n\tif((r = fmt.match(/^00,000\\.([#0]*0)$/))) {\n\t\tri = dec(val, r[1].length);\n\t\treturn val < 0 ? \"-\" + write_num_flt(type, fmt, -val) : commaify(flr(val)).replace(/^\\d,\\d{3}$/,\"0$&\").replace(/^\\d*$/,function($$) { return \"00,\" + ($$.length < 3 ? pad0(0,3-$$.length) : \"\") + $$; }) + \".\" + pad0(ri,r[1].length);\n\t}\n\tswitch(fmt) {\n\t\tcase \"###,##0.00\": return write_num_flt(type, \"#,##0.00\", val);\n\t\tcase \"###,###\":\n\t\tcase \"##,###\":\n\t\tcase \"#,###\": var x = commaify(pad0r(aval,0)); return x !== \"0\" ? sign + x : \"\";\n\t\tcase \"###,###.00\": return write_num_flt(type, \"###,##0.00\",val).replace(/^0\\./,\".\");\n\t\tcase \"#,###.00\": return write_num_flt(type, \"#,##0.00\",val).replace(/^0\\./,\".\");\n\t\tdefault:\n\t}\n\tthrow new Error(\"unsupported format |\" + fmt + \"|\");\n}\nfunction write_num_cm2(type, fmt, val){\n\tvar idx = fmt.length - 1;\n\twhile(fmt.charCodeAt(idx-1) === 44) --idx;\n\treturn write_num(type, fmt.substr(0,idx), val / Math.pow(10,3*(fmt.length-idx)));\n}\nfunction write_num_pct2(type, fmt, val){\n\tvar sfmt = fmt.replace(pct1,\"\"), mul = fmt.length - sfmt.length;\n\treturn write_num(type, sfmt, val * Math.pow(10,2*mul)) + fill(\"%\",mul);\n}\nfunction write_num_exp2(fmt, val){\n\tvar o;\n\tvar idx = fmt.indexOf(\"E\") - fmt.indexOf(\".\") - 1;\n\tif(fmt.match(/^#+0.0E\\+0$/)) {\n\t\tif(val == 0) return \"0.0E+0\";\n\t\telse if(val < 0) return \"-\" + write_num_exp2(fmt, -val);\n\t\tvar period = fmt.indexOf(\".\"); if(period === -1) period=fmt.indexOf('E');\n\t\tvar ee = Math.floor(Math.log(val)*Math.LOG10E)%period;\n\t\tif(ee < 0) ee += period;\n\t\to = (val/Math.pow(10,ee)).toPrecision(idx+1+(period+ee)%period);\n\t\tif(!o.match(/[Ee]/)) {\n\t\t\tvar fakee = Math.floor(Math.log(val)*Math.LOG10E);\n\t\t\tif(o.indexOf(\".\") === -1) o = o.charAt(0) + \".\" + o.substr(1) + \"E+\" + (fakee - o.length+ee);\n\t\t\telse o += \"E+\" + (fakee - ee);\n\t\t\to = o.replace(/\\+-/,\"-\");\n\t\t}\n\t\to = o.replace(/^([+-]?)(\\d*)\\.(\\d*)[Ee]/,function($$,$1,$2,$3) { return $1 + $2 + $3.substr(0,(period+ee)%period) + \".\" + $3.substr(ee) + \"E\"; });\n\t} else o = val.toExponential(idx);\n\tif(fmt.match(/E\\+00$/) && o.match(/e[+-]\\d$/)) o = o.substr(0,o.length-1) + \"0\" + o.charAt(o.length-1);\n\tif(fmt.match(/E\\-/) && o.match(/e\\+/)) o = o.replace(/e\\+/,\"e\");\n\treturn o.replace(\"e\",\"E\");\n}\nfunction write_num_int(type, fmt, val) {\n\tif(type.charCodeAt(0) === 40 && !fmt.match(closeparen)) {\n\t\tvar ffmt = fmt.replace(/\\( */,\"\").replace(/ \\)/,\"\").replace(/\\)/,\"\");\n\t\tif(val >= 0) return write_num_int('n', ffmt, val);\n\t\treturn '(' + write_num_int('n', ffmt, -val) + ')';\n\t}\n\tif(fmt.charCodeAt(fmt.length - 1) === 44) return write_num_cm2(type, fmt, val);\n\tif(fmt.indexOf('%') !== -1) return write_num_pct2(type, fmt, val);\n\tif(fmt.indexOf('E') !== -1) return write_num_exp2(fmt, val);\n\tif(fmt.charCodeAt(0) === 36) return \"$\"+write_num_int(type,fmt.substr(fmt.charAt(1)==' '?2:1),val);\n\tvar o;\n\tvar r, ri, ff, aval = Math.abs(val), sign = val < 0 ? \"-\" : \"\";\n\tif(fmt.match(/^00+$/)) return sign + pad0(aval,fmt.length);\n\tif(fmt.match(/^[#?]+$/)) {\n\t\to = (\"\"+val); if(val === 0) o = \"\";\n\t\treturn o.length > fmt.length ? o : hashq(fmt.substr(0,fmt.length-o.length)) + o;\n\t}\n\tif((r = fmt.match(frac1))) return write_num_f2(r, aval, sign);\n\tif(fmt.match(/^#+0+$/)) return sign + pad0(aval,fmt.length - fmt.indexOf(\"0\"));\n\tif((r = fmt.match(dec1))) {\no = (\"\"+val).replace(/^([^\\.]+)$/,\"$1.\"+hashq(r[1])).replace(/\\.$/,\".\"+hashq(r[1]));\n\t\to = o.replace(/\\.(\\d*)$/,function($$, $1) {\nreturn \".\" + $1 + fill(\"0\", hashq(r[1]).length-$1.length); });\n\t\treturn fmt.indexOf(\"0.\") !== -1 ? o : o.replace(/^0\\./,\".\");\n\t}\n\tfmt = fmt.replace(/^#+([0.])/, \"$1\");\n\tif((r = fmt.match(/^(0*)\\.(#*)$/))) {\n\t\treturn sign + (\"\"+aval).replace(/\\.(\\d*[1-9])0*$/,\".$1\").replace(/^(-?\\d*)$/,\"$1.\").replace(/^0\\./,r[1].length?\"0.\":\".\");\n\t}\n\tif((r = fmt.match(/^#{1,3},##0(\\.?)$/))) return sign + commaify((\"\"+aval));\n\tif((r = fmt.match(/^#,##0\\.([#0]*0)$/))) {\n\t\treturn val < 0 ? \"-\" + write_num_int(type, fmt, -val) : commaify((\"\"+val)) + \".\" + fill('0',r[1].length);\n\t}\n\tif((r = fmt.match(/^#,#*,#0/))) return write_num_int(type,fmt.replace(/^#,#*,/,\"\"),val);\n\tif((r = fmt.match(/^([0#]+)(\\\\?-([0#]+))+$/))) {\n\t\to = _strrev(write_num_int(type, fmt.replace(/[\\\\-]/g,\"\"), val));\n\t\tri = 0;\n\t\treturn _strrev(_strrev(fmt.replace(/\\\\/g,\"\")).replace(/[0#]/g,function(x){return ri<o.length?o.charAt(ri++):x==='0'?'0':\"\";}));\n\t}\n\tif(fmt.match(phone)) {\n\t\to = write_num_int(type, \"##########\", val);\n\t\treturn \"(\" + o.substr(0,3) + \") \" + o.substr(3, 3) + \"-\" + o.substr(6);\n\t}\n\tvar oa = \"\";\n\tif((r = fmt.match(/^([#0?]+)( ?)\\/( ?)([#0?]+)/))) {\n\t\tri = Math.min(r[4].length,7);\n\t\tff = frac(aval, Math.pow(10,ri)-1, false);\n\t\to = \"\" + sign;\n\t\toa = write_num(\"n\", r[1], ff[1]);\n\t\tif(oa.charAt(oa.length-1) == \" \") oa = oa.substr(0,oa.length-1) + \"0\";\n\t\to += oa + r[2] + \"/\" + r[3];\n\t\toa = rpad_(ff[2],ri);\n\t\tif(oa.length < r[4].length) oa = hashq(r[4].substr(r[4].length-oa.length)) + oa;\n\t\to += oa;\n\t\treturn o;\n\t}\n\tif((r = fmt.match(/^# ([#0?]+)( ?)\\/( ?)([#0?]+)/))) {\n\t\tri = Math.min(Math.max(r[1].length, r[4].length),7);\n\t\tff = frac(aval, Math.pow(10,ri)-1, true);\n\t\treturn sign + (ff[0]||(ff[1] ? \"\" : \"0\")) + \" \" + (ff[1] ? pad_(ff[1],ri) + r[2] + \"/\" + r[3] + rpad_(ff[2],ri): fill(\" \", 2*ri+1 + r[2].length + r[3].length));\n\t}\n\tif((r = fmt.match(/^[#0?]+$/))) {\n\t\to = \"\" + val;\n\t\tif(fmt.length <= o.length) return o;\n\t\treturn hashq(fmt.substr(0,fmt.length-o.length)) + o;\n\t}\n\tif((r = fmt.match(/^([#0]+)\\.([#0]+)$/))) {\n\t\to = \"\" + val.toFixed(Math.min(r[2].length,10)).replace(/([^0])0+$/,\"$1\");\n\t\tri = o.indexOf(\".\");\n\t\tvar lres = fmt.indexOf(\".\") - ri, rres = fmt.length - o.length - lres;\n\t\treturn hashq(fmt.substr(0,lres) + o + fmt.substr(fmt.length-rres));\n\t}\n\tif((r = fmt.match(/^00,000\\.([#0]*0)$/))) {\n\t\treturn val < 0 ? \"-\" + write_num_int(type, fmt, -val) : commaify(\"\"+val).replace(/^\\d,\\d{3}$/,\"0$&\").replace(/^\\d*$/,function($$) { return \"00,\" + ($$.length < 3 ? pad0(0,3-$$.length) : \"\") + $$; }) + \".\" + pad0(0,r[1].length);\n\t}\n\tswitch(fmt) {\n\t\tcase \"###,###\":\n\t\tcase \"##,###\":\n\t\tcase \"#,###\": var x = commaify(\"\"+aval); return x !== \"0\" ? sign + x : \"\";\n\t\tdefault:\n\t\t\tif(fmt.match(/\\.[0#?]*$/)) return write_num_int(type, fmt.slice(0,fmt.lastIndexOf(\".\")), val) + hashq(fmt.slice(fmt.lastIndexOf(\".\")));\n\t}\n\tthrow new Error(\"unsupported format |\" + fmt + \"|\");\n}\nreturn function write_num(type, fmt, val) {\n\treturn (val|0) === val ? write_num_int(type, fmt, val) : write_num_flt(type, fmt, val);\n};})();\nfunction split_fmt(fmt) {\n\tvar out = [];\n\tvar in_str = false/*, cc*/;\n\tfor(var i = 0, j = 0; i < fmt.length; ++i) switch((/*cc=*/fmt.charCodeAt(i))) {\n\t\tcase 34: /* '\"' */\n\t\t\tin_str = !in_str; break;\n\t\tcase 95: case 42: case 92: /* '_' '*' '\\\\' */\n\t\t\t++i; break;\n\t\tcase 59: /* ';' */\n\t\t\tout[out.length] = fmt.substr(j,i-j);\n\t\t\tj = i+1;\n\t}\n\tout[out.length] = fmt.substr(j);\n\tif(in_str === true) throw new Error(\"Format |\" + fmt + \"| unterminated string \");\n\treturn out;\n}\nSSF._split = split_fmt;\nvar abstime = /\\[[HhMmSs\\u0E0A\\u0E19\\u0E17]*\\]/;\nfunction fmt_is_date(fmt) {\n\tvar i = 0, /*cc = 0,*/ c = \"\", o = \"\";\n\twhile(i < fmt.length) {\n\t\tswitch((c = fmt.charAt(i))) {\n\t\t\tcase 'G': if(isgeneral(fmt, i)) i+= 6; i++; break;\n\t\t\tcase '\"': for(;(/*cc=*/fmt.charCodeAt(++i)) !== 34 && i < fmt.length;){/*empty*/} ++i; break;\n\t\t\tcase '\\\\': i+=2; break;\n\t\t\tcase '_': i+=2; break;\n\t\t\tcase '@': ++i; break;\n\t\t\tcase 'B': case 'b':\n\t\t\t\tif(fmt.charAt(i+1) === \"1\" || fmt.charAt(i+1) === \"2\") return true;\n\t\t\t\t/* falls through */\n\t\t\tcase 'M': case 'D': case 'Y': case 'H': case 'S': case 'E':\n\t\t\t\t/* falls through */\n\t\t\tcase 'm': case 'd': case 'y': case 'h': case 's': case 'e': case 'g': return true;\n\t\t\tcase 'A': case 'a': case '上':\n\t\t\t\tif(fmt.substr(i, 3).toUpperCase() === \"A/P\") return true;\n\t\t\t\tif(fmt.substr(i, 5).toUpperCase() === \"AM/PM\") return true;\n\t\t\t\tif(fmt.substr(i, 5).toUpperCase() === \"上午/下午\") return true;\n\t\t\t\t++i; break;\n\t\t\tcase '[':\n\t\t\t\to = c;\n\t\t\t\twhile(fmt.charAt(i++) !== ']' && i < fmt.length) o += fmt.charAt(i);\n\t\t\t\tif(o.match(abstime)) return true;\n\t\t\t\tbreak;\n\t\t\tcase '.':\n\t\t\t\t/* falls through */\n\t\t\tcase '0': case '#':\n\t\t\t\twhile(i < fmt.length && (\"0#?.,E+-%\".indexOf(c=fmt.charAt(++i)) > -1 || (c=='\\\\' && fmt.charAt(i+1) == \"-\" && \"0#\".indexOf(fmt.charAt(i+2))>-1))){/* empty */}\n\t\t\t\tbreak;\n\t\t\tcase '?': while(fmt.charAt(++i) === c){/* empty */} break;\n\t\t\tcase '*': ++i; if(fmt.charAt(i) == ' ' || fmt.charAt(i) == '*') ++i; break;\n\t\t\tcase '(': case ')': ++i; break;\n\t\t\tcase '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9':\n\t\t\t\twhile(i < fmt.length && \"0123456789\".indexOf(fmt.charAt(++i)) > -1){/* empty */} break;\n\t\t\tcase ' ': ++i; break;\n\t\t\tdefault: ++i; break;\n\t\t}\n\t}\n\treturn false;\n}\nSSF.is_date = fmt_is_date;\nfunction eval_fmt(fmt, v, opts, flen) {\n\tvar out = [], o = \"\", i = 0, c = \"\", lst='t', dt, j, cc;\n\tvar hr='H';\n\t/* Tokenize */\n\twhile(i < fmt.length) {\n\t\tswitch((c = fmt.charAt(i))) {\n\t\t\tcase 'G': /* General */\n\t\t\t\tif(!isgeneral(fmt, i)) throw new Error('unrecognized character ' + c + ' in ' +fmt);\n\t\t\t\tout[out.length] = {t:'G', v:'General'}; i+=7; break;\n\t\t\tcase '\"': /* Literal text */\n\t\t\t\tfor(o=\"\";(cc=fmt.charCodeAt(++i)) !== 34 && i < fmt.length;) o += String.fromCharCode(cc);\n\t\t\t\tout[out.length] = {t:'t', v:o}; ++i; break;\n\t\t\tcase '\\\\': var w = fmt.charAt(++i), t = (w === \"(\" || w === \")\") ? w : 't';\n\t\t\t\tout[out.length] = {t:t, v:w}; ++i; break;\n\t\t\tcase '_': out[out.length] = {t:'t', v:\" \"}; i+=2; break;\n\t\t\tcase '@': /* Text Placeholder */\n\t\t\t\tout[out.length] = {t:'T', v:v}; ++i; break;\n\t\t\tcase 'B': case 'b':\n\t\t\t\tif(fmt.charAt(i+1) === \"1\" || fmt.charAt(i+1) === \"2\") {\n\t\t\t\t\tif(dt==null) { dt=parse_date_code(v, opts, fmt.charAt(i+1) === \"2\"); if(dt==null) return \"\"; }\n\t\t\t\t\tout[out.length] = {t:'X', v:fmt.substr(i,2)}; lst = c; i+=2; break;\n\t\t\t\t}\n\t\t\t\t/* falls through */\n\t\t\tcase 'M': case 'D': case 'Y': case 'H': case 'S': case 'E':\n\t\t\t\tc = c.toLowerCase();\n\t\t\t\t/* falls through */\n\t\t\tcase 'm': case 'd': case 'y': case 'h': case 's': case 'e': case 'g':\n\t\t\t\tif(v < 0) return \"\";\n\t\t\t\tif(dt==null) { dt=parse_date_code(v, opts); if(dt==null) return \"\"; }\n\t\t\t\to = c; while(++i < fmt.length && fmt.charAt(i).toLowerCase() === c) o+=c;\n\t\t\t\tif(c === 'm' && lst.toLowerCase() === 'h') c = 'M';\n\t\t\t\tif(c === 'h') c = hr;\n\t\t\t\tout[out.length] = {t:c, v:o}; lst = c; break;\n\t\t\tcase 'A': case 'a': case '上':\n\t\t\t\tvar q={t:c, v:c};\n\t\t\t\tif(dt==null) dt=parse_date_code(v, opts);\n\t\t\t\tif(fmt.substr(i, 3).toUpperCase() === \"A/P\") { if(dt!=null) q.v = dt.H >= 12 ? \"P\" : \"A\"; q.t = 'T'; hr='h';i+=3;}\n\t\t\t\telse if(fmt.substr(i,5).toUpperCase() === \"AM/PM\") { if(dt!=null) q.v = dt.H >= 12 ? \"PM\" : \"AM\"; q.t = 'T'; i+=5; hr='h'; }\n\t\t\t\telse if(fmt.substr(i,5).toUpperCase() === \"上午/下午\") { if(dt!=null) q.v = dt.H >= 12 ? \"下午\" : \"上午\"; q.t = 'T'; i+=5; hr='h'; }\n\t\t\t\telse { q.t = \"t\"; ++i; }\n\t\t\t\tif(dt==null && q.t === 'T') return \"\";\n\t\t\t\tout[out.length] = q; lst = c; break;\n\t\t\tcase '[':\n\t\t\t\to = c;\n\t\t\t\twhile(fmt.charAt(i++) !== ']' && i < fmt.length) o += fmt.charAt(i);\n\t\t\t\tif(o.slice(-1) !== ']') throw 'unterminated \"[\" block: |' + o + '|';\n\t\t\t\tif(o.match(abstime)) {\n\t\t\t\t\tif(dt==null) { dt=parse_date_code(v, opts); if(dt==null) return \"\"; }\n\t\t\t\t\tout[out.length] = {t:'Z', v:o.toLowerCase()};\n\t\t\t\t\tlst = o.charAt(1);\n\t\t\t\t} else if(o.indexOf(\"$\") > -1) {\n\t\t\t\t\to = (o.match(/\\$([^-\\[\\]]*)/)||[])[1]||\"$\";\n\t\t\t\t\tif(!fmt_is_date(fmt)) out[out.length] = {t:'t',v:o};\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t/* Numbers */\n\t\t\tcase '.':\n\t\t\t\tif(dt != null) {\n\t\t\t\t\to = c; while(++i < fmt.length && (c=fmt.charAt(i)) === \"0\") o += c;\n\t\t\t\t\tout[out.length] = {t:'s', v:o}; break;\n\t\t\t\t}\n\t\t\t\t/* falls through */\n\t\t\tcase '0': case '#':\n\t\t\t\to = c; while(++i < fmt.length && \"0#?.,E+-%\".indexOf(c=fmt.charAt(i)) > -1) o += c;\n\t\t\t\tout[out.length] = {t:'n', v:o}; break;\n\t\t\tcase '?':\n\t\t\t\to = c; while(fmt.charAt(++i) === c) o+=c;\n\t\t\t\tout[out.length] = {t:c, v:o}; lst = c; break;\n\t\t\tcase '*': ++i; if(fmt.charAt(i) == ' ' || fmt.charAt(i) == '*') ++i; break; // **\n\t\t\tcase '(': case ')': out[out.length] = {t:(flen===1?'t':c), v:c}; ++i; break;\n\t\t\tcase '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9':\n\t\t\t\to = c; while(i < fmt.length && \"0123456789\".indexOf(fmt.charAt(++i)) > -1) o+=fmt.charAt(i);\n\t\t\t\tout[out.length] = {t:'D', v:o}; break;\n\t\t\tcase ' ': out[out.length] = {t:c, v:c}; ++i; break;\n\t\t\tcase '$': out[out.length] = {t:'t', v:'$'}; ++i; break;\n\t\t\tdefault:\n\t\t\t\tif(\",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP\".indexOf(c) === -1) throw new Error('unrecognized character ' + c + ' in ' + fmt);\n\t\t\t\tout[out.length] = {t:'t', v:c}; ++i; break;\n\t\t}\n\t}\n\n\t/* Scan for date/time parts */\n\tvar bt = 0, ss0 = 0, ssm;\n\tfor(i=out.length-1, lst='t'; i >= 0; --i) {\n\t\tswitch(out[i].t) {\n\t\t\tcase 'h': case 'H': out[i].t = hr; lst='h'; if(bt < 1) bt = 1; break;\n\t\t\tcase 's':\n\t\t\t\tif((ssm=out[i].v.match(/\\.0+$/))) ss0=Math.max(ss0,ssm[0].length-1);\n\t\t\t\tif(bt < 3) bt = 3;\n\t\t\t/* falls through */\n\t\t\tcase 'd': case 'y': case 'M': case 'e': lst=out[i].t; break;\n\t\t\tcase 'm': if(lst === 's') { out[i].t = 'M'; if(bt < 2) bt = 2; } break;\n\t\t\tcase 'X': /*if(out[i].v === \"B2\");*/\n\t\t\t\tbreak;\n\t\t\tcase 'Z':\n\t\t\t\tif(bt < 1 && out[i].v.match(/[Hh]/)) bt = 1;\n\t\t\t\tif(bt < 2 && out[i].v.match(/[Mm]/)) bt = 2;\n\t\t\t\tif(bt < 3 && out[i].v.match(/[Ss]/)) bt = 3;\n\t\t}\n\t}\n\t/* time rounding depends on presence of minute / second / usec fields */\n\tswitch(bt) {\n\t\tcase 0: break;\n\t\tcase 1:\nif(dt.u >= 0.5) { dt.u = 0; ++dt.S; }\n\t\t\tif(dt.S >=  60) { dt.S = 0; ++dt.M; }\n\t\t\tif(dt.M >=  60) { dt.M = 0; ++dt.H; }\n\t\t\tbreak;\n\t\tcase 2:\nif(dt.u >= 0.5) { dt.u = 0; ++dt.S; }\n\t\t\tif(dt.S >=  60) { dt.S = 0; ++dt.M; }\n\t\t\tbreak;\n\t}\n\n\t/* replace fields */\n\tvar nstr = \"\", jj;\n\tfor(i=0; i < out.length; ++i) {\n\t\tswitch(out[i].t) {\n\t\t\tcase 't': case 'T': case ' ': case 'D': break;\n\t\t\tcase 'X': out[i].v = \"\"; out[i].t = \";\"; break;\n\t\t\tcase 'd': case 'm': case 'y': case 'h': case 'H': case 'M': case 's': case 'e': case 'b': case 'Z':\nout[i].v = write_date(out[i].t.charCodeAt(0), out[i].v, dt, ss0);\n\t\t\t\tout[i].t = 't'; break;\n\t\t\tcase 'n': case '?':\n\t\t\t\tjj = i+1;\n\t\t\t\twhile(out[jj] != null && (\n\t\t\t\t\t(c=out[jj].t) === \"?\" || c === \"D\" ||\n\t\t\t\t\t((c === \" \" || c === \"t\") && out[jj+1] != null && (out[jj+1].t === '?' || out[jj+1].t === \"t\" && out[jj+1].v === '/')) ||\n\t\t\t\t\t(out[i].t === '(' && (c === ' ' || c === 'n' || c === ')')) ||\n\t\t\t\t\t(c === 't' && (out[jj].v === '/' || out[jj].v === ' ' && out[jj+1] != null && out[jj+1].t == '?'))\n\t\t\t\t)) {\n\t\t\t\t\tout[i].v += out[jj].v;\n\t\t\t\t\tout[jj] = {v:\"\", t:\";\"}; ++jj;\n\t\t\t\t}\n\t\t\t\tnstr += out[i].v;\n\t\t\t\ti = jj-1; break;\n\t\t\tcase 'G': out[i].t = 't'; out[i].v = general_fmt(v,opts); break;\n\t\t}\n\t}\n\tvar vv = \"\", myv, ostr;\n\tif(nstr.length > 0) {\n\t\tif(nstr.charCodeAt(0) == 40) /* '(' */ {\n\t\t\tmyv = (v<0&&nstr.charCodeAt(0) === 45 ? -v : v);\n\t\t\tostr = write_num('n', nstr, myv);\n\t\t} else {\n\t\t\tmyv = (v<0 && flen > 1 ? -v : v);\n\t\t\tostr = write_num('n', nstr, myv);\n\t\t\tif(myv < 0 && out[0] && out[0].t == 't') {\n\t\t\t\tostr = ostr.substr(1);\n\t\t\t\tout[0].v = \"-\" + out[0].v;\n\t\t\t}\n\t\t}\n\t\tjj=ostr.length-1;\n\t\tvar decpt = out.length;\n\t\tfor(i=0; i < out.length; ++i) if(out[i] != null && out[i].t != 't' && out[i].v.indexOf(\".\") > -1) { decpt = i; break; }\n\t\tvar lasti=out.length;\n\t\tif(decpt === out.length && ostr.indexOf(\"E\") === -1) {\n\t\t\tfor(i=out.length-1; i>= 0;--i) {\n\t\t\t\tif(out[i] == null || 'n?'.indexOf(out[i].t) === -1) continue;\n\t\t\t\tif(jj>=out[i].v.length-1) { jj -= out[i].v.length; out[i].v = ostr.substr(jj+1, out[i].v.length); }\n\t\t\t\telse if(jj < 0) out[i].v = \"\";\n\t\t\t\telse { out[i].v = ostr.substr(0, jj+1); jj = -1; }\n\t\t\t\tout[i].t = 't';\n\t\t\t\tlasti = i;\n\t\t\t}\n\t\t\tif(jj>=0 && lasti<out.length) out[lasti].v = ostr.substr(0,jj+1) + out[lasti].v;\n\t\t}\n\t\telse if(decpt !== out.length && ostr.indexOf(\"E\") === -1) {\n\t\t\tjj = ostr.indexOf(\".\")-1;\n\t\t\tfor(i=decpt; i>= 0; --i) {\n\t\t\t\tif(out[i] == null || 'n?'.indexOf(out[i].t) === -1) continue;\n\t\t\t\tj=out[i].v.indexOf(\".\")>-1&&i===decpt?out[i].v.indexOf(\".\")-1:out[i].v.length-1;\n\t\t\t\tvv = out[i].v.substr(j+1);\n\t\t\t\tfor(; j>=0; --j) {\n\t\t\t\t\tif(jj>=0 && (out[i].v.charAt(j) === \"0\" || out[i].v.charAt(j) === \"#\")) vv = ostr.charAt(jj--) + vv;\n\t\t\t\t}\n\t\t\t\tout[i].v = vv;\n\t\t\t\tout[i].t = 't';\n\t\t\t\tlasti = i;\n\t\t\t}\n\t\t\tif(jj>=0 && lasti<out.length) out[lasti].v = ostr.substr(0,jj+1) + out[lasti].v;\n\t\t\tjj = ostr.indexOf(\".\")+1;\n\t\t\tfor(i=decpt; i<out.length; ++i) {\n\t\t\t\tif(out[i] == null || ('n?('.indexOf(out[i].t) === -1 && i !== decpt)) continue;\n\t\t\t\tj=out[i].v.indexOf(\".\")>-1&&i===decpt?out[i].v.indexOf(\".\")+1:0;\n\t\t\t\tvv = out[i].v.substr(0,j);\n\t\t\t\tfor(; j<out[i].v.length; ++j) {\n\t\t\t\t\tif(jj<ostr.length) vv += ostr.charAt(jj++);\n\t\t\t\t}\n\t\t\t\tout[i].v = vv;\n\t\t\t\tout[i].t = 't';\n\t\t\t\tlasti = i;\n\t\t\t}\n\t\t}\n\t}\n\tfor(i=0; i<out.length; ++i) if(out[i] != null && 'n?'.indexOf(out[i].t)>-1) {\n\t\tmyv = (flen >1 && v < 0 && i>0 && out[i-1].v === \"-\" ? -v:v);\n\t\tout[i].v = write_num(out[i].t, out[i].v, myv);\n\t\tout[i].t = 't';\n\t}\n\tvar retval = \"\";\n\tfor(i=0; i !== out.length; ++i) if(out[i] != null) retval += out[i].v;\n\treturn retval;\n}\nSSF._eval = eval_fmt;\nvar cfregex = /\\[[=<>]/;\nvar cfregex2 = /\\[(=|>[=]?|<[>=]?)(-?\\d+(?:\\.\\d*)?)\\]/;\nfunction chkcond(v, rr) {\n\tif(rr == null) return false;\n\tvar thresh = parseFloat(rr[2]);\n\tswitch(rr[1]) {\n\t\tcase \"=\":  if(v == thresh) return true; break;\n\t\tcase \">\":  if(v >  thresh) return true; break;\n\t\tcase \"<\":  if(v <  thresh) return true; break;\n\t\tcase \"<>\": if(v != thresh) return true; break;\n\t\tcase \">=\": if(v >= thresh) return true; break;\n\t\tcase \"<=\": if(v <= thresh) return true; break;\n\t}\n\treturn false;\n}\nfunction choose_fmt(f, v) {\n\tvar fmt = split_fmt(f);\n\tvar l = fmt.length, lat = fmt[l-1].indexOf(\"@\");\n\tif(l<4 && lat>-1) --l;\n\tif(fmt.length > 4) throw new Error(\"cannot find right format for |\" + fmt.join(\"|\") + \"|\");\n\tif(typeof v !== \"number\") return [4, fmt.length === 4 || lat>-1?fmt[fmt.length-1]:\"@\"];\n\tswitch(fmt.length) {\n\t\tcase 1: fmt = lat>-1 ? [\"General\", \"General\", \"General\", fmt[0]] : [fmt[0], fmt[0], fmt[0], \"@\"]; break;\n\t\tcase 2: fmt = lat>-1 ? [fmt[0], fmt[0], fmt[0], fmt[1]] : [fmt[0], fmt[1], fmt[0], \"@\"]; break;\n\t\tcase 3: fmt = lat>-1 ? [fmt[0], fmt[1], fmt[0], fmt[2]] : [fmt[0], fmt[1], fmt[2], \"@\"]; break;\n\t\tcase 4: break;\n\t}\n\tvar ff = v > 0 ? fmt[0] : v < 0 ? fmt[1] : fmt[2];\n\tif(fmt[0].indexOf(\"[\") === -1 && fmt[1].indexOf(\"[\") === -1) return [l, ff];\n\tif(fmt[0].match(cfregex) != null || fmt[1].match(cfregex) != null) {\n\t\tvar m1 = fmt[0].match(cfregex2);\n\t\tvar m2 = fmt[1].match(cfregex2);\n\t\treturn chkcond(v, m1) ? [l, fmt[0]] : chkcond(v, m2) ? [l, fmt[1]] : [l, fmt[m1 != null && m2 != null ? 2 : 1]];\n\t}\n\treturn [l, ff];\n}\nfunction format(fmt,v,o) {\n\tif(o == null) o = {};\n\tvar sfmt = \"\";\n\tswitch(typeof fmt) {\n\t\tcase \"string\":\n\t\t\tif(fmt == \"m/d/yy\" && o.dateNF) sfmt = o.dateNF;\n\t\t\telse sfmt = fmt;\n\t\t\tbreak;\n\t\tcase \"number\":\n\t\t\tif(fmt == 14 && o.dateNF) sfmt = o.dateNF;\n\t\t\telse sfmt = (o.table != null ? (o.table) : table_fmt)[fmt];\n\t\t\tif(sfmt == null) sfmt = (o.table && o.table[default_map[fmt]]) || table_fmt[default_map[fmt]];\n\t\t\tif(sfmt == null) sfmt = default_str[fmt] || \"General\";\n\t\t\tbreak;\n\t}\n\tif(isgeneral(sfmt,0)) return general_fmt(v, o);\n\tif(v instanceof Date) v = datenum_local(v, o.date1904);\n\tvar f = choose_fmt(sfmt, v);\n\tif(isgeneral(f[1])) return general_fmt(v, o);\n\tif(v === true) v = \"TRUE\"; else if(v === false) v = \"FALSE\";\n\telse if(v === \"\" || v == null) return \"\";\n\treturn eval_fmt(f[1], v, o, f[0]);\n}\nfunction load_entry(fmt, idx) {\n\tif(typeof idx != 'number') {\n\t\tidx = +idx || -1;\nfor(var i = 0; i < 0x0188; ++i) {\nif(table_fmt[i] == undefined) { if(idx < 0) idx = i; continue; }\n\t\t\tif(table_fmt[i] == fmt) { idx = i; break; }\n\t\t}\nif(idx < 0) idx = 0x187;\n\t}\ntable_fmt[idx] = fmt;\n\treturn idx;\n}\nSSF.load = load_entry;\nSSF._table = table_fmt;\nSSF.get_table = function get_table() { return table_fmt; };\nSSF.load_table = function load_table(tbl) {\n\tfor(var i=0; i!=0x0188; ++i)\n\t\tif(tbl[i] !== undefined) load_entry(tbl[i], i);\n};\nSSF.init_table = init_table;\nSSF.format = format;\n};\nmake_ssf(SSF);\n/*global module */\nif(typeof module !== 'undefined' && typeof DO_NOT_EXPORT_SSF === 'undefined') module.exports = SSF;\n","/**\n * Auto-formatting utilities\n * \n */\n\nimport ssf from 'ssf';\nimport type {\n  FormatObject,\n  ColumnUnitSummary,\n  ColumnTypeDescriptor\n} from '../types';\n\nexport const AUTO_FORMAT_CODE = 'auto';\n\n/**\n * The number of units to display the median value in the series\n */\nconst AUTO_FORMAT_MEDIAN_PRECISION = 3;\n\ninterface ImplicitAutoFormat {\n  name: string;\n  description: string;\n  matchingFunction: (\n    columnName: string,\n    columnTypeDescriptor: ColumnTypeDescriptor | undefined,\n    columnUnitSummary: ColumnUnitSummary | undefined\n  ) => boolean;\n  format: FormatObject;\n}\n\n/**\n * Describes implicit formats for columns having a certain name pattern and a column type\n */\nconst IMPLICIT_COLUMN_AUTO_FORMATS: ImplicitAutoFormat[] = [\n  {\n    name: 'year',\n    description:\n      'When lowerCase(columnName)=\"year\" with the column having numeric values will result in no formatting',\n    matchingFunction: (\n      columnName: string,\n      columnTypeDescriptor: ColumnTypeDescriptor | undefined,\n      columnUnitSummary: ColumnUnitSummary | undefined\n    ) => {\n      if (columnName && columnTypeDescriptor) {\n        return (\n          'year' === columnName.toLowerCase() &&\n          (columnTypeDescriptor?.columnType === 'number' ||\n            columnUnitSummary?.unitType === 'number')\n        );\n      }\n      return false;\n    },\n    format: {\n      formatTag: 'year',\n      formatCode: AUTO_FORMAT_CODE,\n      valueType: 'number',\n      exampleInput: 2013,\n      _autoFormat: {\n        autoFormatCode: '@',\n        truncateUnits: false\n      }\n    }\n  },\n  {\n    name: 'id',\n    description:\n      'When lowerCase(columnName)=\"id\" with the column having numeric values, then values will have no formatting',\n    matchingFunction: (\n      columnName: string,\n      columnTypeDescriptor: ColumnTypeDescriptor | undefined,\n      columnUnitSummary: ColumnUnitSummary | undefined\n    ) => {\n      if (columnName && columnTypeDescriptor) {\n        return (\n          'id' === columnName.toLowerCase() &&\n          (columnTypeDescriptor?.columnType === 'number' ||\n            columnUnitSummary?.unitType === 'number')\n        );\n      }\n      return false;\n    },\n    format: {\n      formatTag: 'id',\n      formatCode: AUTO_FORMAT_CODE,\n      valueType: 'number',\n      exampleInput: 93120121,\n      _autoFormat: {\n        autoFormatFunction: (typedValue: unknown) => {\n          const numValue = typedValue as number;\n          if (numValue !== null && numValue !== undefined && !isNaN(numValue)) {\n            return numValue.toLocaleString('fullwide', {\n              useGrouping: false\n            });\n          } else {\n            return String(numValue);\n          }\n        }\n      }\n    }\n  },\n  {\n    name: 'defaultDate',\n    description: 'Formatting for Default Date',\n    matchingFunction: (\n      _columnName: string,\n      columnTypeDescriptor: ColumnTypeDescriptor | undefined,\n      columnUnitSummary: ColumnUnitSummary | undefined\n    ) => {\n      if (columnTypeDescriptor) {\n        return (\n          columnTypeDescriptor?.columnType === 'date' ||\n          columnUnitSummary?.unitType === 'date'\n        );\n      }\n      return false;\n    },\n    format: {\n      formatTag: 'defaultDate',\n      formatCode: AUTO_FORMAT_CODE,\n      valueType: 'date',\n      exampleInput: 'Sat Jan 01 2022 03:15:00 GMT-0500',\n      _autoFormat: {\n        autoFormatCode: 'YYYY-MM-DD',\n        truncateUnits: false\n      }\n    }\n  }\n];\n\n/**\n * Applies column units to a value\n */\nexport function applyColumnUnits(\n  value: number | undefined,\n  unit: string\n): number | undefined {\n  switch (unit) {\n    case 'T':\n      return value !== undefined ? value / 1000000000000 : undefined;\n    case 'B':\n      return value !== undefined ? value / 1000000000 : undefined;\n    case 'M':\n      return value !== undefined ? value / 1000000 : undefined;\n    case 'k':\n      return value !== undefined ? value / 1000 : undefined;\n    default:\n      return value;\n  }\n}\n\n/**\n * Configures auto formatting on a format object\n */\nexport function configureAutoFormatting(\n  format: FormatObject,\n  formatCode: string = '@',\n  truncateUnits: boolean = false\n): FormatObject {\n  format._autoFormat = {\n    autoFormatCode: formatCode,\n    truncateUnits: truncateUnits\n  };\n  return format;\n}\n\n/**\n * Checks if a format is an auto format\n */\nexport function isAutoFormat(\n  format: FormatObject,\n  effectiveCode?: string\n): boolean {\n  const matchesCode =\n    (effectiveCode || format.formatCode)?.toLowerCase() === AUTO_FORMAT_CODE;\n  const autoFormatCode =\n    format._autoFormat?.autoFormatFunction || format._autoFormat?.autoFormatCode;\n  if (matchesCode && autoFormatCode !== undefined) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Generates an implicit number format based on column statistics\n */\nexport function generateImplicitNumberFormat(\n  columnUnitSummary: ColumnUnitSummary | undefined,\n  maxDisplayDecimals: number = 7\n): FormatObject {\n  let effectiveFormatCode: string;\n  let columnUnits = '';\n\n  const median = columnUnitSummary?.median;\n  let truncateUnits: boolean;\n\n  if (median !== undefined) {\n    let medianInUnitTerms: number;\n    columnUnits = getAutoColumnUnit(median);\n    if (columnUnits) {\n      medianInUnitTerms = applyColumnUnits(median, columnUnits) as number;\n      truncateUnits = true;\n    } else {\n      medianInUnitTerms = median;\n      truncateUnits = false;\n    }\n\n    if (columnUnitSummary?.maxDecimals === 0 && !truncateUnits) {\n      effectiveFormatCode = '#,##0';\n    } else {\n      effectiveFormatCode = computeNumberAutoFormatCode(\n        medianInUnitTerms,\n        maxDisplayDecimals\n      );\n    }\n  } else {\n    effectiveFormatCode = '#,##0';\n    truncateUnits = false;\n  }\n\n  return {\n    formatTag: 'auto',\n    formatCode: AUTO_FORMAT_CODE,\n    valueType: 'number',\n    _autoFormat: {\n      autoFormatCode: effectiveFormatCode,\n      truncateUnits: truncateUnits,\n      columnUnits: columnUnits\n    }\n  };\n}\n\n/**\n * Finds an implicit auto format based on column name and type\n */\nexport function findImplicitAutoFormat(\n  columnName: string,\n  columnTypeDescriptor: ColumnTypeDescriptor | undefined,\n  columnUnitSummary: ColumnUnitSummary | undefined\n): FormatObject | undefined {\n  const matched = IMPLICIT_COLUMN_AUTO_FORMATS.find((implicitFormat) =>\n    implicitFormat.matchingFunction(columnName, columnTypeDescriptor, columnUnitSummary)\n  );\n  if (matched) {\n    return matched.format;\n  } else {\n    if (columnUnitSummary?.unitType === 'number') {\n      return generateImplicitNumberFormat(columnUnitSummary);\n    }\n  }\n  return undefined;\n}\n\n/**\n * Formats a value using auto formatting logic\n */\nexport function autoFormat(\n  typedValue: unknown,\n  columnFormat: FormatObject,\n  columnUnitSummary?: ColumnUnitSummary\n): string {\n  if (columnFormat._autoFormat?.autoFormatFunction) {\n    return columnFormat._autoFormat.autoFormatFunction(\n      typedValue,\n      columnFormat,\n      columnUnitSummary\n    );\n  } else if (columnFormat._autoFormat?.autoFormatCode) {\n    const autoFormatCode = columnFormat._autoFormat.autoFormatCode;\n    const valueType = columnFormat.valueType;\n\n    if (valueType === 'number') {\n      const truncateUnits = columnFormat._autoFormat.truncateUnits;\n\n      let unitValue = typedValue as number;\n      let unit = '';\n\n      if (truncateUnits && columnUnitSummary?.median !== undefined) {\n        unit = getAutoColumnUnit(columnUnitSummary.median);\n        unitValue = applyColumnUnits(typedValue as number, unit) as number;\n      }\n      return ssf.format(autoFormatCode, unitValue) + unit;\n    } else {\n      return ssf.format(autoFormatCode, typedValue as number);\n    }\n  } else {\n    console.warn('autoFormat called without a formatCode or function');\n  }\n  return String(typedValue);\n}\n\n/**\n * Fallback formatting for values without format settings\n */\nexport function fallbackFormat(typedValue: unknown): string {\n  if (typeof typedValue === 'number') {\n    return typedValue.toLocaleString(undefined, {\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 2\n    });\n  } else if (typedValue !== undefined && typedValue !== null) {\n    return String(typedValue);\n  } else {\n    return '-';\n  }\n}\n\n/**\n * Computes the number format code for a given reference value\n */\nexport function computeNumberAutoFormatCode(\n  referenceValue: number,\n  maxDisplayDecimals: number = 7,\n  significantDigits: number = AUTO_FORMAT_MEDIAN_PRECISION\n): string {\n  let formatCodeBuilder = '#,##0';\n\n  const referenceValueLeadingDigitExponent = base10Exponent(referenceValue);\n  let displayDecimals = 0;\n\n  if (referenceValueLeadingDigitExponent - significantDigits < 0) {\n    displayDecimals = Math.min(\n      Math.max(\n        Math.abs(referenceValueLeadingDigitExponent - significantDigits + 1),\n        0\n      ),\n      maxDisplayDecimals\n    );\n  }\n\n  if (displayDecimals > 0) {\n    formatCodeBuilder += '.';\n    formatCodeBuilder += '0'.repeat(displayDecimals);\n  }\n\n  return formatCodeBuilder;\n}\n\n/**\n * Gets the appropriate unit (B, M, k or '') for the given value\n */\nfunction getAutoColumnUnit(value: number): string {\n  const absoluteValue = Math.abs(value);\n  if (absoluteValue >= 5000000000000) {\n    return 'T';\n  } else if (absoluteValue >= 5000000000) {\n    return 'B';\n  } else if (absoluteValue >= 5000000) {\n    return 'M';\n  } else if (absoluteValue >= 5000) {\n    return 'k';\n  } else {\n    return '';\n  }\n}\n\n/**\n * Calculates the base 10 exponent of a value\n */\nfunction base10Exponent(value: number): number {\n  if (value === 0) {\n    return 0;\n  } else {\n    return Math.floor(Math.log10(Math.abs(value)));\n  }\n}\n","/**\n * Built-in formats\n * \n */\n\nimport ssf from 'ssf';\nimport type {\n  FormatObject,\n  CurrencyDefinition,\n  DerivedCurrencyFormat,\n  ColumnUnitSummary\n} from '../types';\nimport { AUTO_FORMAT_CODE, applyColumnUnits, generateImplicitNumberFormat } from './autoFormatting';\n\nexport const SUPPORTED_CURRENCIES: CurrencyDefinition[] = [\n  {\n    primaryCode: 'usd',\n    currencySymbol: '$',\n    displayName: 'USD - United States Dollar'\n  },\n  {\n    primaryCode: 'aud',\n    currencySymbol: 'A$',\n    displayName: 'AUD - Australian Dollar',\n    escapeCurrencySymbol: true\n  },\n  {\n    primaryCode: 'brl',\n    currencySymbol: 'R$',\n    displayName: 'BRL - Brazilian Real',\n    escapeCurrencySymbol: true\n  },\n  {\n    primaryCode: 'cad',\n    currencySymbol: 'C$',\n    displayName: 'CAD - Canadian Dollar',\n    escapeCurrencySymbol: true\n  },\n  {\n    primaryCode: 'cny',\n    currencySymbol: '¥',\n    displayName: 'CNY - Renminbi',\n    escapeCurrencySymbol: true\n  },\n  {\n    primaryCode: 'eur',\n    currencySymbol: '€',\n    displayName: 'EUR - Euro'\n  },\n  {\n    primaryCode: 'gbp',\n    currencySymbol: '£',\n    displayName: 'GBP - Pound Sterling',\n    escapeCurrencySymbol: true\n  },\n  {\n    primaryCode: 'jpy',\n    currencySymbol: '¥',\n    displayName: 'JPY - Japanese Yen',\n    escapeCurrencySymbol: true\n  },\n  {\n    primaryCode: 'inr',\n    currencySymbol: '₹',\n    displayName: 'INR - Indian Rupee',\n    escapeCurrencySymbol: true\n  },\n  {\n    primaryCode: 'krw',\n    currencySymbol: '₩',\n    displayName: 'KRW - South Korean won',\n    escapeCurrencySymbol: true\n  },\n  {\n    primaryCode: 'ngn',\n    currencySymbol: '₦',\n    displayName: 'NGN - Nigerian Naira',\n    escapeCurrencySymbol: true\n  },\n  {\n    primaryCode: 'rub',\n    currencySymbol: 'rub',\n    displayName: 'RUB - Russian Ruble',\n    escapeCurrencySymbol: true\n  },\n  {\n    primaryCode: 'sek',\n    currencySymbol: 'kr',\n    displayName: 'SEK - Swedish Krona',\n    escapeCurrencySymbol: true\n  }\n];\n\nconst DERIVED_CURRENCY_FORMATS: DerivedCurrencyFormat[] = [\n  {\n    derivedSuffix: '',\n    valueFormatCode: '#,##0',\n    exampleInput: 412.17,\n    auto: true\n  },\n  {\n    derivedSuffix: '0',\n    valueFormatCode: '#,##0',\n    exampleInput: 7043.123\n  },\n  {\n    derivedSuffix: '1',\n    valueFormatCode: '#,##0.0',\n    exampleInput: 7043.123\n  },\n  {\n    derivedSuffix: '2',\n    valueFormatCode: '#,##0.00',\n    exampleInput: 7043.123\n  },\n  {\n    derivedSuffix: '0k',\n    valueFormatCode: '#,##0,\"k\"',\n    exampleInput: 64301.12\n  },\n  {\n    derivedSuffix: '1k',\n    valueFormatCode: '#,##0.0,\"k\"',\n    exampleInput: 64301.12\n  },\n  {\n    derivedSuffix: '2k',\n    valueFormatCode: '#,##0.00,\"k\"',\n    exampleInput: 64301.12\n  },\n  {\n    derivedSuffix: '0m',\n    valueFormatCode: '#,##0,,\"M\"',\n    exampleInput: 4564301.12\n  },\n  {\n    derivedSuffix: '1m',\n    valueFormatCode: '#,##0.0,,\"M\"',\n    exampleInput: 4564301.12\n  },\n  {\n    derivedSuffix: '2m',\n    valueFormatCode: '#,##0.00,,\"M\"',\n    exampleInput: 4564301.12\n  },\n  {\n    derivedSuffix: '0b',\n    valueFormatCode: '#,##0,,,\"B\"',\n    exampleInput: 9784564301.12\n  },\n  {\n    derivedSuffix: '1b',\n    valueFormatCode: '#,##0.0,,,\"B\"',\n    exampleInput: 9784564301.12\n  },\n  {\n    derivedSuffix: '2b',\n    valueFormatCode: '#,##0.00,,,\"B\"',\n    exampleInput: 9784564301.12\n  }\n];\n\nconst CURRENCY_FORMATS: FormatObject[] = SUPPORTED_CURRENCIES.flatMap((currency) => {\n  return DERIVED_CURRENCY_FORMATS.map((derivedFormat) => {\n    const symbolInFormatCode = currency.escapeCurrencySymbol\n      ? `\"${currency.currencySymbol}\"`\n      : currency.currencySymbol;\n\n    const format: FormatObject = {\n      formatTag: currency.primaryCode + derivedFormat.derivedSuffix,\n      parentFormat: currency.primaryCode,\n      formatCategory: 'currency',\n      valueType: 'number',\n      exampleInput: derivedFormat.exampleInput,\n      titleTagReplacement: ` (${currency.currencySymbol})`,\n      formatCode: '' // Will be set below\n    };\n\n    if (derivedFormat.auto) {\n      format.formatCode = AUTO_FORMAT_CODE;\n      format._autoFormat = {\n        autoFormatFunction: (\n          typedValue: unknown,\n          _columnFormat: FormatObject,\n          columnUnitSummary?: ColumnUnitSummary\n        ) => {\n          const numValue = typedValue as number;\n          const implicitFormat = generateImplicitNumberFormat(columnUnitSummary, 2);\n          let effectiveCode = `${symbolInFormatCode}${implicitFormat._autoFormat?.autoFormatCode || '#,##0'}`;\n          let suffix = '';\n          let displayValue = numValue;\n\n          if (implicitFormat._autoFormat?.truncateUnits && implicitFormat._autoFormat?.columnUnits) {\n            suffix = implicitFormat._autoFormat.columnUnits;\n            displayValue = applyColumnUnits(numValue, implicitFormat._autoFormat.columnUnits) as number;\n          } else {\n            if (effectiveCode.endsWith('.0')) {\n              effectiveCode = effectiveCode + '0';\n            }\n          }\n          return ssf.format(effectiveCode, displayValue) + suffix;\n        }\n      };\n    } else {\n      format.formatCode = `${symbolInFormatCode}${derivedFormat.valueFormatCode}`;\n    }\n\n    if (derivedFormat.axisValueFormatCode) {\n      format.axisFormatCode = derivedFormat.axisValueFormatCode;\n    }\n\n    return format;\n  });\n});\n\nexport const BUILT_IN_FORMATS: FormatObject[] = [\n  ...CURRENCY_FORMATS,\n\n  // Date/Time formats\n  {\n    formatTag: 'ddd',\n    formatCode: 'ddd',\n    formatCategory: 'date',\n    valueType: 'date',\n    exampleInput: '2022-01-09 12:45'\n  },\n  {\n    formatTag: 'dddd',\n    formatCode: 'dddd',\n    formatCategory: 'date',\n    valueType: 'date',\n    exampleInput: '2022-01-09 12:45'\n  },\n  {\n    formatTag: 'mmm',\n    formatCode: 'mmm',\n    formatCategory: 'date',\n    valueType: 'date',\n    exampleInput: '2022-01-09 12:45'\n  },\n  {\n    formatTag: 'mmmm',\n    formatCode: 'mmmm',\n    formatCategory: 'date',\n    valueType: 'date',\n    exampleInput: '2022-01-09 12:45'\n  },\n  {\n    formatTag: 'yyyy',\n    formatCode: 'yyyy',\n    formatCategory: 'date',\n    valueType: 'date',\n    exampleInput: '2022-01-09 12:45'\n  },\n  {\n    formatTag: 'shortdate',\n    formatCode: 'mmm d/yy',\n    formatCategory: 'date',\n    valueType: 'date',\n    exampleInput: '2022-01-09 12:45'\n  },\n  {\n    formatTag: 'longdate',\n    formatCode: 'mmmm d, yyyy',\n    formatCategory: 'date',\n    valueType: 'date',\n    exampleInput: '2022-01-09 12:45'\n  },\n  {\n    formatTag: 'fulldate',\n    formatCode: 'dddd mmmm d, yyyy',\n    formatCategory: 'date',\n    valueType: 'date',\n    exampleInput: '2022-01-09 12:45'\n  },\n  {\n    formatTag: 'mdy',\n    formatCode: 'm/d/y',\n    formatCategory: 'date',\n    valueType: 'date',\n    exampleInput: '2022-01-09 12:45'\n  },\n  {\n    formatTag: 'dmy',\n    formatCode: 'd/m/y',\n    formatCategory: 'date',\n    valueType: 'date',\n    exampleInput: '2022-01-09 12:45'\n  },\n  {\n    formatTag: 'hms',\n    formatCode: 'H:MM:SS AM/PM',\n    formatCategory: 'date',\n    valueType: 'date',\n    exampleInput: '2022-01-09T11:45:03'\n  },\n\n  // Number formats\n  {\n    formatTag: 'num0',\n    formatCode: '#,##0',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 11.23168\n  },\n  {\n    formatTag: 'num1',\n    formatCode: '#,##0.0',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 11.23168\n  },\n  {\n    formatTag: 'num2',\n    formatCode: '#,##0.00',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 11.23168\n  },\n  {\n    formatTag: 'num3',\n    formatCode: '#,##0.000',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 11.23168\n  },\n  {\n    formatTag: 'num4',\n    formatCode: '#,##0.0000',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 11.23168\n  },\n  {\n    formatTag: 'num0k',\n    formatCode: '#,##0,\"k\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 64201\n  },\n  {\n    formatTag: 'num1k',\n    formatCode: '#,##0.0,\"k\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 64201\n  },\n  {\n    formatTag: 'num2k',\n    formatCode: '#,##0.00,\"k\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 64201\n  },\n  {\n    formatTag: 'num0m',\n    formatCode: '#,##0,,\"M\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 42539483\n  },\n  {\n    formatTag: 'num1m',\n    formatCode: '#,##0.0,,\"M\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 42539483\n  },\n  {\n    formatTag: 'num2m',\n    formatCode: '#,##0.00,,\"M\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 42539483\n  },\n  {\n    formatTag: 'num0b',\n    formatCode: '#,##0,,,\"B\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 1384937584\n  },\n  {\n    formatTag: 'num1b',\n    formatCode: '#,##0.0,,,\"B\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 1384937584\n  },\n  {\n    formatTag: 'num2b',\n    formatCode: '#,##0.00,,,\"B\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: 1384937584\n  },\n  {\n    formatTag: 'id',\n    formatCode: '0',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: '921594675',\n    titleTagReplacement: ' id'\n  },\n  {\n    formatTag: 'fract',\n    formatCode: '# ?/?',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: '0.25'\n  },\n  {\n    formatTag: 'mult',\n    formatCode: '#,##0.0\"x\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: '5.32'\n  },\n  {\n    formatTag: 'mult0',\n    formatCode: '#,##0\"x\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: '5.32'\n  },\n  {\n    formatTag: 'mult1',\n    formatCode: '#,##0.0\"x\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: '5.32'\n  },\n  {\n    formatTag: 'mult2',\n    formatCode: '#,##0.00\"x\"',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: '5.32'\n  },\n  {\n    formatTag: 'sci',\n    formatCode: '0.00E+0',\n    formatCategory: 'number',\n    valueType: 'number',\n    exampleInput: '16546.1561'\n  },\n\n  // Percent formats\n  {\n    formatTag: 'pct',\n    formatCode: AUTO_FORMAT_CODE,\n    formatCategory: 'percent',\n    valueType: 'number',\n    exampleInput: 0.731,\n    titleTagReplacement: '',\n    _autoFormat: {\n      autoFormatFunction: (\n        typedValue: unknown,\n        _columnFormat: FormatObject,\n        columnUnitSummary?: ColumnUnitSummary\n      ) => {\n        const numValue = typedValue as number;\n        if (columnUnitSummary?.unitType === 'number') {\n          const adjustedColumnUnitSummary: ColumnUnitSummary = {\n            min: columnUnitSummary.min * 100,\n            max: columnUnitSummary.max * 100,\n            median: columnUnitSummary.median * 100,\n            maxDecimals: Math.max(columnUnitSummary.maxDecimals - 2, 0),\n            unitType: columnUnitSummary.unitType\n          };\n          const format = generateImplicitNumberFormat(adjustedColumnUnitSummary);\n          return ssf.format(format._autoFormat?.autoFormatCode || '#,##0', numValue * 100) + '%';\n        } else {\n          return ssf.format('#,##0%', numValue);\n        }\n      }\n    }\n  },\n  {\n    formatTag: 'pct0',\n    formatCode: '#,##0%',\n    formatCategory: 'percent',\n    valueType: 'number',\n    exampleInput: 0.731,\n    titleTagReplacement: ''\n  },\n  {\n    formatTag: 'pct1',\n    formatCode: '#,##0.0%',\n    formatCategory: 'percent',\n    valueType: 'number',\n    exampleInput: 0.731,\n    titleTagReplacement: ''\n  },\n  {\n    formatTag: 'pct2',\n    formatCode: '#,##0.00%',\n    formatCategory: 'percent',\n    valueType: 'number',\n    exampleInput: 0.731,\n    titleTagReplacement: ''\n  },\n  {\n    formatTag: 'pct3',\n    formatCode: '#,##0.000%',\n    formatCategory: 'percent',\n    valueType: 'number',\n    exampleInput: 0.731,\n    titleTagReplacement: ''\n  }\n];\n","/**\n * Date parsing utilities\n * \n */\n\nimport type { DataRecord } from '../types';\n\n/**\n * Parses an individual string into a standardized date string format\n */\nexport function standardizeDateString(date: string | unknown): string {\n  if (date && typeof date === 'string') {\n    let normalizedDate = date;\n    const dateSplit = normalizedDate.split(' ');\n\n    // If date doesn't contain timestamp, add one at midnight (avoids timezone interpretation issue)\n    if (!normalizedDate.includes(':')) {\n      normalizedDate = normalizedDate + 'T00:00:00';\n    }\n\n    // Remove any character groups beyond 2 (date and time):\n    if (dateSplit.length > 2) {\n      normalizedDate = dateSplit[0] + ' ' + dateSplit[1];\n    }\n\n    // Replace microseconds if needed:\n    const re = /\\.([^\\s]+)/;\n    normalizedDate = normalizedDate.replace(re, '');\n\n    // Remove \"Z\" to avoid timezone interpretation issue:\n    normalizedDate = normalizedDate.replace('Z', '');\n\n    // Replace spaces with \"T\" to conform to ECMA standard:\n    normalizedDate = normalizedDate.replace(' ', 'T');\n\n    return normalizedDate;\n  }\n\n  return String(date);\n}\n\n/**\n * Replaces a date column's string values with JS date objects\n */\nexport function convertColumnToDate(\n  data: DataRecord[],\n  column: string\n): DataRecord[] {\n  return data.map((d) => ({\n    ...d,\n    [column]: d[column] ? new Date(standardizeDateString(d[column])) : null\n  }));\n}\n\n/**\n * Replaces a date column's string values with standardized date strings\n */\nexport function standardizeDateColumn(\n  data: DataRecord[],\n  column: string\n): DataRecord[] {\n  return data.map((d) => ({\n    ...d,\n    [column]: standardizeDateString(d[column])\n  }));\n}\n","/**\n * Core formatting utilities\n */\n\nimport ssf from 'ssf';\nimport type { FormatObject, ColumnUnitSummary, ValueType } from '../types';\nimport { BUILT_IN_FORMATS } from './builtInFormats';\nimport { findImplicitAutoFormat, autoFormat, isAutoFormat } from './autoFormatting';\nimport { standardizeDateString } from './dateParsing';\n\nconst AXIS_FORMATTING_CONTEXT = 'axis';\nconst VALUE_FORMATTING_CONTEXT = 'value';\n\n// Custom formats storage\nlet customFormats: FormatObject[] = [];\n\n/**\n * Sets custom formats\n */\nexport function setCustomFormats(formats: FormatObject[]): void {\n  customFormats = formats;\n}\n\n/**\n * Gets custom formats\n */\nexport function getCustomFormats(): FormatObject[] {\n  return customFormats;\n}\n\n/**\n * Infers the value type from a value\n */\nexport function inferValueType(value: unknown): ValueType {\n  if (value === null || value === undefined) {\n    return 'string';\n  }\n  if (typeof value === 'number') {\n    return 'number';\n  }\n  if (typeof value === 'boolean') {\n    return 'boolean';\n  }\n  if (value instanceof Date) {\n    return 'date';\n  }\n  if (typeof value === 'string') {\n    // Check if it looks like a date\n    const dateAttempt = new Date(value);\n    if (!isNaN(dateAttempt.getTime()) && value.match(/\\d{4}-\\d{2}-\\d{2}/)) {\n      return 'date';\n    }\n  }\n  return 'string';\n}\n\n/**\n * Extracts a format tag from a column name if it follows the pattern column_formatTag\n */\nfunction maybeExtractFormatTag(columnName: string | undefined): string | undefined {\n  if (!columnName) return undefined;\n\n  const lastUnderscore = columnName.lastIndexOf('_');\n  if (lastUnderscore > 0) {\n    return columnName.substring(lastUnderscore + 1);\n  }\n  return undefined;\n}\n\n/**\n * Looks up a format based on column name\n */\nexport function lookupColumnFormat(\n  columnName: string | undefined,\n  columnInfo: { columnType: string },\n  columnUnitSummary: ColumnUnitSummary | undefined\n): FormatObject | undefined {\n  const potentialFormatTag = maybeExtractFormatTag(columnName);\n\n  if (columnInfo.columnType === 'string') {\n    return undefined;\n  }\n\n  if (potentialFormatTag) {\n    const matchingFormat = BUILT_IN_FORMATS.find(\n      (format) => format.formatTag?.toLowerCase() === potentialFormatTag?.toLowerCase()\n    );\n    if (matchingFormat) {\n      return matchingFormat;\n    }\n  }\n\n  const matchingImplicitAutoFormat = findImplicitAutoFormat(\n    columnName ?? '',\n    { columnType: columnInfo.columnType as 'number' | 'date' | 'string' | 'boolean' },\n    columnUnitSummary\n  );\n  if (matchingImplicitAutoFormat) {\n    return matchingImplicitAutoFormat;\n  }\n\n  return undefined;\n}\n\n/**\n * Returns a format object from a format string\n */\nexport function getFormatObjectFromString(\n  formatString: string,\n  valueType?: ValueType\n): FormatObject {\n  const potentialFormatTag = formatString;\n  const matchingFormat = BUILT_IN_FORMATS.find(\n    (format) => format.formatTag?.toLowerCase() === potentialFormatTag?.toLowerCase()\n  );\n\n  if (matchingFormat) {\n    return matchingFormat;\n  }\n\n  const newFormat: FormatObject = {\n    formatTag: 'custom',\n    formatCode: potentialFormatTag\n  };\n\n  if (valueType) {\n    newFormat.valueType = valueType;\n  }\n\n  return newFormat;\n}\n\n/**\n * Gets the effective formatting code based on context\n */\nfunction getEffectiveFormattingCode(\n  columnFormat: FormatObject,\n  formattingContext: string\n): string | undefined {\n  if (formattingContext === AXIS_FORMATTING_CONTEXT && columnFormat.axisFormatCode) {\n    return columnFormat.axisFormatCode;\n  }\n  return columnFormat.formatCode;\n}\n\n/**\n * Formats a value for display\n */\nexport function formatValue(\n  value: unknown,\n  columnFormat?: FormatObject,\n  columnUnitSummary?: ColumnUnitSummary\n): string {\n  try {\n    return applyFormatting(value, columnFormat, columnUnitSummary, VALUE_FORMATTING_CONTEXT);\n  } catch (error) {\n    console.warn(`Unexpected error in formatValue: ${error}`);\n    return String(value);\n  }\n}\n\n/**\n * Formats a value for axis display\n */\nexport function formatAxisValue(\n  value: unknown,\n  columnFormat?: FormatObject,\n  columnUnitSummary?: ColumnUnitSummary\n): string {\n  try {\n    return applyFormatting(value, columnFormat, columnUnitSummary, AXIS_FORMATTING_CONTEXT);\n  } catch (error) {\n    return String(value);\n  }\n}\n\n/**\n * Applies title tag replacement to column names\n */\nexport function applyTitleTagReplacement(\n  columnName: string | undefined,\n  columnFormatSettings: FormatObject | undefined\n): string {\n  let result = columnName || '';\n\n  if (columnName && columnFormatSettings?.formatTag) {\n    const lastIndexOfTag = columnName\n      .toLowerCase()\n      .lastIndexOf(`_${columnFormatSettings.formatTag.toLowerCase()}`);\n\n    let titleTagReplacement = '';\n    if (lastIndexOfTag > 0) {\n      if (typeof columnFormatSettings?.titleTagReplacement === 'string') {\n        titleTagReplacement = columnFormatSettings.titleTagReplacement;\n      }\n      result = columnName.substring(0, lastIndexOfTag) + titleTagReplacement;\n    }\n  }\n\n  return result;\n}\n\n/**\n * Formats a column title\n */\nexport function formatTitle(\n  columnName: string,\n  format?: FormatObject\n): string {\n  let title = applyTitleTagReplacement(columnName, format);\n\n  // Convert snake_case and camelCase to Title Case\n  title = title\n    .replace(/_/g, ' ')\n    .replace(/([a-z])([A-Z])/g, '$1 $2')\n    .replace(/\\b\\w/g, (c) => c.toUpperCase());\n\n  return title;\n}\n\n/**\n * Core formatting function\n */\nfunction applyFormatting(\n  value: unknown,\n  columnFormat?: FormatObject,\n  columnUnitSummary?: ColumnUnitSummary,\n  formattingContext: string = VALUE_FORMATTING_CONTEXT\n): string {\n  if (value === undefined || value === null) {\n    return '-';\n  }\n\n  if (columnFormat) {\n    try {\n      const formattingCode = getEffectiveFormattingCode(columnFormat, formattingContext);\n      let typedValue: unknown;\n\n      try {\n        if (columnFormat.valueType === 'date' && typeof value === 'string') {\n          typedValue = new Date(standardizeDateString(value));\n        } else if (value instanceof Date) {\n          typedValue = new Date(value.toISOString().slice(0, -1));\n        } else if (\n          columnFormat.valueType === 'number' &&\n          typeof value !== 'number' &&\n          !Number.isNaN(value)\n        ) {\n          typedValue = Number(value);\n        } else {\n          typedValue = value;\n        }\n      } catch {\n        typedValue = value;\n      }\n\n      if (isAutoFormat(columnFormat, formattingCode)) {\n        try {\n          return autoFormat(typedValue as number, columnFormat, columnUnitSummary);\n        } catch (error) {\n          console.warn(`Unexpected error applying auto formatting: ${error}`);\n        }\n      } else if (formattingCode) {\n        try {\n          return ssf.format(formattingCode, typedValue);\n        } catch (error) {\n          console.warn(`Unexpected error applying ssf formatting: ${error}`);\n        }\n      }\n    } catch (error) {\n      console.warn(`Unexpected error in applyFormatting: ${error}`);\n    }\n  }\n\n  // Fallback formatting\n  if (typeof value === 'number') {\n    if (Number.isInteger(value)) {\n      return value.toLocaleString();\n    }\n    return value.toLocaleString(undefined, { maximumFractionDigits: 2 });\n  }\n\n  if (value instanceof Date) {\n    return value.toLocaleDateString();\n  }\n\n  return String(value);\n}\n\n/**\n * Default example values for format preview\n */\nfunction defaultExample(valueType: ValueType | undefined): unknown {\n  switch (valueType) {\n    case 'number':\n      return 1234;\n    case 'date':\n      return '2022-01-03';\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Formats an example value using the given format\n */\nexport function formatExample(format: FormatObject & { userInput?: string; exampleInput?: unknown }): string {\n  const normalizedUserInput = format.userInput?.trim();\n  const preFormattedValue = normalizedUserInput || format.exampleInput || defaultExample(format.valueType);\n\n  if (preFormattedValue) {\n    try {\n      let columnUnitSummary: ColumnUnitSummary | undefined;\n      if (format.valueType === 'number') {\n        const numericValue = Number(preFormattedValue);\n        columnUnitSummary = {\n          min: numericValue,\n          max: numericValue,\n          median: numericValue,\n          maxDecimals: numericValue.toString().split('.')[1]?.length || 0,\n          unitType: 'number'\n        };\n      }\n      return applyFormatting(preFormattedValue, format, columnUnitSummary, VALUE_FORMATTING_CONTEXT);\n    } catch {\n      // Return empty on error\n    }\n  }\n  return '';\n}\n\n/**\n * Shorthand formatting function - formats a value with a format tag\n */\nexport function fmt(value: unknown, formatTag?: string): string {\n  if (formatTag) {\n    const format = getFormatObjectFromString(formatTag);\n    return formatValue(value, format);\n  }\n  return formatValue(value);\n}\n","/**\n * ECharts theme configuration\n * Light and dark theme support with customizable colors\n */\n\nimport type { EChartsThemeConfig, Appearance, Theme } from '../types';\n\n// Default theme colors - computed using the algorithm from computeShades.js\n// Based on base-100 light: #ffffff, dark: #09090b\nconst defaultThemeColors = {\n  light: {\n    'base-100': '#ffffff',\n    'base-200': '#f5f5f5',\n    'base-300': '#d4d4d4',\n    'base-content': '#404040',\n    'base-content-muted': '#737373',\n    'base-heading': '#0d0d0d'\n  },\n  dark: {\n    'base-100': '#09090b',\n    'base-200': '#18181b',\n    'base-300': '#3f3f46',\n    'base-content': '#d4d4d8',\n    'base-content-muted': '#71717a',\n    'base-heading': '#fafafa'\n  }\n};\n\n// Default color palette\nconst defaultColorPalette = [\n  '#236aa4',\n  '#45a1bf',\n  '#a5cdee',\n  '#8dacbf',\n  '#85c7c6',\n  '#d2c6ac',\n  '#f4b548',\n  '#8f3d56',\n  '#71b9f4',\n  '#46a485'\n];\n\n// User-configurable themes\nlet themes: { light: Theme; dark: Theme } = {\n  light: {\n    colors: defaultThemeColors.light,\n    colorPalettes: {\n      default: defaultColorPalette\n    },\n    colorScales: {\n      default: ['#ADD8E6', '#00008B'],\n      blue: ['#ADD8E6', '#00008B'],\n      green: ['#90EE90', '#006400'],\n      red: ['#FFB6C1', '#8B0000'],\n      orange: ['#FFDAB9', '#FF4500'],\n      purple: ['#E6E6FA', '#4B0082']\n    }\n  },\n  dark: {\n    colors: defaultThemeColors.dark,\n    colorPalettes: {\n      default: defaultColorPalette\n    },\n    colorScales: {\n      default: ['#ADD8E6', '#00008B'],\n      blue: ['#ADD8E6', '#00008B'],\n      green: ['#90EE90', '#006400'],\n      red: ['#FFB6C1', '#8B0000'],\n      orange: ['#FFDAB9', '#FF4500'],\n      purple: ['#E6E6FA', '#4B0082']\n    }\n  }\n};\n\n/**\n * Configures the themes with custom colors and palettes\n */\nexport function configureThemes(customThemes: { light?: Partial<Theme>; dark?: Partial<Theme> }): void {\n  if (customThemes.light) {\n    themes.light = {\n      ...themes.light,\n      ...customThemes.light,\n      colors: { ...themes.light.colors, ...customThemes.light.colors },\n      colorPalettes: { ...themes.light.colorPalettes, ...customThemes.light.colorPalettes },\n      colorScales: { ...themes.light.colorScales, ...customThemes.light.colorScales }\n    };\n  }\n  if (customThemes.dark) {\n    themes.dark = {\n      ...themes.dark,\n      ...customThemes.dark,\n      colors: { ...themes.dark.colors, ...customThemes.dark.colors },\n      colorPalettes: { ...themes.dark.colorPalettes, ...customThemes.dark.colorPalettes },\n      colorScales: { ...themes.dark.colorScales, ...customThemes.dark.colorScales }\n    };\n  }\n}\n\n/**\n * Gets the current themes configuration\n */\nexport function getThemes(): { light: Theme; dark: Theme } {\n  return themes;\n}\n\n/**\n * Creates an ECharts theme object for the given appearance mode\n */\nexport function createEChartsTheme(mode: Appearance): EChartsThemeConfig {\n  const currentTheme = themes[mode];\n  const colors = currentTheme.colors;\n\n  const axisBaselineColor = colors['base-content-muted'];\n  const axisTickColor = colors['base-content-muted'];\n  const axisLabelColor = colors['base-content-muted'];\n  const gridlineColor = colors['base-300'];\n  const axisTitleBackgroundColor = colors['base-100'];\n  const legendTextColor = colors['base-content-muted'];\n  const legendPageIconColor = colors['base-content-muted'];\n  const legendPageTextColor = colors['base-content-muted'];\n  const tooltipBorderColor = colors['base-300'];\n  const tooltipBackgroundColor = colors['base-100'];\n  const tooltipTextColor = colors['base-content'];\n  const titleColor = colors['base-heading'];\n  const subtitleColor = colors['base-content-muted'];\n\n  return {\n    darkMode: mode === 'dark',\n    backgroundColor: colors['base-100'],\n    textStyle: {\n      fontFamily: ['Inter', 'sans-serif']\n    },\n    grid: {\n      left: '1%',\n      right: '4%',\n      bottom: '0%',\n      top: '15%',\n      containLabel: true\n    },\n    color: currentTheme.colorPalettes.default,\n    title: {\n      padding: 0,\n      itemGap: 7,\n      textStyle: {\n        fontSize: 14,\n        color: titleColor\n      },\n      subtextStyle: {\n        fontSize: 13,\n        color: subtitleColor,\n        overflow: 'break'\n      },\n      top: '1px'\n    },\n    line: {\n      itemStyle: {\n        borderWidth: 0\n      },\n      lineStyle: {\n        width: 2,\n        join: 'round'\n      },\n      symbolSize: 0,\n      symbol: 'circle',\n      smooth: false\n    },\n    radar: {\n      itemStyle: {\n        borderWidth: 0\n      },\n      lineStyle: {\n        width: 2\n      },\n      symbolSize: 0,\n      symbol: 'circle',\n      smooth: false\n    },\n    pie: {\n      itemStyle: {\n        borderWidth: 0,\n        borderColor: '#cccccc'\n      }\n    },\n    scatter: {\n      itemStyle: {\n        borderWidth: 0,\n        borderColor: '#cccccc'\n      }\n    },\n    boxplot: {\n      itemStyle: {\n        borderWidth: 1.5\n      }\n    },\n    parallel: {\n      itemStyle: {\n        borderWidth: 0,\n        borderColor: '#cccccc'\n      }\n    },\n    sankey: {\n      itemStyle: {\n        borderWidth: 0,\n        borderColor: '#cccccc'\n      }\n    },\n    funnel: {\n      itemStyle: {\n        borderWidth: 0,\n        borderColor: '#cccccc'\n      }\n    },\n    gauge: {\n      itemStyle: {\n        borderWidth: 0,\n        borderColor: '#cccccc'\n      }\n    },\n    candlestick: {\n      itemStyle: {\n        color: '#eb5454',\n        color0: '#47b262',\n        borderColor: '#eb5454',\n        borderColor0: '#47b262',\n        borderWidth: 1\n      }\n    },\n    graph: {\n      itemStyle: {\n        borderWidth: 0,\n        borderColor: '#cccccc'\n      },\n      lineStyle: {\n        width: 1,\n        color: '#aaaaaa'\n      },\n      symbolSize: 0,\n      symbol: 'circle',\n      smooth: false,\n      color: [\n        '#923d59',\n        '#488f96',\n        '#518eca',\n        '#b3a9a0',\n        '#ffc857',\n        '#495867',\n        '#bfdbf7',\n        '#bc4749',\n        '#eeebd0'\n      ],\n      label: {\n        color: '#f2f2f2'\n      }\n    },\n    map: {\n      itemStyle: {\n        areaColor: '#eee',\n        borderColor: '#444',\n        borderWidth: 0.5\n      },\n      label: {\n        color: '#000'\n      },\n      emphasis: {\n        itemStyle: {\n          areaColor: 'rgba(255,215,0,0.8)',\n          borderColor: '#444',\n          borderWidth: 1\n        },\n        label: {\n          color: 'rgb(100,0,0)'\n        }\n      }\n    },\n    geo: {\n      itemStyle: {\n        areaColor: '#eee',\n        borderColor: '#444',\n        borderWidth: 0.5\n      },\n      label: {\n        color: '#000'\n      },\n      emphasis: {\n        itemStyle: {\n          areaColor: 'rgba(255,215,0,0.8)',\n          borderColor: '#444',\n          borderWidth: 1\n        },\n        label: {\n          color: 'rgb(100,0,0)'\n        }\n      }\n    },\n    categoryAxis: {\n      axisLine: {\n        show: true,\n        lineStyle: {\n          color: axisBaselineColor\n        }\n      },\n      axisTick: {\n        show: false,\n        lineStyle: {\n          color: axisTickColor\n        },\n        length: 3,\n        alignWithLabel: true\n      },\n      axisLabel: {\n        show: true,\n        color: axisLabelColor\n      },\n      splitLine: {\n        show: false,\n        lineStyle: {\n          color: [gridlineColor]\n        }\n      },\n      splitArea: {\n        show: false,\n        areaStyle: {\n          color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n        }\n      }\n    },\n    valueAxis: {\n      axisLine: {\n        show: false,\n        lineStyle: {\n          color: axisBaselineColor\n        }\n      },\n      axisTick: {\n        show: false,\n        lineStyle: {\n          color: axisTickColor\n        },\n        length: 2\n      },\n      axisLabel: {\n        show: true,\n        color: axisLabelColor\n      },\n      splitLine: {\n        show: true,\n        lineStyle: {\n          color: [gridlineColor],\n          width: 1\n        }\n      },\n      splitArea: {\n        show: false,\n        areaStyle: {\n          color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n        }\n      },\n      nameTextStyle: {\n        backgroundColor: axisTitleBackgroundColor\n      }\n    },\n    logAxis: {\n      axisLine: {\n        show: false,\n        lineStyle: {\n          color: axisBaselineColor\n        }\n      },\n      axisTick: {\n        show: false,\n        lineStyle: {\n          color: axisTickColor\n        },\n        length: 2\n      },\n      axisLabel: {\n        show: true,\n        color: axisLabelColor\n      },\n      splitLine: {\n        show: true,\n        lineStyle: {\n          color: [gridlineColor]\n        }\n      },\n      splitArea: {\n        show: false,\n        areaStyle: {\n          color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n        }\n      },\n      nameTextStyle: {\n        backgroundColor: axisTitleBackgroundColor\n      }\n    },\n    timeAxis: {\n      axisLine: {\n        show: true,\n        lineStyle: {\n          color: axisBaselineColor\n        }\n      },\n      axisTick: {\n        show: true,\n        lineStyle: {\n          color: axisTickColor\n        },\n        length: 3\n      },\n      axisLabel: {\n        show: true,\n        color: axisLabelColor\n      },\n      splitLine: {\n        show: false,\n        lineStyle: {\n          color: [gridlineColor]\n        }\n      },\n      splitArea: {\n        show: false,\n        areaStyle: {\n          color: ['rgba(250,250,250,0.2)', 'rgba(210,219,238,0.2)']\n        }\n      }\n    },\n    toolbox: {\n      iconStyle: {\n        borderColor: '#999999'\n      },\n      emphasis: {\n        iconStyle: {\n          borderColor: '#459cde'\n        }\n      }\n    },\n    legend: {\n      textStyle: {\n        padding: [0, 0, 0, -7],\n        color: legendTextColor\n      },\n      icon: 'circle',\n      pageIcons: {\n        horizontal: [\n          'M 17 3 h 2 c 0.386 0 0.738 0.223 0.904 0.572 s 0.115 0.762 -0.13 1.062 L 11.292 15 l 8.482 10.367 c 0.245 0.299 0.295 0.712 0.13 1.062 S 19.386 27 19 27 h -2 c -0.3 0 -0.584 -0.135 -0.774 -0.367 l -9 -11 c -0.301 -0.369 -0.301 -0.898 0 -1.267 l 9 -11 C 16.416 3.135 16.7 3 17 3 Z',\n          'M 12 27 h -2 c -0.386 0 -0.738 -0.223 -0.904 -0.572 s -0.115 -0.762 0.13 -1.062 L 17.708 15 L 9.226 4.633 c -0.245 -0.299 -0.295 -0.712 -0.13 -1.062 S 9.614 3 10 3 h 2 c 0.3 0 0.584 0.135 0.774 0.367 l 9 11 c 0.301 0.369 0.301 0.898 0 1.267 l -9 11 C 12.584 26.865 12.3 27 12 27 Z'\n        ]\n      },\n      pageIconColor: legendPageIconColor,\n      pageIconSize: 12,\n      pageTextStyle: {\n        color: legendPageTextColor\n      },\n      pageButtonItemGap: -2,\n      animationDurationUpdate: 300\n    },\n    tooltip: {\n      axisPointer: {\n        lineStyle: {\n          color: '#cccccc',\n          width: 1\n        },\n        crossStyle: {\n          color: '#cccccc',\n          width: 1\n        }\n      },\n      borderRadius: 4,\n      borderWidth: 1,\n      borderColor: tooltipBorderColor,\n      backgroundColor: tooltipBackgroundColor,\n      textStyle: {\n        color: tooltipTextColor,\n        fontSize: 12,\n        fontWeight: 400\n      },\n      padding: 6\n    },\n    timeline: {\n      lineStyle: {\n        color: '#e3e3e3',\n        width: 2\n      },\n      itemStyle: {\n        color: '#d6d6d6',\n        borderWidth: 1\n      },\n      controlStyle: {\n        color: '#bfbfbf',\n        borderColor: '#bfbfbf',\n        borderWidth: 1\n      },\n      checkpointStyle: {\n        color: '#8f8f8f',\n        borderColor: '#ffffff'\n      },\n      label: {\n        color: '#c9c9c9'\n      },\n      emphasis: {\n        itemStyle: {\n          color: '#9c9c9c'\n        },\n        controlStyle: {\n          color: '#bfbfbf',\n          borderColor: '#bfbfbf',\n          borderWidth: 1\n        },\n        label: {\n          color: '#c9c9c9'\n        }\n      }\n    },\n    visualMap: {\n      color: ['#c41621', '#e39588', '#f5ed98']\n    },\n    dataZoom: {\n      type: 'slider',\n      bottom: 10,\n      height: 30,\n      showDetail: false,\n      handleSize: '80%',\n      borderColor: gridlineColor,\n      handleStyle: {\n        borderColor: gridlineColor,\n        color: gridlineColor\n      },\n      moveHandleStyle: {\n        borderColor: gridlineColor,\n        color: gridlineColor\n      },\n      textStyle: {},\n      emphasis: {\n        handleStyle: {\n          borderColor: gridlineColor,\n          color: gridlineColor\n        },\n        moveHandleStyle: {\n          borderColor: gridlineColor,\n          color: gridlineColor\n        }\n      }\n    },\n    markPoint: {\n      label: {\n        color: '#f2f2f2'\n      },\n      emphasis: {\n        label: {\n          color: '#f2f2f2'\n        }\n      }\n    }\n  };\n}\n\nexport const defaultThemeLight = createEChartsTheme('light');\nexport const defaultThemeDark = createEChartsTheme('dark');\n","import { min, max } from './index.js';\n\nexport default (x, low = 0, high = 1) => {\n    return min(max(low, x), high);\n};\n","import limit from './limit.js';\n\nexport default (rgb) => {\n    rgb._clipped = false;\n    rgb._unclipped = rgb.slice(0);\n    for (let i = 0; i <= 3; i++) {\n        if (i < 3) {\n            if (rgb[i] < 0 || rgb[i] > 255) rgb._clipped = true;\n            rgb[i] = limit(rgb[i], 0, 255);\n        } else if (i === 3) {\n            rgb[i] = limit(rgb[i], 0, 1);\n        }\n    }\n    return rgb;\n};\n","// ported from jQuery's $.type\nconst classToType = {};\nfor (let name of [\n    'Boolean',\n    'Number',\n    'String',\n    'Function',\n    'Array',\n    'Date',\n    'RegExp',\n    'Undefined',\n    'Null'\n]) {\n    classToType[`[object ${name}]`] = name.toLowerCase();\n}\nexport default function (obj) {\n    return classToType[Object.prototype.toString.call(obj)] || 'object';\n}\n","import type from './type.js';\n\nexport default (args, keyOrder = null) => {\n    // if called with more than 3 arguments, we return the arguments\n    if (args.length >= 3) return Array.prototype.slice.call(args);\n    // with less than 3 args we check if first arg is object\n    // and use the keyOrder string to extract and sort properties\n    if (type(args[0]) == 'object' && keyOrder) {\n        return keyOrder\n            .split('')\n            .filter((k) => args[0][k] !== undefined)\n            .map((k) => args[0][k]);\n    }\n    // otherwise we just return the first argument\n    // (which we suppose is an array of args)\n    return args[0];\n};\n","import type from './type.js';\n\nexport default (args) => {\n    if (args.length < 2) return null;\n    const l = args.length - 1;\n    if (type(args[l]) == 'string') return args[l].toLowerCase();\n    return null;\n};\n","const { PI, min, max } = Math;\n\nexport { default as clip_rgb } from './clip_rgb.js';\nexport { default as limit } from './limit.js';\nexport { default as type } from './type.js';\nexport { default as unpack } from './unpack.js';\nexport { default as last } from './last.js';\n\nconst TWOPI = PI * 2;\nconst PITHIRD = PI / 3;\nconst DEG2RAD = PI / 180;\nconst RAD2DEG = 180 / PI;\n\nexport { PI, TWOPI, PITHIRD, DEG2RAD, RAD2DEG, min, max };\n","export default {\n    format: {},\n    autodetect: []\n};\n","import { last, clip_rgb, type } from './utils/index.js';\nimport _input from './io/input.js';\n\nclass Color {\n    constructor(...args) {\n        const me = this;\n        if (\n            type(args[0]) === 'object' &&\n            args[0].constructor &&\n            args[0].constructor === this.constructor\n        ) {\n            // the argument is already a Color instance\n            return args[0];\n        }\n        // last argument could be the mode\n        let mode = last(args);\n        let autodetect = false;\n        if (!mode) {\n            autodetect = true;\n            if (!_input.sorted) {\n                _input.autodetect = _input.autodetect.sort((a, b) => b.p - a.p);\n                _input.sorted = true;\n            }\n            // auto-detect format\n            for (let chk of _input.autodetect) {\n                mode = chk.test(...args);\n                if (mode) break;\n            }\n        }\n        if (_input.format[mode]) {\n            const rgb = _input.format[mode].apply(\n                null,\n                autodetect ? args : args.slice(0, -1)\n            );\n            me._rgb = clip_rgb(rgb);\n        } else {\n            throw new Error('unknown format: ' + args);\n        }\n        // add alpha channel\n        if (me._rgb.length === 3) me._rgb.push(1);\n    }\n    toString() {\n        if (type(this.hex) == 'function') return this.hex();\n        return `[${this._rgb.join(',')}]`;\n    }\n}\nexport default Color;\n","// this gets updated automatically\nexport const version = '2.6.0';\n","import Color from './Color.js';\nimport { version } from './version.js';\n\nconst chroma = (...args) => {\n    return new chroma.Color(...args);\n};\n\nchroma.Color = Color;\nchroma.version = version;\n\nexport default chroma;\n","import { unpack } from '../../utils/index.js';\n\nconst cmyk2rgb = (...args) => {\n    args = unpack(args, 'cmyk');\n    const [c, m, y, k] = args;\n    const alpha = args.length > 4 ? args[4] : 1;\n    if (k === 1) return [0, 0, 0, alpha];\n    return [\n        c >= 1 ? 0 : 255 * (1 - c) * (1 - k), // r\n        m >= 1 ? 0 : 255 * (1 - m) * (1 - k), // g\n        y >= 1 ? 0 : 255 * (1 - y) * (1 - k), // b\n        alpha\n    ];\n};\n\nexport default cmyk2rgb;\n","import { unpack } from '../../utils/index.js';\nconst { max } = Math;\n\nconst rgb2cmyk = (...args) => {\n    let [r, g, b] = unpack(args, 'rgb');\n    r = r / 255;\n    g = g / 255;\n    b = b / 255;\n    const k = 1 - max(r, max(g, b));\n    const f = k < 1 ? 1 / (1 - k) : 0;\n    const c = (1 - r - k) * f;\n    const m = (1 - g - k) * f;\n    const y = (1 - b - k) * f;\n    return [c, m, y, k];\n};\n\nexport default rgb2cmyk;\n","import chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport { unpack, type } from '../../utils/index.js';\nimport cmyk2rgb from './cmyk2rgb.js';\nimport rgb2cmyk from './rgb2cmyk.js';\n\nColor.prototype.cmyk = function () {\n    return rgb2cmyk(this._rgb);\n};\n\nchroma.cmyk = (...args) => new Color(...args, 'cmyk');\n\ninput.format.cmyk = cmyk2rgb;\n\ninput.autodetect.push({\n    p: 2,\n    test: (...args) => {\n        args = unpack(args, 'cmyk');\n        if (type(args) === 'array' && args.length === 4) {\n            return 'cmyk';\n        }\n    }\n});\n","import { unpack, last } from '../../utils/index.js';\nconst rnd = (a) => Math.round(a * 100) / 100;\n\n/*\n * supported arguments:\n * - hsl2css(h,s,l)\n * - hsl2css(h,s,l,a)\n * - hsl2css([h,s,l], mode)\n * - hsl2css([h,s,l,a], mode)\n * - hsl2css({h,s,l,a}, mode)\n */\nconst hsl2css = (...args) => {\n    const hsla = unpack(args, 'hsla');\n    let mode = last(args) || 'lsa';\n    hsla[0] = rnd(hsla[0] || 0);\n    hsla[1] = rnd(hsla[1] * 100) + '%';\n    hsla[2] = rnd(hsla[2] * 100) + '%';\n    if (mode === 'hsla' || (hsla.length > 3 && hsla[3] < 1)) {\n        hsla[3] = hsla.length > 3 ? hsla[3] : 1;\n        mode = 'hsla';\n    } else {\n        hsla.length = 3;\n    }\n    return `${mode}(${hsla.join(',')})`;\n};\n\nexport default hsl2css;\n","import { unpack, min, max } from '../../utils/index.js';\n\n/*\n * supported arguments:\n * - rgb2hsl(r,g,b)\n * - rgb2hsl(r,g,b,a)\n * - rgb2hsl([r,g,b])\n * - rgb2hsl([r,g,b,a])\n * - rgb2hsl({r,g,b,a})\n */\nconst rgb2hsl = (...args) => {\n    args = unpack(args, 'rgba');\n    let [r, g, b] = args;\n\n    r /= 255;\n    g /= 255;\n    b /= 255;\n\n    const minRgb = min(r, g, b);\n    const maxRgb = max(r, g, b);\n\n    const l = (maxRgb + minRgb) / 2;\n    let s, h;\n\n    if (maxRgb === minRgb) {\n        s = 0;\n        h = Number.NaN;\n    } else {\n        s =\n            l < 0.5\n                ? (maxRgb - minRgb) / (maxRgb + minRgb)\n                : (maxRgb - minRgb) / (2 - maxRgb - minRgb);\n    }\n\n    if (r == maxRgb) h = (g - b) / (maxRgb - minRgb);\n    else if (g == maxRgb) h = 2 + (b - r) / (maxRgb - minRgb);\n    else if (b == maxRgb) h = 4 + (r - g) / (maxRgb - minRgb);\n\n    h *= 60;\n    if (h < 0) h += 360;\n    if (args.length > 3 && args[3] !== undefined) return [h, s, l, args[3]];\n    return [h, s, l];\n};\n\nexport default rgb2hsl;\n","import { unpack, last } from '../../utils/index.js';\nimport hsl2css from './hsl2css.js';\nimport rgb2hsl from '../hsl/rgb2hsl.js';\nconst { round } = Math;\n\n/*\n * supported arguments:\n * - rgb2css(r,g,b)\n * - rgb2css(r,g,b,a)\n * - rgb2css([r,g,b], mode)\n * - rgb2css([r,g,b,a], mode)\n * - rgb2css({r,g,b,a}, mode)\n */\nconst rgb2css = (...args) => {\n    const rgba = unpack(args, 'rgba');\n    let mode = last(args) || 'rgb';\n    if (mode.substr(0, 3) == 'hsl') {\n        return hsl2css(rgb2hsl(rgba), mode);\n    }\n    rgba[0] = round(rgba[0]);\n    rgba[1] = round(rgba[1]);\n    rgba[2] = round(rgba[2]);\n    if (mode === 'rgba' || (rgba.length > 3 && rgba[3] < 1)) {\n        rgba[3] = rgba.length > 3 ? rgba[3] : 1;\n        mode = 'rgba';\n    }\n    return `${mode}(${rgba.slice(0, mode === 'rgb' ? 3 : 4).join(',')})`;\n};\n\nexport default rgb2css;\n","import { unpack } from '../../utils/index.js';\nconst { round } = Math;\n\nconst hsl2rgb = (...args) => {\n    args = unpack(args, 'hsl');\n    const [h, s, l] = args;\n    let r, g, b;\n    if (s === 0) {\n        r = g = b = l * 255;\n    } else {\n        const t3 = [0, 0, 0];\n        const c = [0, 0, 0];\n        const t2 = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        const t1 = 2 * l - t2;\n        const h_ = h / 360;\n        t3[0] = h_ + 1 / 3;\n        t3[1] = h_;\n        t3[2] = h_ - 1 / 3;\n        for (let i = 0; i < 3; i++) {\n            if (t3[i] < 0) t3[i] += 1;\n            if (t3[i] > 1) t3[i] -= 1;\n            if (6 * t3[i] < 1) c[i] = t1 + (t2 - t1) * 6 * t3[i];\n            else if (2 * t3[i] < 1) c[i] = t2;\n            else if (3 * t3[i] < 2) c[i] = t1 + (t2 - t1) * (2 / 3 - t3[i]) * 6;\n            else c[i] = t1;\n        }\n        [r, g, b] = [round(c[0] * 255), round(c[1] * 255), round(c[2] * 255)];\n    }\n    if (args.length > 3) {\n        // keep alpha channel\n        return [r, g, b, args[3]];\n    }\n    return [r, g, b, 1];\n};\n\nexport default hsl2rgb;\n","import hsl2rgb from '../hsl/hsl2rgb.js';\nimport input from '../input.js';\n\nconst RE_RGB = /^rgb\\(\\s*(-?\\d+),\\s*(-?\\d+)\\s*,\\s*(-?\\d+)\\s*\\)$/;\nconst RE_RGBA =\n    /^rgba\\(\\s*(-?\\d+),\\s*(-?\\d+)\\s*,\\s*(-?\\d+)\\s*,\\s*([01]|[01]?\\.\\d+)\\)$/;\nconst RE_RGB_PCT =\n    /^rgb\\(\\s*(-?\\d+(?:\\.\\d+)?)%,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*\\)$/;\nconst RE_RGBA_PCT =\n    /^rgba\\(\\s*(-?\\d+(?:\\.\\d+)?)%,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)$/;\nconst RE_HSL =\n    /^hsl\\(\\s*(-?\\d+(?:\\.\\d+)?),\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*\\)$/;\nconst RE_HSLA =\n    /^hsla\\(\\s*(-?\\d+(?:\\.\\d+)?),\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*(-?\\d+(?:\\.\\d+)?)%\\s*,\\s*([01]|[01]?\\.\\d+)\\)$/;\n\nconst { round } = Math;\n\nconst css2rgb = (css) => {\n    css = css.toLowerCase().trim();\n    let m;\n\n    if (input.format.named) {\n        try {\n            return input.format.named(css);\n            // eslint-disable-next-line\n        } catch (e) {}\n    }\n\n    // rgb(250,20,0)\n    if ((m = css.match(RE_RGB))) {\n        const rgb = m.slice(1, 4);\n        for (let i = 0; i < 3; i++) {\n            rgb[i] = +rgb[i];\n        }\n        rgb[3] = 1; // default alpha\n        return rgb;\n    }\n\n    // rgba(250,20,0,0.4)\n    if ((m = css.match(RE_RGBA))) {\n        const rgb = m.slice(1, 5);\n        for (let i = 0; i < 4; i++) {\n            rgb[i] = +rgb[i];\n        }\n        return rgb;\n    }\n\n    // rgb(100%,0%,0%)\n    if ((m = css.match(RE_RGB_PCT))) {\n        const rgb = m.slice(1, 4);\n        for (let i = 0; i < 3; i++) {\n            rgb[i] = round(rgb[i] * 2.55);\n        }\n        rgb[3] = 1; // default alpha\n        return rgb;\n    }\n\n    // rgba(100%,0%,0%,0.4)\n    if ((m = css.match(RE_RGBA_PCT))) {\n        const rgb = m.slice(1, 5);\n        for (let i = 0; i < 3; i++) {\n            rgb[i] = round(rgb[i] * 2.55);\n        }\n        rgb[3] = +rgb[3];\n        return rgb;\n    }\n\n    // hsl(0,100%,50%)\n    if ((m = css.match(RE_HSL))) {\n        const hsl = m.slice(1, 4);\n        hsl[1] *= 0.01;\n        hsl[2] *= 0.01;\n        const rgb = hsl2rgb(hsl);\n        rgb[3] = 1;\n        return rgb;\n    }\n\n    // hsla(0,100%,50%,0.5)\n    if ((m = css.match(RE_HSLA))) {\n        const hsl = m.slice(1, 4);\n        hsl[1] *= 0.01;\n        hsl[2] *= 0.01;\n        const rgb = hsl2rgb(hsl);\n        rgb[3] = +m[4]; // default alpha = 1\n        return rgb;\n    }\n};\n\ncss2rgb.test = (s) => {\n    return (\n        RE_RGB.test(s) ||\n        RE_RGBA.test(s) ||\n        RE_RGB_PCT.test(s) ||\n        RE_RGBA_PCT.test(s) ||\n        RE_HSL.test(s) ||\n        RE_HSLA.test(s)\n    );\n};\n\nexport default css2rgb;\n","import chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport { type } from '../../utils/index.js';\n\nimport rgb2css from './rgb2css.js';\nimport css2rgb from './css2rgb.js';\n\nColor.prototype.css = function (mode) {\n    return rgb2css(this._rgb, mode);\n};\n\nchroma.css = (...args) => new Color(...args, 'css');\n\ninput.format.css = css2rgb;\n\ninput.autodetect.push({\n    p: 5,\n    test: (h, ...rest) => {\n        if (!rest.length && type(h) === 'string' && css2rgb.test(h)) {\n            return 'css';\n        }\n    }\n});\n","import Color from '../../Color.js';\nimport chroma from '../../chroma.js';\nimport input from '../input.js';\nimport { unpack } from '../../utils/index.js';\n\ninput.format.gl = (...args) => {\n    const rgb = unpack(args, 'rgba');\n    rgb[0] *= 255;\n    rgb[1] *= 255;\n    rgb[2] *= 255;\n    return rgb;\n};\n\nchroma.gl = (...args) => new Color(...args, 'gl');\n\nColor.prototype.gl = function () {\n    const rgb = this._rgb;\n    return [rgb[0] / 255, rgb[1] / 255, rgb[2] / 255, rgb[3]];\n};\n","import { unpack } from '../../utils/index.js';\nconst { floor } = Math;\n\n/*\n * this is basically just HSV with some minor tweaks\n *\n * hue.. [0..360]\n * chroma .. [0..1]\n * grayness .. [0..1]\n */\n\nconst hcg2rgb = (...args) => {\n    args = unpack(args, 'hcg');\n    let [h, c, _g] = args;\n    let r, g, b;\n    _g = _g * 255;\n    const _c = c * 255;\n    if (c === 0) {\n        r = g = b = _g;\n    } else {\n        if (h === 360) h = 0;\n        if (h > 360) h -= 360;\n        if (h < 0) h += 360;\n        h /= 60;\n        const i = floor(h);\n        const f = h - i;\n        const p = _g * (1 - c);\n        const q = p + _c * (1 - f);\n        const t = p + _c * f;\n        const v = p + _c;\n        switch (i) {\n            case 0:\n                [r, g, b] = [v, t, p];\n                break;\n            case 1:\n                [r, g, b] = [q, v, p];\n                break;\n            case 2:\n                [r, g, b] = [p, v, t];\n                break;\n            case 3:\n                [r, g, b] = [p, q, v];\n                break;\n            case 4:\n                [r, g, b] = [t, p, v];\n                break;\n            case 5:\n                [r, g, b] = [v, p, q];\n                break;\n        }\n    }\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n};\n\nexport default hcg2rgb;\n","import { unpack, max, min } from '../../utils/index.js';\n\nconst rgb2hcg = (...args) => {\n    const [r, g, b] = unpack(args, 'rgb');\n    const minRgb = min(r, g, b);\n    const maxRgb = max(r, g, b);\n    const delta = maxRgb - minRgb;\n    const c = (delta * 100) / 255;\n    const _g = (minRgb / (255 - delta)) * 100;\n    let h;\n    if (delta === 0) {\n        h = Number.NaN;\n    } else {\n        if (r === maxRgb) h = (g - b) / delta;\n        if (g === maxRgb) h = 2 + (b - r) / delta;\n        if (b === maxRgb) h = 4 + (r - g) / delta;\n        h *= 60;\n        if (h < 0) h += 360;\n    }\n    return [h, c, _g];\n};\n\nexport default rgb2hcg;\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport hcg2rgb from './hcg2rgb.js';\nimport rgb2hcg from './rgb2hcg.js';\n\nColor.prototype.hcg = function () {\n    return rgb2hcg(this._rgb);\n};\n\nchroma.hcg = (...args) => new Color(...args, 'hcg');\n\ninput.format.hcg = hcg2rgb;\n\ninput.autodetect.push({\n    p: 1,\n    test: (...args) => {\n        args = unpack(args, 'hcg');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'hcg';\n        }\n    }\n});\n","const RE_HEX = /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;\nconst RE_HEXA = /^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/;\n\nconst hex2rgb = (hex) => {\n    if (hex.match(RE_HEX)) {\n        // remove optional leading #\n        if (hex.length === 4 || hex.length === 7) {\n            hex = hex.substr(1);\n        }\n        // expand short-notation to full six-digit\n        if (hex.length === 3) {\n            hex = hex.split('');\n            hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n        }\n        const u = parseInt(hex, 16);\n        const r = u >> 16;\n        const g = (u >> 8) & 0xff;\n        const b = u & 0xff;\n        return [r, g, b, 1];\n    }\n\n    // match rgba hex format, eg #FF000077\n    if (hex.match(RE_HEXA)) {\n        if (hex.length === 5 || hex.length === 9) {\n            // remove optional leading #\n            hex = hex.substr(1);\n        }\n        // expand short-notation to full eight-digit\n        if (hex.length === 4) {\n            hex = hex.split('');\n            hex =\n                hex[0] +\n                hex[0] +\n                hex[1] +\n                hex[1] +\n                hex[2] +\n                hex[2] +\n                hex[3] +\n                hex[3];\n        }\n        const u = parseInt(hex, 16);\n        const r = (u >> 24) & 0xff;\n        const g = (u >> 16) & 0xff;\n        const b = (u >> 8) & 0xff;\n        const a = Math.round(((u & 0xff) / 0xff) * 100) / 100;\n        return [r, g, b, a];\n    }\n\n    // we used to check for css colors here\n    // if _input.css? and rgb = _input.css hex\n    //     return rgb\n\n    throw new Error(`unknown hex color: ${hex}`);\n};\n\nexport default hex2rgb;\n","import { unpack, last } from '../../utils/index.js';\nconst { round } = Math;\n\nconst rgb2hex = (...args) => {\n    let [r, g, b, a] = unpack(args, 'rgba');\n    let mode = last(args) || 'auto';\n    if (a === undefined) a = 1;\n    if (mode === 'auto') {\n        mode = a < 1 ? 'rgba' : 'rgb';\n    }\n    r = round(r);\n    g = round(g);\n    b = round(b);\n    const u = (r << 16) | (g << 8) | b;\n    let str = '000000' + u.toString(16); //#.toUpperCase();\n    str = str.substr(str.length - 6);\n    let hxa = '0' + round(a * 255).toString(16);\n    hxa = hxa.substr(hxa.length - 2);\n    switch (mode.toLowerCase()) {\n        case 'rgba':\n            return `#${str}${hxa}`;\n        case 'argb':\n            return `#${hxa}${str}`;\n        default:\n            return `#${str}`;\n    }\n};\n\nexport default rgb2hex;\n","import chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport { type } from '../../utils/index.js';\nimport input from '../input.js';\nimport hex2rgb from './hex2rgb.js';\nimport rgb2hex from './rgb2hex.js';\n\nColor.prototype.hex = function (mode) {\n    return rgb2hex(this._rgb, mode);\n};\n\nchroma.hex = (...args) => new Color(...args, 'hex');\n\ninput.format.hex = hex2rgb;\ninput.autodetect.push({\n    p: 4,\n    test: (h, ...rest) => {\n        if (\n            !rest.length &&\n            type(h) === 'string' &&\n            [3, 4, 5, 6, 7, 8, 9].indexOf(h.length) >= 0\n        ) {\n            return 'hex';\n        }\n    }\n});\n","import { unpack, limit, TWOPI, PITHIRD } from '../../utils/index.js';\nconst { cos } = Math;\n\n/*\n * hue [0..360]\n * saturation [0..1]\n * intensity [0..1]\n */\nconst hsi2rgb = (...args) => {\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/hsi2rgb.cpp\n    */\n    args = unpack(args, 'hsi');\n    let [h, s, i] = args;\n    let r, g, b;\n\n    if (isNaN(h)) h = 0;\n    if (isNaN(s)) s = 0;\n    // normalize hue\n    if (h > 360) h -= 360;\n    if (h < 0) h += 360;\n    h /= 360;\n    if (h < 1 / 3) {\n        b = (1 - s) / 3;\n        r = (1 + (s * cos(TWOPI * h)) / cos(PITHIRD - TWOPI * h)) / 3;\n        g = 1 - (b + r);\n    } else if (h < 2 / 3) {\n        h -= 1 / 3;\n        r = (1 - s) / 3;\n        g = (1 + (s * cos(TWOPI * h)) / cos(PITHIRD - TWOPI * h)) / 3;\n        b = 1 - (r + g);\n    } else {\n        h -= 2 / 3;\n        g = (1 - s) / 3;\n        b = (1 + (s * cos(TWOPI * h)) / cos(PITHIRD - TWOPI * h)) / 3;\n        r = 1 - (g + b);\n    }\n    r = limit(i * r * 3);\n    g = limit(i * g * 3);\n    b = limit(i * b * 3);\n    return [r * 255, g * 255, b * 255, args.length > 3 ? args[3] : 1];\n};\n\nexport default hsi2rgb;\n","import { unpack, TWOPI } from '../../utils/index.js';\nconst { min, sqrt, acos } = Math;\n\nconst rgb2hsi = (...args) => {\n    /*\n    borrowed from here:\n    http://hummer.stanford.edu/museinfo/doc/examples/humdrum/keyscape2/rgb2hsi.cpp\n    */\n    let [r, g, b] = unpack(args, 'rgb');\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    let h;\n    const min_ = min(r, g, b);\n    const i = (r + g + b) / 3;\n    const s = i > 0 ? 1 - min_ / i : 0;\n    if (s === 0) {\n        h = NaN;\n    } else {\n        h = (r - g + (r - b)) / 2;\n        h /= sqrt((r - g) * (r - g) + (r - b) * (g - b));\n        h = acos(h);\n        if (b > g) {\n            h = TWOPI - h;\n        }\n        h /= TWOPI;\n    }\n    return [h * 360, s, i];\n};\n\nexport default rgb2hsi;\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport hsi2rgb from './hsi2rgb.js';\nimport rgb2hsi from './rgb2hsi.js';\n\nColor.prototype.hsi = function () {\n    return rgb2hsi(this._rgb);\n};\n\nchroma.hsi = (...args) => new Color(...args, 'hsi');\n\ninput.format.hsi = hsi2rgb;\n\ninput.autodetect.push({\n    p: 2,\n    test: (...args) => {\n        args = unpack(args, 'hsi');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'hsi';\n        }\n    }\n});\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport hsl2rgb from './hsl2rgb.js';\nimport rgb2hsl from './rgb2hsl.js';\n\nColor.prototype.hsl = function () {\n    return rgb2hsl(this._rgb);\n};\n\nchroma.hsl = (...args) => new Color(...args, 'hsl');\n\ninput.format.hsl = hsl2rgb;\n\ninput.autodetect.push({\n    p: 2,\n    test: (...args) => {\n        args = unpack(args, 'hsl');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'hsl';\n        }\n    }\n});\n","import { unpack } from '../../utils/index.js';\nconst { floor } = Math;\n\nconst hsv2rgb = (...args) => {\n    args = unpack(args, 'hsv');\n    let [h, s, v] = args;\n    let r, g, b;\n    v *= 255;\n    if (s === 0) {\n        r = g = b = v;\n    } else {\n        if (h === 360) h = 0;\n        if (h > 360) h -= 360;\n        if (h < 0) h += 360;\n        h /= 60;\n\n        const i = floor(h);\n        const f = h - i;\n        const p = v * (1 - s);\n        const q = v * (1 - s * f);\n        const t = v * (1 - s * (1 - f));\n\n        switch (i) {\n            case 0:\n                [r, g, b] = [v, t, p];\n                break;\n            case 1:\n                [r, g, b] = [q, v, p];\n                break;\n            case 2:\n                [r, g, b] = [p, v, t];\n                break;\n            case 3:\n                [r, g, b] = [p, q, v];\n                break;\n            case 4:\n                [r, g, b] = [t, p, v];\n                break;\n            case 5:\n                [r, g, b] = [v, p, q];\n                break;\n        }\n    }\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n};\n\nexport default hsv2rgb;\n","import { unpack } from '../../utils/index.js';\nconst { min, max } = Math;\n\n/*\n * supported arguments:\n * - rgb2hsv(r,g,b)\n * - rgb2hsv([r,g,b])\n * - rgb2hsv({r,g,b})\n */\nconst rgb2hsl = (...args) => {\n    args = unpack(args, 'rgb');\n    let [r, g, b] = args;\n    const min_ = min(r, g, b);\n    const max_ = max(r, g, b);\n    const delta = max_ - min_;\n    let h, s, v;\n    v = max_ / 255.0;\n    if (max_ === 0) {\n        h = Number.NaN;\n        s = 0;\n    } else {\n        s = delta / max_;\n        if (r === max_) h = (g - b) / delta;\n        if (g === max_) h = 2 + (b - r) / delta;\n        if (b === max_) h = 4 + (r - g) / delta;\n        h *= 60;\n        if (h < 0) h += 360;\n    }\n    return [h, s, v];\n};\n\nexport default rgb2hsl;\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport hsv2rgb from './hsv2rgb.js';\nimport rgb2hsv from './rgb2hsv.js';\n\nColor.prototype.hsv = function () {\n    return rgb2hsv(this._rgb);\n};\n\nchroma.hsv = (...args) => new Color(...args, 'hsv');\n\ninput.format.hsv = hsv2rgb;\n\ninput.autodetect.push({\n    p: 2,\n    test: (...args) => {\n        args = unpack(args, 'hsv');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'hsv';\n        }\n    }\n});\n","export default {\n    // Corresponds roughly to RGB brighter/darker\n    Kn: 18,\n\n    // D65 standard referent\n    Xn: 0.95047,\n    Yn: 1,\n    Zn: 1.08883,\n\n    t0: 0.137931034, // 4 / 29\n    t1: 0.206896552, // 6 / 29\n    t2: 0.12841855, // 3 * t1 * t1\n    t3: 0.008856452 // t1 * t1 * t1\n};\n","import LAB_CONSTANTS from './lab-constants.js';\nimport { unpack } from '../../utils/index.js';\nconst { pow } = Math;\n\n/*\n * L* [0..100]\n * a [-100..100]\n * b [-100..100]\n */\nconst lab2rgb = (...args) => {\n    args = unpack(args, 'lab');\n    const [l, a, b] = args;\n    let x, y, z, r, g, b_;\n\n    y = (l + 16) / 116;\n    x = isNaN(a) ? y : y + a / 500;\n    z = isNaN(b) ? y : y - b / 200;\n\n    y = LAB_CONSTANTS.Yn * lab_xyz(y);\n    x = LAB_CONSTANTS.Xn * lab_xyz(x);\n    z = LAB_CONSTANTS.Zn * lab_xyz(z);\n\n    r = xyz_rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z); // D65 -> sRGB\n    g = xyz_rgb(-0.969266 * x + 1.8760108 * y + 0.041556 * z);\n    b_ = xyz_rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z);\n\n    return [r, g, b_, args.length > 3 ? args[3] : 1];\n};\n\nconst xyz_rgb = (r) => {\n    return 255 * (r <= 0.00304 ? 12.92 * r : 1.055 * pow(r, 1 / 2.4) - 0.055);\n};\n\nconst lab_xyz = (t) => {\n    return t > LAB_CONSTANTS.t1\n        ? t * t * t\n        : LAB_CONSTANTS.t2 * (t - LAB_CONSTANTS.t0);\n};\n\nexport default lab2rgb;\n","import LAB_CONSTANTS from './lab-constants.js';\nimport { unpack } from '../../utils/index.js';\nconst { pow } = Math;\n\nconst rgb2lab = (...args) => {\n    const [r, g, b] = unpack(args, 'rgb');\n    const [x, y, z] = rgb2xyz(r, g, b);\n    const l = 116 * y - 16;\n    return [l < 0 ? 0 : l, 500 * (x - y), 200 * (y - z)];\n};\n\nconst rgb_xyz = (r) => {\n    if ((r /= 255) <= 0.04045) return r / 12.92;\n    return pow((r + 0.055) / 1.055, 2.4);\n};\n\nconst xyz_lab = (t) => {\n    if (t > LAB_CONSTANTS.t3) return pow(t, 1 / 3);\n    return t / LAB_CONSTANTS.t2 + LAB_CONSTANTS.t0;\n};\n\nconst rgb2xyz = (r, g, b) => {\n    r = rgb_xyz(r);\n    g = rgb_xyz(g);\n    b = rgb_xyz(b);\n    const x = xyz_lab(\n        (0.4124564 * r + 0.3575761 * g + 0.1804375 * b) / LAB_CONSTANTS.Xn\n    );\n    const y = xyz_lab(\n        (0.2126729 * r + 0.7151522 * g + 0.072175 * b) / LAB_CONSTANTS.Yn\n    );\n    const z = xyz_lab(\n        (0.0193339 * r + 0.119192 * g + 0.9503041 * b) / LAB_CONSTANTS.Zn\n    );\n    return [x, y, z];\n};\n\nexport default rgb2lab;\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport lab2rgb from './lab2rgb.js';\nimport rgb2lab from './rgb2lab.js';\n\nColor.prototype.lab = function () {\n    return rgb2lab(this._rgb);\n};\n\nchroma.lab = (...args) => new Color(...args, 'lab');\n\ninput.format.lab = lab2rgb;\n\ninput.autodetect.push({\n    p: 2,\n    test: (...args) => {\n        args = unpack(args, 'lab');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'lab';\n        }\n    }\n});\n","import { unpack, DEG2RAD } from '../../utils/index.js';\nconst { sin, cos } = Math;\n\nconst lch2lab = (...args) => {\n    /*\n    Convert from a qualitative parameter h and a quantitative parameter l to a 24-bit pixel.\n    These formulas were invented by David Dalrymple to obtain maximum contrast without going\n    out of gamut if the parameters are in the range 0-1.\n\n    A saturation multiplier was added by Gregor Aisch\n    */\n    let [l, c, h] = unpack(args, 'lch');\n    if (isNaN(h)) h = 0;\n    h = h * DEG2RAD;\n    return [l, cos(h) * c, sin(h) * c];\n};\n\nexport default lch2lab;\n","import { unpack } from '../../utils/index.js';\nimport lch2lab from './lch2lab.js';\nimport lab2rgb from '../lab/lab2rgb.js';\n\nconst lch2rgb = (...args) => {\n    args = unpack(args, 'lch');\n    const [l, c, h] = args;\n    const [L, a, b_] = lch2lab(l, c, h);\n    const [r, g, b] = lab2rgb(L, a, b_);\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n};\n\nexport default lch2rgb;\n","import { unpack } from '../../utils/index.js';\nimport lch2rgb from './lch2rgb.js';\n\nconst hcl2rgb = (...args) => {\n    const hcl = unpack(args, 'hcl').reverse();\n    return lch2rgb(...hcl);\n};\n\nexport default hcl2rgb;\n","import { unpack, RAD2DEG } from '../../utils/index.js';\nconst { sqrt, atan2, round } = Math;\n\nconst lab2lch = (...args) => {\n    const [l, a, b] = unpack(args, 'lab');\n    const c = sqrt(a * a + b * b);\n    let h = (atan2(b, a) * RAD2DEG + 360) % 360;\n    if (round(c * 10000) === 0) h = Number.NaN;\n    return [l, c, h];\n};\n\nexport default lab2lch;\n","import { unpack } from '../../utils/index.js';\nimport rgb2lab from '../lab/rgb2lab.js';\nimport lab2lch from './lab2lch.js';\n\nconst rgb2lch = (...args) => {\n    const [r, g, b] = unpack(args, 'rgb');\n    const [l, a, b_] = rgb2lab(r, g, b);\n    return lab2lch(l, a, b_);\n};\n\nexport default rgb2lch;\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport lch2rgb from './lch2rgb.js';\nimport hcl2rgb from './hcl2rgb.js';\nimport rgb2lch from './rgb2lch.js';\n\nColor.prototype.lch = function () {\n    return rgb2lch(this._rgb);\n};\nColor.prototype.hcl = function () {\n    return rgb2lch(this._rgb).reverse();\n};\n\nchroma.lch = (...args) => new Color(...args, 'lch');\nchroma.hcl = (...args) => new Color(...args, 'hcl');\n\ninput.format.lch = lch2rgb;\ninput.format.hcl = hcl2rgb;\n['lch', 'hcl'].forEach((m) =>\n    input.autodetect.push({\n        p: 2,\n        test: (...args) => {\n            args = unpack(args, m);\n            if (type(args) === 'array' && args.length === 3) {\n                return m;\n            }\n        }\n    })\n);\n","/**\n\tX11 color names\n\n\thttp://www.w3.org/TR/css3-color/#svg-color\n*/\n\nconst w3cx11 = {\n    aliceblue: '#f0f8ff',\n    antiquewhite: '#faebd7',\n    aqua: '#00ffff',\n    aquamarine: '#7fffd4',\n    azure: '#f0ffff',\n    beige: '#f5f5dc',\n    bisque: '#ffe4c4',\n    black: '#000000',\n    blanchedalmond: '#ffebcd',\n    blue: '#0000ff',\n    blueviolet: '#8a2be2',\n    brown: '#a52a2a',\n    burlywood: '#deb887',\n    cadetblue: '#5f9ea0',\n    chartreuse: '#7fff00',\n    chocolate: '#d2691e',\n    coral: '#ff7f50',\n    cornflowerblue: '#6495ed',\n    cornsilk: '#fff8dc',\n    crimson: '#dc143c',\n    cyan: '#00ffff',\n    darkblue: '#00008b',\n    darkcyan: '#008b8b',\n    darkgoldenrod: '#b8860b',\n    darkgray: '#a9a9a9',\n    darkgreen: '#006400',\n    darkgrey: '#a9a9a9',\n    darkkhaki: '#bdb76b',\n    darkmagenta: '#8b008b',\n    darkolivegreen: '#556b2f',\n    darkorange: '#ff8c00',\n    darkorchid: '#9932cc',\n    darkred: '#8b0000',\n    darksalmon: '#e9967a',\n    darkseagreen: '#8fbc8f',\n    darkslateblue: '#483d8b',\n    darkslategray: '#2f4f4f',\n    darkslategrey: '#2f4f4f',\n    darkturquoise: '#00ced1',\n    darkviolet: '#9400d3',\n    deeppink: '#ff1493',\n    deepskyblue: '#00bfff',\n    dimgray: '#696969',\n    dimgrey: '#696969',\n    dodgerblue: '#1e90ff',\n    firebrick: '#b22222',\n    floralwhite: '#fffaf0',\n    forestgreen: '#228b22',\n    fuchsia: '#ff00ff',\n    gainsboro: '#dcdcdc',\n    ghostwhite: '#f8f8ff',\n    gold: '#ffd700',\n    goldenrod: '#daa520',\n    gray: '#808080',\n    green: '#008000',\n    greenyellow: '#adff2f',\n    grey: '#808080',\n    honeydew: '#f0fff0',\n    hotpink: '#ff69b4',\n    indianred: '#cd5c5c',\n    indigo: '#4b0082',\n    ivory: '#fffff0',\n    khaki: '#f0e68c',\n    laserlemon: '#ffff54',\n    lavender: '#e6e6fa',\n    lavenderblush: '#fff0f5',\n    lawngreen: '#7cfc00',\n    lemonchiffon: '#fffacd',\n    lightblue: '#add8e6',\n    lightcoral: '#f08080',\n    lightcyan: '#e0ffff',\n    lightgoldenrod: '#fafad2',\n    lightgoldenrodyellow: '#fafad2',\n    lightgray: '#d3d3d3',\n    lightgreen: '#90ee90',\n    lightgrey: '#d3d3d3',\n    lightpink: '#ffb6c1',\n    lightsalmon: '#ffa07a',\n    lightseagreen: '#20b2aa',\n    lightskyblue: '#87cefa',\n    lightslategray: '#778899',\n    lightslategrey: '#778899',\n    lightsteelblue: '#b0c4de',\n    lightyellow: '#ffffe0',\n    lime: '#00ff00',\n    limegreen: '#32cd32',\n    linen: '#faf0e6',\n    magenta: '#ff00ff',\n    maroon: '#800000',\n    maroon2: '#7f0000',\n    maroon3: '#b03060',\n    mediumaquamarine: '#66cdaa',\n    mediumblue: '#0000cd',\n    mediumorchid: '#ba55d3',\n    mediumpurple: '#9370db',\n    mediumseagreen: '#3cb371',\n    mediumslateblue: '#7b68ee',\n    mediumspringgreen: '#00fa9a',\n    mediumturquoise: '#48d1cc',\n    mediumvioletred: '#c71585',\n    midnightblue: '#191970',\n    mintcream: '#f5fffa',\n    mistyrose: '#ffe4e1',\n    moccasin: '#ffe4b5',\n    navajowhite: '#ffdead',\n    navy: '#000080',\n    oldlace: '#fdf5e6',\n    olive: '#808000',\n    olivedrab: '#6b8e23',\n    orange: '#ffa500',\n    orangered: '#ff4500',\n    orchid: '#da70d6',\n    palegoldenrod: '#eee8aa',\n    palegreen: '#98fb98',\n    paleturquoise: '#afeeee',\n    palevioletred: '#db7093',\n    papayawhip: '#ffefd5',\n    peachpuff: '#ffdab9',\n    peru: '#cd853f',\n    pink: '#ffc0cb',\n    plum: '#dda0dd',\n    powderblue: '#b0e0e6',\n    purple: '#800080',\n    purple2: '#7f007f',\n    purple3: '#a020f0',\n    rebeccapurple: '#663399',\n    red: '#ff0000',\n    rosybrown: '#bc8f8f',\n    royalblue: '#4169e1',\n    saddlebrown: '#8b4513',\n    salmon: '#fa8072',\n    sandybrown: '#f4a460',\n    seagreen: '#2e8b57',\n    seashell: '#fff5ee',\n    sienna: '#a0522d',\n    silver: '#c0c0c0',\n    skyblue: '#87ceeb',\n    slateblue: '#6a5acd',\n    slategray: '#708090',\n    slategrey: '#708090',\n    snow: '#fffafa',\n    springgreen: '#00ff7f',\n    steelblue: '#4682b4',\n    tan: '#d2b48c',\n    teal: '#008080',\n    thistle: '#d8bfd8',\n    tomato: '#ff6347',\n    turquoise: '#40e0d0',\n    violet: '#ee82ee',\n    wheat: '#f5deb3',\n    white: '#ffffff',\n    whitesmoke: '#f5f5f5',\n    yellow: '#ffff00',\n    yellowgreen: '#9acd32'\n};\n\nexport default w3cx11;\n","import Color from '../../Color.js';\nimport input from '../input.js';\nimport { type } from '../../utils/index.js';\n\nimport w3cx11 from '../../colors/w3cx11.js';\nimport hex2rgb from '../hex/hex2rgb.js';\nimport rgb2hex from '../hex/rgb2hex.js';\n\nColor.prototype.name = function () {\n    const hex = rgb2hex(this._rgb, 'rgb');\n    for (let n of Object.keys(w3cx11)) {\n        if (w3cx11[n] === hex) return n.toLowerCase();\n    }\n    return hex;\n};\n\ninput.format.named = (name) => {\n    name = name.toLowerCase();\n    if (w3cx11[name]) return hex2rgb(w3cx11[name]);\n    throw new Error('unknown color name: ' + name);\n};\n\ninput.autodetect.push({\n    p: 5,\n    test: (h, ...rest) => {\n        if (!rest.length && type(h) === 'string' && w3cx11[h.toLowerCase()]) {\n            return 'named';\n        }\n    }\n});\n","import { type } from '../../utils/index.js';\n\nconst num2rgb = (num) => {\n    if (type(num) == 'number' && num >= 0 && num <= 0xffffff) {\n        const r = num >> 16;\n        const g = (num >> 8) & 0xff;\n        const b = num & 0xff;\n        return [r, g, b, 1];\n    }\n    throw new Error('unknown num color: ' + num);\n};\n\nexport default num2rgb;\n","import { unpack } from '../../utils/index.js';\n\nconst rgb2num = (...args) => {\n    const [r, g, b] = unpack(args, 'rgb');\n    return (r << 16) + (g << 8) + b;\n};\n\nexport default rgb2num;\n","import chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport { type } from '../../utils/index.js';\nimport num2rgb from './num2rgb.js';\nimport rgb2num from './rgb2num.js';\n\nColor.prototype.num = function () {\n    return rgb2num(this._rgb);\n};\n\nchroma.num = (...args) => new Color(...args, 'num');\n\ninput.format.num = num2rgb;\n\ninput.autodetect.push({\n    p: 5,\n    test: (...args) => {\n        if (\n            args.length === 1 &&\n            type(args[0]) === 'number' &&\n            args[0] >= 0 &&\n            args[0] <= 0xffffff\n        ) {\n            return 'num';\n        }\n    }\n});\n","import chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport { unpack, type } from '../../utils/index.js';\nconst { round } = Math;\n\nColor.prototype.rgb = function (rnd = true) {\n    if (rnd === false) return this._rgb.slice(0, 3);\n    return this._rgb.slice(0, 3).map(round);\n};\n\nColor.prototype.rgba = function (rnd = true) {\n    return this._rgb.slice(0, 4).map((v, i) => {\n        return i < 3 ? (rnd === false ? v : round(v)) : v;\n    });\n};\n\nchroma.rgb = (...args) => new Color(...args, 'rgb');\n\ninput.format.rgb = (...args) => {\n    const rgba = unpack(args, 'rgba');\n    if (rgba[3] === undefined) rgba[3] = 1;\n    return rgba;\n};\n\ninput.autodetect.push({\n    p: 3,\n    test: (...args) => {\n        args = unpack(args, 'rgba');\n        if (\n            type(args) === 'array' &&\n            (args.length === 3 ||\n                (args.length === 4 &&\n                    type(args[3]) == 'number' &&\n                    args[3] >= 0 &&\n                    args[3] <= 1))\n        ) {\n            return 'rgb';\n        }\n    }\n});\n","/*\n * Based on implementation by Neil Bartlett\n * https://github.com/neilbartlett/color-temperature\n */\n\nconst { log } = Math;\n\nconst temperature2rgb = (kelvin) => {\n    const temp = kelvin / 100;\n    let r, g, b;\n    if (temp < 66) {\n        r = 255;\n        g =\n            temp < 6\n                ? 0\n                : -155.25485562709179 -\n                  0.44596950469579133 * (g = temp - 2) +\n                  104.49216199393888 * log(g);\n        b =\n            temp < 20\n                ? 0\n                : -254.76935184120902 +\n                  0.8274096064007395 * (b = temp - 10) +\n                  115.67994401066147 * log(b);\n    } else {\n        r =\n            351.97690566805693 +\n            0.114206453784165 * (r = temp - 55) -\n            40.25366309332127 * log(r);\n        g =\n            325.4494125711974 +\n            0.07943456536662342 * (g = temp - 50) -\n            28.0852963507957 * log(g);\n        b = 255;\n    }\n    return [r, g, b, 1];\n};\n\nexport default temperature2rgb;\n","/*\n * Based on implementation by Neil Bartlett\n * https://github.com/neilbartlett/color-temperature\n **/\n\nimport temperature2rgb from './temperature2rgb.js';\nimport { unpack } from '../../utils/index.js';\nconst { round } = Math;\n\nconst rgb2temperature = (...args) => {\n    const rgb = unpack(args, 'rgb');\n    const r = rgb[0],\n        b = rgb[2];\n    let minTemp = 1000;\n    let maxTemp = 40000;\n    const eps = 0.4;\n    let temp;\n    while (maxTemp - minTemp > eps) {\n        temp = (maxTemp + minTemp) * 0.5;\n        const rgb = temperature2rgb(temp);\n        if (rgb[2] / rgb[0] >= b / r) {\n            maxTemp = temp;\n        } else {\n            minTemp = temp;\n        }\n    }\n    return round(temp);\n};\n\nexport default rgb2temperature;\n","import chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport temperature2rgb from './temperature2rgb.js';\nimport rgb2temperature from './rgb2temperature.js';\n\nColor.prototype.temp =\n    Color.prototype.kelvin =\n    Color.prototype.temperature =\n        function () {\n            return rgb2temperature(this._rgb);\n        };\n\nchroma.temp =\n    chroma.kelvin =\n    chroma.temperature =\n        (...args) => new Color(...args, 'temp');\n\ninput.format.temp =\n    input.format.kelvin =\n    input.format.temperature =\n        temperature2rgb;\n","import { unpack } from '../../utils/index.js';\nconst { pow, sign } = Math;\n\n/*\n * L* [0..100]\n * a [-100..100]\n * b [-100..100]\n */\nconst oklab2rgb = (...args) => {\n    args = unpack(args, 'lab');\n    const [L, a, b] = args;\n\n    const l = pow(L + 0.3963377774 * a + 0.2158037573 * b, 3);\n    const m = pow(L - 0.1055613458 * a - 0.0638541728 * b, 3);\n    const s = pow(L - 0.0894841775 * a - 1.291485548 * b, 3);\n\n    return [\n        255 * lrgb2rgb(+4.0767416621 * l - 3.3077115913 * m + 0.2309699292 * s),\n        255 * lrgb2rgb(-1.2684380046 * l + 2.6097574011 * m - 0.3413193965 * s),\n        255 * lrgb2rgb(-0.0041960863 * l - 0.7034186147 * m + 1.707614701 * s),\n        args.length > 3 ? args[3] : 1\n    ];\n};\n\nexport default oklab2rgb;\n\nfunction lrgb2rgb(c) {\n    const abs = Math.abs(c);\n    if (abs > 0.0031308) {\n        return (sign(c) || 1) * (1.055 * pow(abs, 1 / 2.4) - 0.055);\n    }\n    return c * 12.92;\n}\n","import { unpack } from '../../utils/index.js';\nconst { cbrt, pow, sign } = Math;\n\nconst rgb2oklab = (...args) => {\n    // OKLab color space implementation taken from\n    // https://bottosson.github.io/posts/oklab/\n    const [r, g, b] = unpack(args, 'rgb');\n    const [lr, lg, lb] = [\n        rgb2lrgb(r / 255),\n        rgb2lrgb(g / 255),\n        rgb2lrgb(b / 255)\n    ];\n    const l = cbrt(0.4122214708 * lr + 0.5363325363 * lg + 0.0514459929 * lb);\n    const m = cbrt(0.2119034982 * lr + 0.6806995451 * lg + 0.1073969566 * lb);\n    const s = cbrt(0.0883024619 * lr + 0.2817188376 * lg + 0.6299787005 * lb);\n\n    return [\n        0.2104542553 * l + 0.793617785 * m - 0.0040720468 * s,\n        1.9779984951 * l - 2.428592205 * m + 0.4505937099 * s,\n        0.0259040371 * l + 0.7827717662 * m - 0.808675766 * s\n    ];\n};\n\nexport default rgb2oklab;\n\nfunction rgb2lrgb(c) {\n    const abs = Math.abs(c);\n    if (abs < 0.04045) {\n        return c / 12.92;\n    }\n    return (sign(c) || 1) * pow((abs + 0.055) / 1.055, 2.4);\n}\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport oklab2rgb from './oklab2rgb.js';\nimport rgb2oklab from './rgb2oklab.js';\n\nColor.prototype.oklab = function () {\n    return rgb2oklab(this._rgb);\n};\n\nchroma.oklab = (...args) => new Color(...args, 'oklab');\n\ninput.format.oklab = oklab2rgb;\n\ninput.autodetect.push({\n    p: 3,\n    test: (...args) => {\n        args = unpack(args, 'oklab');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'oklab';\n        }\n    }\n});\n","import { unpack } from '../../utils/index.js';\nimport lch2lab from '../lch/lch2lab.js';\nimport oklab2rgb from '../oklab/oklab2rgb.js';\n\nconst oklch2rgb = (...args) => {\n    args = unpack(args, 'lch');\n    const [l, c, h] = args;\n    const [L, a, b_] = lch2lab(l, c, h);\n    const [r, g, b] = oklab2rgb(L, a, b_);\n    return [r, g, b, args.length > 3 ? args[3] : 1];\n};\n\nexport default oklch2rgb;\n","import { unpack } from '../../utils/index.js';\nimport rgb2oklab from '../oklab/rgb2oklab.js';\nimport lab2lch from '../lch/lab2lch.js';\n\nconst rgb2oklch = (...args) => {\n    const [r, g, b] = unpack(args, 'rgb');\n    const [l, a, b_] = rgb2oklab(r, g, b);\n    return lab2lch(l, a, b_);\n};\n\nexport default rgb2oklch;\n","import { unpack, type } from '../../utils/index.js';\nimport chroma from '../../chroma.js';\nimport Color from '../../Color.js';\nimport input from '../input.js';\nimport oklch2rgb from './oklch2rgb.js';\nimport rgb2oklch from './rgb2oklch.js';\n\nColor.prototype.oklch = function () {\n    return rgb2oklch(this._rgb);\n};\n\nchroma.oklch = (...args) => new Color(...args, 'oklch');\n\ninput.format.oklch = oklch2rgb;\n\ninput.autodetect.push({\n    p: 3,\n    test: (...args) => {\n        args = unpack(args, 'oklch');\n        if (type(args) === 'array' && args.length === 3) {\n            return 'oklch';\n        }\n    }\n});\n","import Color from '../Color.js';\nimport { type } from '../utils/index.js';\n\nColor.prototype.alpha = function (a, mutate = false) {\n    if (a !== undefined && type(a) === 'number') {\n        if (mutate) {\n            this._rgb[3] = a;\n            return this;\n        }\n        return new Color([this._rgb[0], this._rgb[1], this._rgb[2], a], 'rgb');\n    }\n    return this._rgb[3];\n};\n","import Color from '../Color.js';\n\nColor.prototype.clipped = function () {\n    return this._rgb._clipped || false;\n};\n","import '../io/lab/index.js';\nimport Color from '../Color.js';\nimport LAB_CONSTANTS from '../io/lab/lab-constants.js';\n\nColor.prototype.darken = function (amount = 1) {\n    const me = this;\n    const lab = me.lab();\n    lab[0] -= LAB_CONSTANTS.Kn * amount;\n    return new Color(lab, 'lab').alpha(me.alpha(), true);\n};\n\nColor.prototype.brighten = function (amount = 1) {\n    return this.darken(-amount);\n};\n\nColor.prototype.darker = Color.prototype.darken;\nColor.prototype.brighter = Color.prototype.brighten;\n","import Color from '../Color.js';\n\nColor.prototype.get = function (mc) {\n    const [mode, channel] = mc.split('.');\n    const src = this[mode]();\n    if (channel) {\n        const i = mode.indexOf(channel) - (mode.substr(0, 2) === 'ok' ? 2 : 0);\n        if (i > -1) return src[i];\n        throw new Error(`unknown channel ${channel} in mode ${mode}`);\n    } else {\n        return src;\n    }\n};\n","import Color from '../Color.js';\nimport { type } from '../utils/index.js';\nconst { pow } = Math;\n\nconst EPS = 1e-7;\nconst MAX_ITER = 20;\n\nColor.prototype.luminance = function (lum, mode = 'rgb') {\n    if (lum !== undefined && type(lum) === 'number') {\n        if (lum === 0) {\n            // return pure black\n            return new Color([0, 0, 0, this._rgb[3]], 'rgb');\n        }\n        if (lum === 1) {\n            // return pure white\n            return new Color([255, 255, 255, this._rgb[3]], 'rgb');\n        }\n        // compute new color using...\n        let cur_lum = this.luminance();\n        let max_iter = MAX_ITER;\n\n        const test = (low, high) => {\n            const mid = low.interpolate(high, 0.5, mode);\n            const lm = mid.luminance();\n            if (Math.abs(lum - lm) < EPS || !max_iter--) {\n                // close enough\n                return mid;\n            }\n            return lm > lum ? test(low, mid) : test(mid, high);\n        };\n\n        const rgb = (\n            cur_lum > lum\n                ? test(new Color([0, 0, 0]), this)\n                : test(this, new Color([255, 255, 255]))\n        ).rgb();\n        return new Color([...rgb, this._rgb[3]]);\n    }\n    return rgb2luminance(...this._rgb.slice(0, 3));\n};\n\nconst rgb2luminance = (r, g, b) => {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    r = luminance_x(r);\n    g = luminance_x(g);\n    b = luminance_x(b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n};\n\nconst luminance_x = (x) => {\n    x /= 255;\n    return x <= 0.03928 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n};\n","export default {};\n","import Color from '../Color.js';\nimport { type } from '../utils/index.js';\nimport interpolator from '../interpolator/index.js';\n\nexport default (col1, col2, f = 0.5, ...rest) => {\n    let mode = rest[0] || 'lrgb';\n    if (!interpolator[mode] && !rest.length) {\n        // fall back to the first supported mode\n        mode = Object.keys(interpolator)[0];\n    }\n    if (!interpolator[mode]) {\n        throw new Error(`interpolation mode ${mode} is not defined`);\n    }\n    if (type(col1) !== 'object') col1 = new Color(col1);\n    if (type(col2) !== 'object') col2 = new Color(col2);\n    return interpolator[mode](col1, col2, f).alpha(\n        col1.alpha() + f * (col2.alpha() - col1.alpha())\n    );\n};\n","import Color from '../Color.js';\nimport mix from '../generator/mix.js';\n\nColor.prototype.mix = Color.prototype.interpolate = function (\n    col2,\n    f = 0.5,\n    ...rest\n) {\n    return mix(this, col2, f, ...rest);\n};\n","import Color from '../Color.js';\n\nColor.prototype.premultiply = function (mutate = false) {\n    const rgb = this._rgb;\n    const a = rgb[3];\n    if (mutate) {\n        this._rgb = [rgb[0] * a, rgb[1] * a, rgb[2] * a, a];\n        return this;\n    } else {\n        return new Color([rgb[0] * a, rgb[1] * a, rgb[2] * a, a], 'rgb');\n    }\n};\n","import '../io/lch/index.js';\nimport Color from '../Color.js';\nimport LAB_CONSTANTS from '../io/lab/lab-constants.js';\n\nColor.prototype.saturate = function (amount = 1) {\n    const me = this;\n    const lch = me.lch();\n    lch[1] += LAB_CONSTANTS.Kn * amount;\n    if (lch[1] < 0) lch[1] = 0;\n    return new Color(lch, 'lch').alpha(me.alpha(), true);\n};\n\nColor.prototype.desaturate = function (amount = 1) {\n    return this.saturate(-amount);\n};\n","import Color from '../Color.js';\nimport { type } from '../utils/index.js';\n\nColor.prototype.set = function (mc, value, mutate = false) {\n    const [mode, channel] = mc.split('.');\n    const src = this[mode]();\n    if (channel) {\n        const i = mode.indexOf(channel) - (mode.substr(0, 2) === 'ok' ? 2 : 0);\n        if (i > -1) {\n            if (type(value) == 'string') {\n                switch (value.charAt(0)) {\n                    case '+':\n                        src[i] += +value;\n                        break;\n                    case '-':\n                        src[i] += +value;\n                        break;\n                    case '*':\n                        src[i] *= +value.substr(1);\n                        break;\n                    case '/':\n                        src[i] /= +value.substr(1);\n                        break;\n                    default:\n                        src[i] = +value;\n                }\n            } else if (type(value) === 'number') {\n                src[i] = value;\n            } else {\n                throw new Error(`unsupported value for Color.set`);\n            }\n            const out = new Color(src, mode);\n            if (mutate) {\n                this._rgb = out._rgb;\n                return this;\n            }\n            return out;\n        }\n        throw new Error(`unknown channel ${channel} in mode ${mode}`);\n    } else {\n        return src;\n    }\n};\n","import '../io/lab/index.js';\nimport Color from '../Color.js';\nimport mix from '../generator/mix.js';\n\nColor.prototype.tint = function (f = 0.5, ...rest) {\n    return mix(this, 'white', f, ...rest);\n};\n\nColor.prototype.shade = function (f = 0.5, ...rest) {\n    return mix(this, 'black', f, ...rest);\n};\n","import Color from '../Color.js';\nimport index from './index.js';\n\nconst rgb = (col1, col2, f) => {\n    const xyz0 = col1._rgb;\n    const xyz1 = col2._rgb;\n    return new Color(\n        xyz0[0] + f * (xyz1[0] - xyz0[0]),\n        xyz0[1] + f * (xyz1[1] - xyz0[1]),\n        xyz0[2] + f * (xyz1[2] - xyz0[2]),\n        'rgb'\n    );\n};\n\n// register interpolator\nindex.rgb = rgb;\n\nexport default rgb;\n","import Color from '../Color.js';\nconst { sqrt, pow } = Math;\nimport index from './index.js';\n\nconst lrgb = (col1, col2, f) => {\n    const [x1, y1, z1] = col1._rgb;\n    const [x2, y2, z2] = col2._rgb;\n    return new Color(\n        sqrt(pow(x1, 2) * (1 - f) + pow(x2, 2) * f),\n        sqrt(pow(y1, 2) * (1 - f) + pow(y2, 2) * f),\n        sqrt(pow(z1, 2) * (1 - f) + pow(z2, 2) * f),\n        'rgb'\n    );\n};\n\n// register interpolator\nindex.lrgb = lrgb;\n\nexport default lrgb;\n","import '../io/lab/index.js';\nimport index from './index.js';\nimport Color from '../Color.js';\n\nconst lab = (col1, col2, f) => {\n    const xyz0 = col1.lab();\n    const xyz1 = col2.lab();\n    return new Color(\n        xyz0[0] + f * (xyz1[0] - xyz0[0]),\n        xyz0[1] + f * (xyz1[1] - xyz0[1]),\n        xyz0[2] + f * (xyz1[2] - xyz0[2]),\n        'lab'\n    );\n};\n\n// register interpolator\nindex.lab = lab;\n\nexport default lab;\n","import Color from '../Color.js';\n\nexport default (col1, col2, f, m) => {\n    let xyz0, xyz1;\n    if (m === 'hsl') {\n        xyz0 = col1.hsl();\n        xyz1 = col2.hsl();\n    } else if (m === 'hsv') {\n        xyz0 = col1.hsv();\n        xyz1 = col2.hsv();\n    } else if (m === 'hcg') {\n        xyz0 = col1.hcg();\n        xyz1 = col2.hcg();\n    } else if (m === 'hsi') {\n        xyz0 = col1.hsi();\n        xyz1 = col2.hsi();\n    } else if (m === 'lch' || m === 'hcl') {\n        m = 'hcl';\n        xyz0 = col1.hcl();\n        xyz1 = col2.hcl();\n    } else if (m === 'oklch') {\n        xyz0 = col1.oklch().reverse();\n        xyz1 = col2.oklch().reverse();\n    }\n\n    let hue0, hue1, sat0, sat1, lbv0, lbv1;\n    if (m.substr(0, 1) === 'h' || m === 'oklch') {\n        [hue0, sat0, lbv0] = xyz0;\n        [hue1, sat1, lbv1] = xyz1;\n    }\n\n    let sat, hue, lbv, dh;\n\n    if (!isNaN(hue0) && !isNaN(hue1)) {\n        // both colors have hue\n        if (hue1 > hue0 && hue1 - hue0 > 180) {\n            dh = hue1 - (hue0 + 360);\n        } else if (hue1 < hue0 && hue0 - hue1 > 180) {\n            dh = hue1 + 360 - hue0;\n        } else {\n            dh = hue1 - hue0;\n        }\n        hue = hue0 + f * dh;\n    } else if (!isNaN(hue0)) {\n        hue = hue0;\n        if ((lbv1 == 1 || lbv1 == 0) && m != 'hsv') sat = sat0;\n    } else if (!isNaN(hue1)) {\n        hue = hue1;\n        if ((lbv0 == 1 || lbv0 == 0) && m != 'hsv') sat = sat1;\n    } else {\n        hue = Number.NaN;\n    }\n\n    if (sat === undefined) sat = sat0 + f * (sat1 - sat0);\n    lbv = lbv0 + f * (lbv1 - lbv0);\n    return m === 'oklch'\n        ? new Color([lbv, sat, hue], m)\n        : new Color([hue, sat, lbv], m);\n};\n","import '../io/lch/index.js';\nimport interpolate_hsx from './_hsx.js';\nimport index from './index.js';\n\nconst lch = (col1, col2, f) => {\n    return interpolate_hsx(col1, col2, f, 'lch');\n};\n\n// register interpolator\nindex.lch = lch;\nindex.hcl = lch;\n\nexport default lch;\n","import '../io/num/index.js';\nimport index from './index.js';\n\nimport Color from '../Color.js';\n\nconst num = (col1, col2, f) => {\n    const c1 = col1.num();\n    const c2 = col2.num();\n    return new Color(c1 + f * (c2 - c1), 'num');\n};\n\n// register interpolator\nindex.num = num;\n\nexport default num;\n","import '../io/hcg/index.js';\nimport interpolate_hsx from './_hsx.js';\nimport index from './index.js';\n\nconst hcg = (col1, col2, f) => {\n    return interpolate_hsx(col1, col2, f, 'hcg');\n};\n\n// register interpolator\nindex.hcg = hcg;\n\nexport default hcg;\n","import '../io/hsi/index.js';\nimport interpolate_hsx from './_hsx.js';\nimport index from './index.js';\n\nconst hsi = (col1, col2, f) => {\n    return interpolate_hsx(col1, col2, f, 'hsi');\n};\n\n// register interpolator\nindex.hsi = hsi;\n\nexport default hsi;\n","import '../io/hsl/index.js';\nimport interpolate_hsx from './_hsx.js';\nimport index from './index.js';\n\nconst hsl = (col1, col2, f) => {\n    return interpolate_hsx(col1, col2, f, 'hsl');\n};\n\n// register interpolator\nindex.hsl = hsl;\n\nexport default hsl;\n","import '../io/hsv/index.js';\nimport interpolate_hsx from './_hsx.js';\nimport index from './index.js';\n\nconst hsv = (col1, col2, f) => {\n    return interpolate_hsx(col1, col2, f, 'hsv');\n};\n\n// register interpolator\nindex.hsv = hsv;\n\nexport default hsv;\n","import '../io/oklab/index.js';\nimport index from './index.js';\nimport Color from '../Color.js';\n\nconst oklab = (col1, col2, f) => {\n    const xyz0 = col1.oklab();\n    const xyz1 = col2.oklab();\n    return new Color(\n        xyz0[0] + f * (xyz1[0] - xyz0[0]),\n        xyz0[1] + f * (xyz1[1] - xyz0[1]),\n        xyz0[2] + f * (xyz1[2] - xyz0[2]),\n        'oklab'\n    );\n};\n\n// register interpolator\nindex.oklab = oklab;\n\nexport default oklab;\n","import '../io/lch/index.js';\nimport interpolate_hsx from './_hsx.js';\nimport index from './index.js';\n\nconst oklch = (col1, col2, f) => {\n    return interpolate_hsx(col1, col2, f, 'oklch');\n};\n\n// register interpolator\nindex.oklch = oklch;\n\nexport default oklch;\n","import Color from '../Color.js';\nimport { clip_rgb } from '../utils/index.js';\n\nconst { pow, sqrt, PI, cos, sin, atan2 } = Math;\n\nexport default (colors, mode = 'lrgb', weights = null) => {\n    const l = colors.length;\n    if (!weights) weights = Array.from(new Array(l)).map(() => 1);\n    // normalize weights\n    const k =\n        l /\n        weights.reduce(function (a, b) {\n            return a + b;\n        });\n    weights.forEach((w, i) => {\n        weights[i] *= k;\n    });\n    // convert colors to Color objects\n    colors = colors.map((c) => new Color(c));\n    if (mode === 'lrgb') {\n        return _average_lrgb(colors, weights);\n    }\n    const first = colors.shift();\n    const xyz = first.get(mode);\n    const cnt = [];\n    let dx = 0;\n    let dy = 0;\n    // initial color\n    for (let i = 0; i < xyz.length; i++) {\n        xyz[i] = (xyz[i] || 0) * weights[0];\n        cnt.push(isNaN(xyz[i]) ? 0 : weights[0]);\n        if (mode.charAt(i) === 'h' && !isNaN(xyz[i])) {\n            const A = (xyz[i] / 180) * PI;\n            dx += cos(A) * weights[0];\n            dy += sin(A) * weights[0];\n        }\n    }\n\n    let alpha = first.alpha() * weights[0];\n    colors.forEach((c, ci) => {\n        const xyz2 = c.get(mode);\n        alpha += c.alpha() * weights[ci + 1];\n        for (let i = 0; i < xyz.length; i++) {\n            if (!isNaN(xyz2[i])) {\n                cnt[i] += weights[ci + 1];\n                if (mode.charAt(i) === 'h') {\n                    const A = (xyz2[i] / 180) * PI;\n                    dx += cos(A) * weights[ci + 1];\n                    dy += sin(A) * weights[ci + 1];\n                } else {\n                    xyz[i] += xyz2[i] * weights[ci + 1];\n                }\n            }\n        }\n    });\n\n    for (let i = 0; i < xyz.length; i++) {\n        if (mode.charAt(i) === 'h') {\n            let A = (atan2(dy / cnt[i], dx / cnt[i]) / PI) * 180;\n            while (A < 0) A += 360;\n            while (A >= 360) A -= 360;\n            xyz[i] = A;\n        } else {\n            xyz[i] = xyz[i] / cnt[i];\n        }\n    }\n    alpha /= l;\n    return new Color(xyz, mode).alpha(alpha > 0.99999 ? 1 : alpha, true);\n};\n\nconst _average_lrgb = (colors, weights) => {\n    const l = colors.length;\n    const xyz = [0, 0, 0, 0];\n    for (let i = 0; i < colors.length; i++) {\n        const col = colors[i];\n        const f = weights[i] / l;\n        const rgb = col._rgb;\n        xyz[0] += pow(rgb[0], 2) * f;\n        xyz[1] += pow(rgb[1], 2) * f;\n        xyz[2] += pow(rgb[2], 2) * f;\n        xyz[3] += rgb[3] * f;\n    }\n    xyz[0] = sqrt(xyz[0]);\n    xyz[1] = sqrt(xyz[1]);\n    xyz[2] = sqrt(xyz[2]);\n    if (xyz[3] > 0.9999999) xyz[3] = 1;\n    return new Color(clip_rgb(xyz));\n};\n","// minimal multi-purpose interface\n\n// @requires utils color analyze\nimport chroma from '../chroma.js';\nimport { limit, type } from '../utils/index.js';\n\nconst { pow } = Math;\n\nexport default function (colors) {\n    // constructor\n    let _mode = 'rgb';\n    let _nacol = chroma('#ccc');\n    let _spread = 0;\n    // const _fixed = false;\n    let _domain = [0, 1];\n    let _pos = [];\n    let _padding = [0, 0];\n    let _classes = false;\n    let _colors = [];\n    let _out = false;\n    let _min = 0;\n    let _max = 1;\n    let _correctLightness = false;\n    let _colorCache = {};\n    let _useCache = true;\n    let _gamma = 1;\n\n    // private methods\n\n    const setColors = function (colors) {\n        colors = colors || ['#fff', '#000'];\n        if (\n            colors &&\n            type(colors) === 'string' &&\n            chroma.brewer &&\n            chroma.brewer[colors.toLowerCase()]\n        ) {\n            colors = chroma.brewer[colors.toLowerCase()];\n        }\n        if (type(colors) === 'array') {\n            // handle single color\n            if (colors.length === 1) {\n                colors = [colors[0], colors[0]];\n            }\n            // make a copy of the colors\n            colors = colors.slice(0);\n            // convert to chroma classes\n            for (let c = 0; c < colors.length; c++) {\n                colors[c] = chroma(colors[c]);\n            }\n            // auto-fill color position\n            _pos.length = 0;\n            for (let c = 0; c < colors.length; c++) {\n                _pos.push(c / (colors.length - 1));\n            }\n        }\n        resetCache();\n        return (_colors = colors);\n    };\n\n    const getClass = function (value) {\n        if (_classes != null) {\n            const n = _classes.length - 1;\n            let i = 0;\n            while (i < n && value >= _classes[i]) {\n                i++;\n            }\n            return i - 1;\n        }\n        return 0;\n    };\n\n    let tMapLightness = (t) => t;\n    let tMapDomain = (t) => t;\n\n    // const classifyValue = function(value) {\n    //     let val = value;\n    //     if (_classes.length > 2) {\n    //         const n = _classes.length-1;\n    //         const i = getClass(value);\n    //         const minc = _classes[0] + ((_classes[1]-_classes[0]) * (0 + (_spread * 0.5)));  // center of 1st class\n    //         const maxc = _classes[n-1] + ((_classes[n]-_classes[n-1]) * (1 - (_spread * 0.5)));  // center of last class\n    //         val = _min + ((((_classes[i] + ((_classes[i+1] - _classes[i]) * 0.5)) - minc) / (maxc-minc)) * (_max - _min));\n    //     }\n    //     return val;\n    // };\n\n    const getColor = function (val, bypassMap) {\n        let col, t;\n        if (bypassMap == null) {\n            bypassMap = false;\n        }\n        if (isNaN(val) || val === null) {\n            return _nacol;\n        }\n        if (!bypassMap) {\n            if (_classes && _classes.length > 2) {\n                // find the class\n                const c = getClass(val);\n                t = c / (_classes.length - 2);\n            } else if (_max !== _min) {\n                // just interpolate between min/max\n                t = (val - _min) / (_max - _min);\n            } else {\n                t = 1;\n            }\n        } else {\n            t = val;\n        }\n\n        // domain map\n        t = tMapDomain(t);\n\n        if (!bypassMap) {\n            t = tMapLightness(t); // lightness correction\n        }\n\n        if (_gamma !== 1) {\n            t = pow(t, _gamma);\n        }\n\n        t = _padding[0] + t * (1 - _padding[0] - _padding[1]);\n\n        t = limit(t, 0, 1);\n\n        const k = Math.floor(t * 10000);\n\n        if (_useCache && _colorCache[k]) {\n            col = _colorCache[k];\n        } else {\n            if (type(_colors) === 'array') {\n                //for i in [0.._pos.length-1]\n                for (let i = 0; i < _pos.length; i++) {\n                    const p = _pos[i];\n                    if (t <= p) {\n                        col = _colors[i];\n                        break;\n                    }\n                    if (t >= p && i === _pos.length - 1) {\n                        col = _colors[i];\n                        break;\n                    }\n                    if (t > p && t < _pos[i + 1]) {\n                        t = (t - p) / (_pos[i + 1] - p);\n                        col = chroma.interpolate(\n                            _colors[i],\n                            _colors[i + 1],\n                            t,\n                            _mode\n                        );\n                        break;\n                    }\n                }\n            } else if (type(_colors) === 'function') {\n                col = _colors(t);\n            }\n            if (_useCache) {\n                _colorCache[k] = col;\n            }\n        }\n        return col;\n    };\n\n    var resetCache = () => (_colorCache = {});\n\n    setColors(colors);\n\n    // public interface\n\n    const f = function (v) {\n        const c = chroma(getColor(v));\n        if (_out && c[_out]) {\n            return c[_out]();\n        } else {\n            return c;\n        }\n    };\n\n    f.classes = function (classes) {\n        if (classes != null) {\n            if (type(classes) === 'array') {\n                _classes = classes;\n                _domain = [classes[0], classes[classes.length - 1]];\n            } else {\n                const d = chroma.analyze(_domain);\n                if (classes === 0) {\n                    _classes = [d.min, d.max];\n                } else {\n                    _classes = chroma.limits(d, 'e', classes);\n                }\n            }\n            return f;\n        }\n        return _classes;\n    };\n\n    f.domain = function (domain) {\n        if (!arguments.length) {\n            return _domain;\n        }\n        _min = domain[0];\n        _max = domain[domain.length - 1];\n        _pos = [];\n        const k = _colors.length;\n        if (domain.length === k && _min !== _max) {\n            // update positions\n            for (let d of Array.from(domain)) {\n                _pos.push((d - _min) / (_max - _min));\n            }\n        } else {\n            for (let c = 0; c < k; c++) {\n                _pos.push(c / (k - 1));\n            }\n            if (domain.length > 2) {\n                // set domain map\n                const tOut = domain.map((d, i) => i / (domain.length - 1));\n                const tBreaks = domain.map((d) => (d - _min) / (_max - _min));\n                if (!tBreaks.every((val, i) => tOut[i] === val)) {\n                    tMapDomain = (t) => {\n                        if (t <= 0 || t >= 1) return t;\n                        let i = 0;\n                        while (t >= tBreaks[i + 1]) i++;\n                        const f =\n                            (t - tBreaks[i]) / (tBreaks[i + 1] - tBreaks[i]);\n                        const out = tOut[i] + f * (tOut[i + 1] - tOut[i]);\n                        return out;\n                    };\n                }\n            }\n        }\n        _domain = [_min, _max];\n        return f;\n    };\n\n    f.mode = function (_m) {\n        if (!arguments.length) {\n            return _mode;\n        }\n        _mode = _m;\n        resetCache();\n        return f;\n    };\n\n    f.range = function (colors, _pos) {\n        setColors(colors, _pos);\n        return f;\n    };\n\n    f.out = function (_o) {\n        _out = _o;\n        return f;\n    };\n\n    f.spread = function (val) {\n        if (!arguments.length) {\n            return _spread;\n        }\n        _spread = val;\n        return f;\n    };\n\n    f.correctLightness = function (v) {\n        if (v == null) {\n            v = true;\n        }\n        _correctLightness = v;\n        resetCache();\n        if (_correctLightness) {\n            tMapLightness = function (t) {\n                const L0 = getColor(0, true).lab()[0];\n                const L1 = getColor(1, true).lab()[0];\n                const pol = L0 > L1;\n                let L_actual = getColor(t, true).lab()[0];\n                const L_ideal = L0 + (L1 - L0) * t;\n                let L_diff = L_actual - L_ideal;\n                let t0 = 0;\n                let t1 = 1;\n                let max_iter = 20;\n                while (Math.abs(L_diff) > 1e-2 && max_iter-- > 0) {\n                    (function () {\n                        if (pol) {\n                            L_diff *= -1;\n                        }\n                        if (L_diff < 0) {\n                            t0 = t;\n                            t += (t1 - t) * 0.5;\n                        } else {\n                            t1 = t;\n                            t += (t0 - t) * 0.5;\n                        }\n                        L_actual = getColor(t, true).lab()[0];\n                        return (L_diff = L_actual - L_ideal);\n                    })();\n                }\n                return t;\n            };\n        } else {\n            tMapLightness = (t) => t;\n        }\n        return f;\n    };\n\n    f.padding = function (p) {\n        if (p != null) {\n            if (type(p) === 'number') {\n                p = [p, p];\n            }\n            _padding = p;\n            return f;\n        } else {\n            return _padding;\n        }\n    };\n\n    f.colors = function (numColors, out) {\n        // If no arguments are given, return the original colors that were provided\n        if (arguments.length < 2) {\n            out = 'hex';\n        }\n        let result = [];\n\n        if (arguments.length === 0) {\n            result = _colors.slice(0);\n        } else if (numColors === 1) {\n            result = [f(0.5)];\n        } else if (numColors > 1) {\n            const dm = _domain[0];\n            const dd = _domain[1] - dm;\n            result = __range__(0, numColors, false).map((i) =>\n                f(dm + (i / (numColors - 1)) * dd)\n            );\n        } else {\n            // returns all colors based on the defined classes\n            colors = [];\n            let samples = [];\n            if (_classes && _classes.length > 2) {\n                for (\n                    let i = 1, end = _classes.length, asc = 1 <= end;\n                    asc ? i < end : i > end;\n                    asc ? i++ : i--\n                ) {\n                    samples.push((_classes[i - 1] + _classes[i]) * 0.5);\n                }\n            } else {\n                samples = _domain;\n            }\n            result = samples.map((v) => f(v));\n        }\n\n        if (chroma[out]) {\n            result = result.map((c) => c[out]());\n        }\n        return result;\n    };\n\n    f.cache = function (c) {\n        if (c != null) {\n            _useCache = c;\n            return f;\n        } else {\n            return _useCache;\n        }\n    };\n\n    f.gamma = function (g) {\n        if (g != null) {\n            _gamma = g;\n            return f;\n        } else {\n            return _gamma;\n        }\n    };\n\n    f.nodata = function (d) {\n        if (d != null) {\n            _nacol = chroma(d);\n            return f;\n        } else {\n            return _nacol;\n        }\n    };\n\n    return f;\n}\n\nfunction __range__(left, right, inclusive) {\n    let range = [];\n    let ascending = left < right;\n    let end = !inclusive ? right : ascending ? right + 1 : right - 1;\n    for (let i = left; ascending ? i < end : i > end; ascending ? i++ : i--) {\n        range.push(i);\n    }\n    return range;\n}\n","//\n// interpolates between a set of colors uzing a bezier spline\n//\n\n// @requires utils lab\nimport Color from '../Color.js';\nimport '../io/lab/index.js';\nimport scale from './scale.js';\n\n// nth row of the pascal triangle\nconst binom_row = function (n) {\n    let row = [1, 1];\n    for (let i = 1; i < n; i++) {\n        let newrow = [1];\n        for (let j = 1; j <= row.length; j++) {\n            newrow[j] = (row[j] || 0) + row[j - 1];\n        }\n        row = newrow;\n    }\n    return row;\n};\n\nconst bezier = function (colors) {\n    let I, lab0, lab1, lab2;\n    colors = colors.map((c) => new Color(c));\n    if (colors.length === 2) {\n        // linear interpolation\n        [lab0, lab1] = colors.map((c) => c.lab());\n        I = function (t) {\n            const lab = [0, 1, 2].map((i) => lab0[i] + t * (lab1[i] - lab0[i]));\n            return new Color(lab, 'lab');\n        };\n    } else if (colors.length === 3) {\n        // quadratic bezier interpolation\n        [lab0, lab1, lab2] = colors.map((c) => c.lab());\n        I = function (t) {\n            const lab = [0, 1, 2].map(\n                (i) =>\n                    (1 - t) * (1 - t) * lab0[i] +\n                    2 * (1 - t) * t * lab1[i] +\n                    t * t * lab2[i]\n            );\n            return new Color(lab, 'lab');\n        };\n    } else if (colors.length === 4) {\n        // cubic bezier interpolation\n        let lab3;\n        [lab0, lab1, lab2, lab3] = colors.map((c) => c.lab());\n        I = function (t) {\n            const lab = [0, 1, 2].map(\n                (i) =>\n                    (1 - t) * (1 - t) * (1 - t) * lab0[i] +\n                    3 * (1 - t) * (1 - t) * t * lab1[i] +\n                    3 * (1 - t) * t * t * lab2[i] +\n                    t * t * t * lab3[i]\n            );\n            return new Color(lab, 'lab');\n        };\n    } else if (colors.length >= 5) {\n        // general case (degree n bezier)\n        let labs, row, n;\n        labs = colors.map((c) => c.lab());\n        n = colors.length - 1;\n        row = binom_row(n);\n        I = function (t) {\n            const u = 1 - t;\n            const lab = [0, 1, 2].map((i) =>\n                labs.reduce(\n                    (sum, el, j) =>\n                        sum + row[j] * u ** (n - j) * t ** j * el[i],\n                    0\n                )\n            );\n            return new Color(lab, 'lab');\n        };\n    } else {\n        throw new RangeError('No point in running bezier with only one color.');\n    }\n    return I;\n};\n\nexport default (colors) => {\n    const f = bezier(colors);\n    f.scale = () => scale(f);\n    return f;\n};\n","/*\n * interpolates between a set of colors uzing a bezier spline\n * blend mode formulas taken from https://web.archive.org/web/20180110014946/http://www.venture-ware.com/kevin/coding/lets-learn-math-photoshop-blend-modes/\n */\n\nimport '../io/rgb/index.js';\nimport chroma from '../chroma.js';\n\nconst blend = (bottom, top, mode) => {\n    if (!blend[mode]) {\n        throw new Error('unknown blend mode ' + mode);\n    }\n    return blend[mode](bottom, top);\n};\n\nconst blend_f = (f) => (bottom, top) => {\n    const c0 = chroma(top).rgb();\n    const c1 = chroma(bottom).rgb();\n    return chroma.rgb(f(c0, c1));\n};\n\nconst each = (f) => (c0, c1) => {\n    const out = [];\n    out[0] = f(c0[0], c1[0]);\n    out[1] = f(c0[1], c1[1]);\n    out[2] = f(c0[2], c1[2]);\n    return out;\n};\n\nconst normal = (a) => a;\nconst multiply = (a, b) => (a * b) / 255;\nconst darken = (a, b) => (a > b ? b : a);\nconst lighten = (a, b) => (a > b ? a : b);\nconst screen = (a, b) => 255 * (1 - (1 - a / 255) * (1 - b / 255));\nconst overlay = (a, b) =>\n    b < 128 ? (2 * a * b) / 255 : 255 * (1 - 2 * (1 - a / 255) * (1 - b / 255));\nconst burn = (a, b) => 255 * (1 - (1 - b / 255) / (a / 255));\nconst dodge = (a, b) => {\n    if (a === 255) return 255;\n    a = (255 * (b / 255)) / (1 - a / 255);\n    return a > 255 ? 255 : a;\n};\n\n// # add = (a,b) ->\n// #     if (a + b > 255) then 255 else a + b\n\nblend.normal = blend_f(each(normal));\nblend.multiply = blend_f(each(multiply));\nblend.screen = blend_f(each(screen));\nblend.overlay = blend_f(each(overlay));\nblend.darken = blend_f(each(darken));\nblend.lighten = blend_f(each(lighten));\nblend.dodge = blend_f(each(dodge));\nblend.burn = blend_f(each(burn));\n// blend.add = blend_f(each(add));\n\nexport default blend;\n","// cubehelix interpolation\n// based on D.A. Green \"A colour scheme for the display of astronomical intensity images\"\n// http://astron-soc.in/bulletin/11June/289392011.pdf\nimport { type, clip_rgb, TWOPI } from '../utils/index.js';\nimport chroma from '../chroma.js';\nconst { pow, sin, cos } = Math;\n\nexport default function (\n    start = 300,\n    rotations = -1.5,\n    hue = 1,\n    gamma = 1,\n    lightness = [0, 1]\n) {\n    let dh = 0,\n        dl;\n    if (type(lightness) === 'array') {\n        dl = lightness[1] - lightness[0];\n    } else {\n        dl = 0;\n        lightness = [lightness, lightness];\n    }\n    const f = function (fract) {\n        const a = TWOPI * ((start + 120) / 360 + rotations * fract);\n        const l = pow(lightness[0] + dl * fract, gamma);\n        const h = dh !== 0 ? hue[0] + fract * dh : hue;\n        const amp = (h * l * (1 - l)) / 2;\n        const cos_a = cos(a);\n        const sin_a = sin(a);\n        const r = l + amp * (-0.14861 * cos_a + 1.78277 * sin_a);\n        const g = l + amp * (-0.29227 * cos_a - 0.90649 * sin_a);\n        const b = l + amp * (+1.97294 * cos_a);\n        return chroma(clip_rgb([r * 255, g * 255, b * 255, 1]));\n    };\n    f.start = function (s) {\n        if (s == null) {\n            return start;\n        }\n        start = s;\n        return f;\n    };\n    f.rotations = function (r) {\n        if (r == null) {\n            return rotations;\n        }\n        rotations = r;\n        return f;\n    };\n    f.gamma = function (g) {\n        if (g == null) {\n            return gamma;\n        }\n        gamma = g;\n        return f;\n    };\n    f.hue = function (h) {\n        if (h == null) {\n            return hue;\n        }\n        hue = h;\n        if (type(hue) === 'array') {\n            dh = hue[1] - hue[0];\n            if (dh === 0) {\n                hue = hue[1];\n            }\n        } else {\n            dh = 0;\n        }\n        return f;\n    };\n    f.lightness = function (h) {\n        if (h == null) {\n            return lightness;\n        }\n        if (type(h) === 'array') {\n            lightness = h;\n            dl = h[1] - h[0];\n        } else {\n            lightness = [h, h];\n            dl = 0;\n        }\n        return f;\n    };\n    f.scale = () => chroma.scale(f);\n    f.hue(hue);\n    return f;\n}\n","import Color from '../Color.js';\nconst digits = '0123456789abcdef';\n\nconst { floor, random } = Math;\n\nexport default () => {\n    let code = '#';\n    for (let i = 0; i < 6; i++) {\n        code += digits.charAt(floor(random() * 16));\n    }\n    return new Color(code, 'hex');\n};\n","import type from './type.js';\n\nconst { log, pow, floor, abs } = Math;\n\nexport function analyze(data, key = null) {\n    const r = {\n        min: Number.MAX_VALUE,\n        max: Number.MAX_VALUE * -1,\n        sum: 0,\n        values: [],\n        count: 0\n    };\n    if (type(data) === 'object') {\n        data = Object.values(data);\n    }\n    data.forEach((val) => {\n        if (key && type(val) === 'object') val = val[key];\n        if (val !== undefined && val !== null && !isNaN(val)) {\n            r.values.push(val);\n            r.sum += val;\n            if (val < r.min) r.min = val;\n            if (val > r.max) r.max = val;\n            r.count += 1;\n        }\n    });\n\n    r.domain = [r.min, r.max];\n\n    r.limits = (mode, num) => limits(r, mode, num);\n\n    return r;\n}\n\nexport function limits(data, mode = 'equal', num = 7) {\n    if (type(data) == 'array') {\n        data = analyze(data);\n    }\n    const { min, max } = data;\n    const values = data.values.sort((a, b) => a - b);\n\n    if (num === 1) {\n        return [min, max];\n    }\n\n    const limits = [];\n\n    if (mode.substr(0, 1) === 'c') {\n        // continuous\n        limits.push(min);\n        limits.push(max);\n    }\n\n    if (mode.substr(0, 1) === 'e') {\n        // equal interval\n        limits.push(min);\n        for (let i = 1; i < num; i++) {\n            limits.push(min + (i / num) * (max - min));\n        }\n        limits.push(max);\n    } else if (mode.substr(0, 1) === 'l') {\n        // log scale\n        if (min <= 0) {\n            throw new Error(\n                'Logarithmic scales are only possible for values > 0'\n            );\n        }\n        const min_log = Math.LOG10E * log(min);\n        const max_log = Math.LOG10E * log(max);\n        limits.push(min);\n        for (let i = 1; i < num; i++) {\n            limits.push(pow(10, min_log + (i / num) * (max_log - min_log)));\n        }\n        limits.push(max);\n    } else if (mode.substr(0, 1) === 'q') {\n        // quantile scale\n        limits.push(min);\n        for (let i = 1; i < num; i++) {\n            const p = ((values.length - 1) * i) / num;\n            const pb = floor(p);\n            if (pb === p) {\n                limits.push(values[pb]);\n            } else {\n                // p > pb\n                const pr = p - pb;\n                limits.push(values[pb] * (1 - pr) + values[pb + 1] * pr);\n            }\n        }\n        limits.push(max);\n    } else if (mode.substr(0, 1) === 'k') {\n        // k-means clustering\n        /*\n        implementation based on\n        http://code.google.com/p/figue/source/browse/trunk/figue.js#336\n        simplified for 1-d input values\n        */\n        let cluster;\n        const n = values.length;\n        const assignments = new Array(n);\n        const clusterSizes = new Array(num);\n        let repeat = true;\n        let nb_iters = 0;\n        let centroids = null;\n\n        // get seed values\n        centroids = [];\n        centroids.push(min);\n        for (let i = 1; i < num; i++) {\n            centroids.push(min + (i / num) * (max - min));\n        }\n        centroids.push(max);\n\n        while (repeat) {\n            // assignment step\n            for (let j = 0; j < num; j++) {\n                clusterSizes[j] = 0;\n            }\n            for (let i = 0; i < n; i++) {\n                const value = values[i];\n                let mindist = Number.MAX_VALUE;\n                let best;\n                for (let j = 0; j < num; j++) {\n                    const dist = abs(centroids[j] - value);\n                    if (dist < mindist) {\n                        mindist = dist;\n                        best = j;\n                    }\n                    clusterSizes[best]++;\n                    assignments[i] = best;\n                }\n            }\n\n            // update centroids step\n            const newCentroids = new Array(num);\n            for (let j = 0; j < num; j++) {\n                newCentroids[j] = null;\n            }\n            for (let i = 0; i < n; i++) {\n                cluster = assignments[i];\n                if (newCentroids[cluster] === null) {\n                    newCentroids[cluster] = values[i];\n                } else {\n                    newCentroids[cluster] += values[i];\n                }\n            }\n            for (let j = 0; j < num; j++) {\n                newCentroids[j] *= 1 / clusterSizes[j];\n            }\n\n            // check convergence\n            repeat = false;\n            for (let j = 0; j < num; j++) {\n                if (newCentroids[j] !== centroids[j]) {\n                    repeat = true;\n                    break;\n                }\n            }\n\n            centroids = newCentroids;\n            nb_iters++;\n\n            if (nb_iters > 200) {\n                repeat = false;\n            }\n        }\n\n        // finished k-means clustering\n        // the next part is borrowed from gabrielflor.it\n        const kClusters = {};\n        for (let j = 0; j < num; j++) {\n            kClusters[j] = [];\n        }\n        for (let i = 0; i < n; i++) {\n            cluster = assignments[i];\n            kClusters[cluster].push(values[i]);\n        }\n        let tmpKMeansBreaks = [];\n        for (let j = 0; j < num; j++) {\n            tmpKMeansBreaks.push(kClusters[j][0]);\n            tmpKMeansBreaks.push(kClusters[j][kClusters[j].length - 1]);\n        }\n        tmpKMeansBreaks = tmpKMeansBreaks.sort((a, b) => a - b);\n        limits.push(tmpKMeansBreaks[0]);\n        for (let i = 1; i < tmpKMeansBreaks.length; i += 2) {\n            const v = tmpKMeansBreaks[i];\n            if (!isNaN(v) && limits.indexOf(v) === -1) {\n                limits.push(v);\n            }\n        }\n    }\n    return limits;\n}\n","import Color from '../Color.js';\nimport '../ops/luminance.js';\n\nexport default (a, b) => {\n    // WCAG contrast ratio\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#contrast-ratiodef\n    a = new Color(a);\n    b = new Color(b);\n    const l1 = a.luminance();\n    const l2 = b.luminance();\n    return l1 > l2 ? (l1 + 0.05) / (l2 + 0.05) : (l2 + 0.05) / (l1 + 0.05);\n};\n","import Color from '../Color.js';\nconst { sqrt, pow, min, max, atan2, abs, cos, sin, exp, PI } = Math;\n\nexport default function (a, b, Kl = 1, Kc = 1, Kh = 1) {\n    // Delta E (CIE 2000)\n    // see http://www.brucelindbloom.com/index.html?Eqn_DeltaE_CIE2000.html\n    var rad2deg = function (rad) {\n        return (360 * rad) / (2 * PI);\n    };\n    var deg2rad = function (deg) {\n        return (2 * PI * deg) / 360;\n    };\n    a = new Color(a);\n    b = new Color(b);\n    const [L1, a1, b1] = Array.from(a.lab());\n    const [L2, a2, b2] = Array.from(b.lab());\n    const avgL = (L1 + L2) / 2;\n    const C1 = sqrt(pow(a1, 2) + pow(b1, 2));\n    const C2 = sqrt(pow(a2, 2) + pow(b2, 2));\n    const avgC = (C1 + C2) / 2;\n    const G = 0.5 * (1 - sqrt(pow(avgC, 7) / (pow(avgC, 7) + pow(25, 7))));\n    const a1p = a1 * (1 + G);\n    const a2p = a2 * (1 + G);\n    const C1p = sqrt(pow(a1p, 2) + pow(b1, 2));\n    const C2p = sqrt(pow(a2p, 2) + pow(b2, 2));\n    const avgCp = (C1p + C2p) / 2;\n    const arctan1 = rad2deg(atan2(b1, a1p));\n    const arctan2 = rad2deg(atan2(b2, a2p));\n    const h1p = arctan1 >= 0 ? arctan1 : arctan1 + 360;\n    const h2p = arctan2 >= 0 ? arctan2 : arctan2 + 360;\n    const avgHp =\n        abs(h1p - h2p) > 180 ? (h1p + h2p + 360) / 2 : (h1p + h2p) / 2;\n    const T =\n        1 -\n        0.17 * cos(deg2rad(avgHp - 30)) +\n        0.24 * cos(deg2rad(2 * avgHp)) +\n        0.32 * cos(deg2rad(3 * avgHp + 6)) -\n        0.2 * cos(deg2rad(4 * avgHp - 63));\n    let deltaHp = h2p - h1p;\n    deltaHp =\n        abs(deltaHp) <= 180\n            ? deltaHp\n            : h2p <= h1p\n              ? deltaHp + 360\n              : deltaHp - 360;\n    deltaHp = 2 * sqrt(C1p * C2p) * sin(deg2rad(deltaHp) / 2);\n    const deltaL = L2 - L1;\n    const deltaCp = C2p - C1p;\n    const sl = 1 + (0.015 * pow(avgL - 50, 2)) / sqrt(20 + pow(avgL - 50, 2));\n    const sc = 1 + 0.045 * avgCp;\n    const sh = 1 + 0.015 * avgCp * T;\n    const deltaTheta = 30 * exp(-pow((avgHp - 275) / 25, 2));\n    const Rc = 2 * sqrt(pow(avgCp, 7) / (pow(avgCp, 7) + pow(25, 7)));\n    const Rt = -Rc * sin(2 * deg2rad(deltaTheta));\n    const result = sqrt(\n        pow(deltaL / (Kl * sl), 2) +\n            pow(deltaCp / (Kc * sc), 2) +\n            pow(deltaHp / (Kh * sh), 2) +\n            Rt * (deltaCp / (Kc * sc)) * (deltaHp / (Kh * sh))\n    );\n    return max(0, min(100, result));\n}\n","import Color from '../Color.js';\n\n// simple Euclidean distance\nexport default function (a, b, mode = 'lab') {\n    // Delta E (CIE 1976)\n    // see http://www.brucelindbloom.com/index.html?Equations.html\n    a = new Color(a);\n    b = new Color(b);\n    const l1 = a.get(mode);\n    const l2 = b.get(mode);\n    let sum_sq = 0;\n    for (let i in l1) {\n        const d = (l1[i] || 0) - (l2[i] || 0);\n        sum_sq += d * d;\n    }\n    return Math.sqrt(sum_sq);\n}\n","import Color from '../Color.js';\n\nexport default (...args) => {\n    try {\n        new Color(...args);\n        return true;\n        // eslint-disable-next-line\n    } catch (e) {\n        return false;\n    }\n};\n","// some pre-defined color scales:\nimport chroma from '../chroma.js';\nimport '../io/hsl/index.js';\nimport scale from '../generator/scale.js';\n\nexport default {\n    cool() {\n        return scale([chroma.hsl(180, 1, 0.9), chroma.hsl(250, 0.7, 0.4)]);\n    },\n    hot() {\n        return scale(['#000', '#f00', '#ff0', '#fff'], [0, 0.25, 0.75, 1]).mode(\n            'rgb'\n        );\n    }\n};\n","/**\n    ColorBrewer colors for chroma.js\n\n    Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The\n    Pennsylvania State University.\n\n    Licensed under the Apache License, Version 2.0 (the \"License\");\n    you may not use this file except in compliance with the License.\n    You may obtain a copy of the License at\n    http://www.apache.org/licenses/LICENSE-2.0\n\n    Unless required by applicable law or agreed to in writing, software distributed\n    under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\n    CONDITIONS OF ANY KIND, either express or implied. See the License for the\n    specific language governing permissions and limitations under the License.\n*/\n\nconst colorbrewer = {\n    // sequential\n    OrRd: ['#fff7ec', '#fee8c8', '#fdd49e', '#fdbb84', '#fc8d59', '#ef6548', '#d7301f', '#b30000', '#7f0000'],\n    PuBu: ['#fff7fb', '#ece7f2', '#d0d1e6', '#a6bddb', '#74a9cf', '#3690c0', '#0570b0', '#045a8d', '#023858'],\n    BuPu: ['#f7fcfd', '#e0ecf4', '#bfd3e6', '#9ebcda', '#8c96c6', '#8c6bb1', '#88419d', '#810f7c', '#4d004b'],\n    Oranges: ['#fff5eb', '#fee6ce', '#fdd0a2', '#fdae6b', '#fd8d3c', '#f16913', '#d94801', '#a63603', '#7f2704'],\n    BuGn: ['#f7fcfd', '#e5f5f9', '#ccece6', '#99d8c9', '#66c2a4', '#41ae76', '#238b45', '#006d2c', '#00441b'],\n    YlOrBr: ['#ffffe5', '#fff7bc', '#fee391', '#fec44f', '#fe9929', '#ec7014', '#cc4c02', '#993404', '#662506'],\n    YlGn: ['#ffffe5', '#f7fcb9', '#d9f0a3', '#addd8e', '#78c679', '#41ab5d', '#238443', '#006837', '#004529'],\n    Reds: ['#fff5f0', '#fee0d2', '#fcbba1', '#fc9272', '#fb6a4a', '#ef3b2c', '#cb181d', '#a50f15', '#67000d'],\n    RdPu: ['#fff7f3', '#fde0dd', '#fcc5c0', '#fa9fb5', '#f768a1', '#dd3497', '#ae017e', '#7a0177', '#49006a'],\n    Greens: ['#f7fcf5', '#e5f5e0', '#c7e9c0', '#a1d99b', '#74c476', '#41ab5d', '#238b45', '#006d2c', '#00441b'],\n    YlGnBu: ['#ffffd9', '#edf8b1', '#c7e9b4', '#7fcdbb', '#41b6c4', '#1d91c0', '#225ea8', '#253494', '#081d58'],\n    Purples: ['#fcfbfd', '#efedf5', '#dadaeb', '#bcbddc', '#9e9ac8', '#807dba', '#6a51a3', '#54278f', '#3f007d'],\n    GnBu: ['#f7fcf0', '#e0f3db', '#ccebc5', '#a8ddb5', '#7bccc4', '#4eb3d3', '#2b8cbe', '#0868ac', '#084081'],\n    Greys: ['#ffffff', '#f0f0f0', '#d9d9d9', '#bdbdbd', '#969696', '#737373', '#525252', '#252525', '#000000'],\n    YlOrRd: ['#ffffcc', '#ffeda0', '#fed976', '#feb24c', '#fd8d3c', '#fc4e2a', '#e31a1c', '#bd0026', '#800026'],\n    PuRd: ['#f7f4f9', '#e7e1ef', '#d4b9da', '#c994c7', '#df65b0', '#e7298a', '#ce1256', '#980043', '#67001f'],\n    Blues: ['#f7fbff', '#deebf7', '#c6dbef', '#9ecae1', '#6baed6', '#4292c6', '#2171b5', '#08519c', '#08306b'],\n    PuBuGn: ['#fff7fb', '#ece2f0', '#d0d1e6', '#a6bddb', '#67a9cf', '#3690c0', '#02818a', '#016c59', '#014636'],\n    Viridis: ['#440154', '#482777', '#3f4a8a', '#31678e', '#26838f', '#1f9d8a', '#6cce5a', '#b6de2b', '#fee825'],\n\n    // diverging\n    Spectral: ['#9e0142', '#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#e6f598', '#abdda4', '#66c2a5', '#3288bd', '#5e4fa2'],\n    RdYlGn: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee08b', '#ffffbf', '#d9ef8b', '#a6d96a', '#66bd63', '#1a9850', '#006837'],\n    RdBu: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#f7f7f7', '#d1e5f0', '#92c5de', '#4393c3', '#2166ac', '#053061'],\n    PiYG: ['#8e0152', '#c51b7d', '#de77ae', '#f1b6da', '#fde0ef', '#f7f7f7', '#e6f5d0', '#b8e186', '#7fbc41', '#4d9221', '#276419'],\n    PRGn: ['#40004b', '#762a83', '#9970ab', '#c2a5cf', '#e7d4e8', '#f7f7f7', '#d9f0d3', '#a6dba0', '#5aae61', '#1b7837', '#00441b'],\n    RdYlBu: ['#a50026', '#d73027', '#f46d43', '#fdae61', '#fee090', '#ffffbf', '#e0f3f8', '#abd9e9', '#74add1', '#4575b4', '#313695'],\n    BrBG: ['#543005', '#8c510a', '#bf812d', '#dfc27d', '#f6e8c3', '#f5f5f5', '#c7eae5', '#80cdc1', '#35978f', '#01665e', '#003c30'],\n    RdGy: ['#67001f', '#b2182b', '#d6604d', '#f4a582', '#fddbc7', '#ffffff', '#e0e0e0', '#bababa', '#878787', '#4d4d4d', '#1a1a1a'],\n    PuOr: ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],\n\n    // qualitative\n    Set2: ['#66c2a5', '#fc8d62', '#8da0cb', '#e78ac3', '#a6d854', '#ffd92f', '#e5c494', '#b3b3b3'],\n    Accent: ['#7fc97f', '#beaed4', '#fdc086', '#ffff99', '#386cb0', '#f0027f', '#bf5b17', '#666666'],\n    Set1: ['#e41a1c', '#377eb8', '#4daf4a', '#984ea3', '#ff7f00', '#ffff33', '#a65628', '#f781bf', '#999999'],\n    Set3: ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f'],\n    Dark2: ['#1b9e77', '#d95f02', '#7570b3', '#e7298a', '#66a61e', '#e6ab02', '#a6761d', '#666666'],\n    Paired: ['#a6cee3', '#1f78b4', '#b2df8a', '#33a02c', '#fb9a99', '#e31a1c', '#fdbf6f', '#ff7f00', '#cab2d6', '#6a3d9a', '#ffff99', '#b15928'],\n    Pastel2: ['#b3e2cd', '#fdcdac', '#cbd5e8', '#f4cae4', '#e6f5c9', '#fff2ae', '#f1e2cc', '#cccccc'],\n    Pastel1: ['#fbb4ae', '#b3cde3', '#ccebc5', '#decbe4', '#fed9a6', '#ffffcc', '#e5d8bd', '#fddaec', '#f2f2f2']\n};\n\n// add lowercase aliases for case-insensitive matches\nfor (let key of Object.keys(colorbrewer)) {\n    colorbrewer[key.toLowerCase()] = colorbrewer[key];\n}\n\nexport default colorbrewer;\n","import chroma from './src/chroma.js';\n\n// feel free to comment out anything to rollup\n// a smaller chroma.js built\n\n// io --> convert colors\nimport './src/io/cmyk/index.js';\nimport './src/io/css/index.js';\nimport './src/io/gl/index.js';\nimport './src/io/hcg/index.js';\nimport './src/io/hex/index.js';\nimport './src/io/hsi/index.js';\nimport './src/io/hsl/index.js';\nimport './src/io/hsv/index.js';\nimport './src/io/lab/index.js';\nimport './src/io/lch/index.js';\nimport './src/io/named/index.js';\nimport './src/io/num/index.js';\nimport './src/io/rgb/index.js';\nimport './src/io/temp/index.js';\nimport './src/io/oklab/index.js';\nimport './src/io/oklch/index.js';\n\n// operators --> modify existing Colors\nimport './src/ops/alpha.js';\nimport './src/ops/clipped.js';\nimport './src/ops/darken.js';\nimport './src/ops/get.js';\nimport './src/ops/luminance.js';\nimport './src/ops/mix.js';\nimport './src/ops/premultiply.js';\nimport './src/ops/saturate.js';\nimport './src/ops/set.js';\nimport './src/ops/shade.js';\n\n// interpolators\nimport './src/interpolator/rgb.js';\nimport './src/interpolator/lrgb.js';\nimport './src/interpolator/lab.js';\nimport './src/interpolator/lch.js';\nimport './src/interpolator/num.js';\nimport './src/interpolator/hcg.js';\nimport './src/interpolator/hsi.js';\nimport './src/interpolator/hsl.js';\nimport './src/interpolator/hsv.js';\nimport './src/interpolator/oklab.js';\nimport './src/interpolator/oklch.js';\n\n// generators -- > create new colors\nimport average from './src/generator/average.js';\nimport bezier from './src/generator/bezier.js';\nimport blend from './src/generator/blend.js';\nimport cubehelix from './src/generator/cubehelix.js';\nimport mix from './src/generator/mix.js';\nimport random from './src/generator/random.js';\nimport scale from './src/generator/scale.js';\n\n// other utility methods\nimport { analyze } from './src/utils/analyze.js';\nimport contrast from './src/utils/contrast.js';\nimport deltaE from './src/utils/delta-e.js';\nimport distance from './src/utils/distance.js';\nimport { limits } from './src/utils/analyze.js';\nimport valid from './src/utils/valid.js';\nimport input from './src/io/input.js';\n\n// scale\nimport scales from './src/utils/scales.js';\n\n// colors\nimport colors from './src/colors/w3cx11.js';\nimport brewer from './src/colors/colorbrewer.js';\n\nObject.assign(chroma, {\n    average,\n    bezier,\n    blend,\n    cubehelix,\n    mix,\n    interpolate: mix,\n    random,\n    scale,\n    analyze,\n    contrast,\n    deltaE,\n    distance,\n    limits,\n    valid,\n    scales,\n    input,\n    colors,\n    brewer\n});\n\nexport default chroma;\n","/**\n * Color palette and resolution utilities\n * Supports light/dark modes and named color palettes\n */\n\nimport chroma from 'chroma-js';\nimport type {\n  Appearance,\n  ColorPaletteInput,\n  ColorScaleInput,\n  Theme\n} from '../types';\nimport { getThemes } from './echartsThemes';\n\n/**\n * Checks if input is a string tuple [string] or [string, string]\n */\nfunction isStringTuple(input: unknown): input is [string] | [string, string] {\n  return (\n    Array.isArray(input) &&\n    (input.length === 1 || input.length === 2) &&\n    input.every((item) => typeof item === 'string')\n  );\n}\n\n/**\n * Converts a light color to a dark mode equivalent\n * Simple implementation - can be extended for more sophisticated conversion\n */\nexport function convertLightToDark(color: string): string | undefined {\n  if (!color) return undefined;\n\n  try {\n    // Validate the color\n    if (!chroma.valid(color)) {\n      return color;\n    }\n\n    const chromaColor = chroma(color);\n    const luminance = chromaColor.luminance();\n\n    // If the color is already dark, lighten it slightly\n    if (luminance < 0.3) {\n      return chromaColor.brighten(0.5).hex();\n    }\n\n    // For light colors, invert or darken based on hue\n    const hsl = chromaColor.hsl();\n    const [h, s, l] = hsl;\n\n    // Invert the lightness while preserving hue and reducing saturation slightly\n    const newL = 1 - l;\n    const newS = Math.min(s * 0.9, 1);\n\n    return chroma.hsl(h || 0, newS, newL).hex();\n  } catch {\n    return color;\n  }\n}\n\n/**\n * Resolves a color input to an actual color string based on appearance\n */\nexport function resolveColor<T>(\n  input: T,\n  appearance: Appearance\n): string | T | undefined {\n  const themes = getThemes();\n\n  if (typeof input === 'string') {\n    const lightColor = themes.light.colors[input.trim()];\n    const darkColor = themes.dark.colors[input.trim()];\n\n    if (appearance === 'light') {\n      return lightColor ?? input;\n    }\n    if (appearance === 'dark') {\n      return darkColor ?? convertLightToDark(lightColor ?? input) ?? input;\n    }\n  }\n\n  if (isStringTuple(input)) {\n    const [light, dark] = input;\n\n    const lightColor = themes.light.colors[light.trim()];\n    const darkColor = dark ? (themes.dark.colors[dark.trim()] ?? dark) : undefined;\n\n    if (appearance === 'light') {\n      return lightColor ?? light;\n    }\n    if (appearance === 'dark') {\n      return darkColor ?? convertLightToDark(lightColor ?? light) ?? dark;\n    }\n  }\n\n  return undefined;\n}\n\n/**\n * Resolves an object of colors to their actual values based on appearance\n */\nexport function resolveColorsObject<T>(\n  input: Record<string, T> | undefined,\n  appearance: Appearance\n): Record<string, string | T | undefined> | undefined {\n  if (!input) return undefined;\n\n  return Object.fromEntries(\n    Object.entries(input).map(([key, color]) => [\n      key,\n      resolveColor(color, appearance)\n    ])\n  );\n}\n\n/**\n * Resolves a color palette input to an array of colors\n */\nexport function resolveColorPalette<T extends ColorPaletteInput>(\n  input: T,\n  theme: Theme\n): string[] | undefined {\n  if (typeof input === 'string') {\n    return theme.colorPalettes[input.trim()];\n  }\n\n  if (Array.isArray(input)) {\n    return input.map((color) => {\n      if (typeof color === 'string') {\n        return theme.colors[color.trim()] ?? color;\n      }\n      return String(color);\n    });\n  }\n\n  return undefined;\n}\n\n/**\n * Resolves a color scale input to an array of colors for gradients\n */\nexport function resolveColorScale<T extends ColorScaleInput>(\n  input: T,\n  theme: Theme\n): string[] | undefined {\n  if (typeof input === 'string') {\n    const colorScale = theme.colorScales[input.trim()];\n    if (colorScale) return colorScale;\n\n    const color = theme.colors[input.trim()];\n    if (color) return [theme.colors['base-100'], color];\n\n    if (chroma.valid(input)) {\n      return [theme.colors['base-100'], input];\n    }\n\n    return undefined;\n  }\n\n  if (Array.isArray(input)) {\n    return input.map((color) => {\n      if (typeof color === 'string') {\n        return theme.colors[color.trim()] ?? color;\n      }\n      return String(color);\n    });\n  }\n\n  return undefined;\n}\n\n/**\n * Generates a color scale from two endpoints with n steps\n */\nexport function generateColorScale(\n  startColor: string,\n  endColor: string,\n  steps: number = 10\n): string[] {\n  return chroma.scale([startColor, endColor]).mode('lch').colors(steps);\n}\n\n/**\n * Gets a contrasting text color (black or white) for a background color\n */\nexport function getContrastingTextColor(backgroundColor: string): string {\n  if (!chroma.valid(backgroundColor)) {\n    return '#000000';\n  }\n  const luminance = chroma(backgroundColor).luminance();\n  return luminance > 0.5 ? '#000000' : '#ffffff';\n}\n\n/**\n * Adjusts color opacity\n */\nexport function setColorOpacity(color: string, opacity: number): string {\n  if (!chroma.valid(color)) {\n    return color;\n  }\n  return chroma(color).alpha(opacity).css();\n}\n\n/**\n * Named color palettes\n */\nexport const namedPalettes: Record<string, string[]> = {\n  default: [\n    '#236aa4',\n    '#45a1bf',\n    '#a5cdee',\n    '#8dacbf',\n    '#85c7c6',\n    '#d2c6ac',\n    '#f4b548',\n    '#8f3d56',\n    '#71b9f4',\n    '#46a485'\n  ],\n  categorical: [\n    '#3366cc',\n    '#dc3912',\n    '#ff9900',\n    '#109618',\n    '#990099',\n    '#0099c6',\n    '#dd4477',\n    '#66aa00',\n    '#b82e2e',\n    '#316395'\n  ],\n  pastel: [\n    '#a6cee3',\n    '#b2df8a',\n    '#fdbf6f',\n    '#cab2d6',\n    '#fb9a99',\n    '#ffff99',\n    '#1f78b4',\n    '#33a02c',\n    '#e31a1c'\n  ],\n  vivid: [\n    '#e41a1c',\n    '#377eb8',\n    '#4daf4a',\n    '#984ea3',\n    '#ff7f00',\n    '#ffff33',\n    '#a65628',\n    '#f781bf',\n    '#999999'\n  ],\n  cool: [\n    '#313695',\n    '#4575b4',\n    '#74add1',\n    '#abd9e9',\n    '#e0f3f8',\n    '#fee090',\n    '#fdae61',\n    '#f46d43',\n    '#d73027'\n  ],\n  warm: [\n    '#b35806',\n    '#e08214',\n    '#fdb863',\n    '#fee0b6',\n    '#f7f7f7',\n    '#d8daeb',\n    '#b2abd2',\n    '#8073ac',\n    '#542788'\n  ]\n};\n\n/**\n * Named color scales for continuous data\n */\nexport const namedScales: Record<string, string[]> = {\n  default: ['#ADD8E6', '#00008B'],\n  blue: ['#ADD8E6', '#00008B'],\n  green: ['#90EE90', '#006400'],\n  red: ['#FFB6C1', '#8B0000'],\n  orange: ['#FFDAB9', '#FF4500'],\n  purple: ['#E6E6FA', '#4B0082'],\n  grey: ['#ffffff', '#000000'],\n  blueGreen: ['#f7fcf0', '#00441b'],\n  yellowGreen: ['#ffffe5', '#004529'],\n  yellowOrangeRed: ['#ffffcc', '#800026'],\n  redPurple: ['#fff7f3', '#49006a'],\n  purpleBlue: ['#fff7fb', '#023858'],\n  diverging: ['#d73027', '#f7f7f7', '#1a9850']\n};\n","function debounce(function_, wait = 100, options = {}) {\n\tif (typeof function_ !== 'function') {\n\t\tthrow new TypeError(`Expected the first parameter to be a function, got \\`${typeof function_}\\`.`);\n\t}\n\n\tif (wait < 0) {\n\t\tthrow new RangeError('`wait` must not be negative.');\n\t}\n\n\t// TODO: Deprecate the boolean parameter at some point.\n\tconst {immediate} = typeof options === 'boolean' ? {immediate: options} : options;\n\n\tlet storedContext;\n\tlet storedArguments;\n\tlet timeoutId;\n\tlet timestamp;\n\tlet result;\n\n\tfunction run() {\n\t\tconst callContext = storedContext;\n\t\tconst callArguments = storedArguments;\n\t\tstoredContext = undefined;\n\t\tstoredArguments = undefined;\n\t\tresult = function_.apply(callContext, callArguments);\n\t\treturn result;\n\t}\n\n\tfunction later() {\n\t\tconst last = Date.now() - timestamp;\n\n\t\tif (last < wait && last >= 0) {\n\t\t\ttimeoutId = setTimeout(later, wait - last);\n\t\t} else {\n\t\t\ttimeoutId = undefined;\n\n\t\t\tif (!immediate) {\n\t\t\t\tresult = run();\n\t\t\t}\n\t\t}\n\t}\n\n\tconst debounced = function (...arguments_) {\n\t\tif (\n\t\t\tstoredContext\n\t\t\t&& this !== storedContext\n\t\t\t&& Object.getPrototypeOf(this) === Object.getPrototypeOf(storedContext)\n\t\t) {\n\t\t\tthrow new Error('Debounced method called with different contexts of the same prototype.');\n\t\t}\n\n\t\tstoredContext = this; // eslint-disable-line unicorn/no-this-assignment\n\t\tstoredArguments = arguments_;\n\t\ttimestamp = Date.now();\n\n\t\tconst callNow = immediate && !timeoutId;\n\n\t\tif (!timeoutId) {\n\t\t\ttimeoutId = setTimeout(later, wait);\n\t\t}\n\n\t\tif (callNow) {\n\t\t\tresult = run();\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tObject.defineProperty(debounced, 'isPending', {\n\t\tget() {\n\t\t\treturn timeoutId !== undefined;\n\t\t},\n\t});\n\n\tdebounced.clear = () => {\n\t\tif (!timeoutId) {\n\t\t\treturn;\n\t\t}\n\n\t\tclearTimeout(timeoutId);\n\t\ttimeoutId = undefined;\n\t};\n\n\tdebounced.flush = () => {\n\t\tif (!timeoutId) {\n\t\t\treturn;\n\t\t}\n\n\t\tdebounced.trigger();\n\t};\n\n\tdebounced.trigger = () => {\n\t\tresult = run();\n\n\t\tdebounced.clear();\n\t};\n\n\treturn debounced;\n}\n\n// Adds compatibility for ES modules\nmodule.exports.debounce = debounce;\n\nmodule.exports = debounce;\n","/**\n * Vue 3 composable for ECharts instance management\n */\n\nimport {\n  ref,\n  watch,\n  onMounted,\n  onUnmounted,\n  shallowRef,\n  type Ref,\n  type ShallowRef\n} from 'vue';\nimport * as echarts from 'echarts';\nimport type { EChartsOption, ECharts } from 'echarts';\nimport debounce from 'debounce';\nimport type { Appearance, ChartRenderer } from '../types';\nimport { defaultThemeLight, defaultThemeDark } from '../themes/echartsThemes';\n\nexport interface UseEChartsOptions {\n  /**\n   * Theme mode\n   */\n  theme?: Ref<Appearance> | Appearance;\n\n  /**\n   * Renderer type\n   */\n  renderer?: ChartRenderer;\n\n  /**\n   * Connect group for linked interactions\n   */\n  connectGroup?: string;\n\n  /**\n   * Animation duration in ms\n   */\n  animationDuration?: number;\n\n  /**\n   * Whether to auto-resize on container changes\n   */\n  autoResize?: boolean;\n\n  /**\n   * Resize debounce delay in ms\n   */\n  resizeDebounce?: number;\n}\n\nexport interface UseEChartsReturn {\n  /**\n   * Reference to the ECharts instance\n   */\n  chartInstance: ShallowRef<ECharts | null>;\n\n  /**\n   * Reference to the container element\n   */\n  containerRef: Ref<HTMLElement | null>;\n\n  /**\n   * Initialize the chart\n   */\n  init: (container?: HTMLElement) => ECharts | null;\n\n  /**\n   * Set chart options\n   */\n  setOption: (option: EChartsOption, notMerge?: boolean) => void;\n\n  /**\n   * Resize the chart\n   */\n  resize: () => void;\n\n  /**\n   * Dispose the chart\n   */\n  dispose: () => void;\n\n  /**\n   * Get data URL for export\n   */\n  getDataURL: (opts?: {\n    type?: 'png' | 'jpeg' | 'svg';\n    pixelRatio?: number;\n    backgroundColor?: string;\n    excludeComponents?: string[];\n  }) => string | undefined;\n\n  /**\n   * Check if chart is disposed\n   */\n  isDisposed: () => boolean;\n}\n\nconst ANIMATION_DURATION = 500;\n\n// Themes registered flag\nlet themesRegistered = false;\n\n/**\n * Register themes with ECharts\n */\nfunction registerThemes(): void {\n  if (themesRegistered) return;\n  echarts.registerTheme('light', defaultThemeLight);\n  echarts.registerTheme('dark', defaultThemeDark);\n  themesRegistered = true;\n}\n\n/**\n * Check if we should use SVG renderer (iOS large canvas workaround)\n */\nfunction shouldUseSvg(container: HTMLElement): boolean {\n  const isIOS = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(\n    navigator.platform\n  );\n  // iOS breaks with canvas if the canvas is too large\n  return isIOS && container.clientWidth * 3 * container.clientHeight * 3 > 16777215;\n}\n\n/**\n * Main composable for ECharts instance management\n */\nexport function useECharts(options: UseEChartsOptions = {}): UseEChartsReturn {\n  const {\n    theme = 'light',\n    renderer = 'canvas',\n    connectGroup,\n    animationDuration = ANIMATION_DURATION,\n    autoResize = true,\n    resizeDebounce = 100\n  } = options;\n\n  const chartInstance: ShallowRef<ECharts | null> = shallowRef(null);\n  const containerRef: Ref<HTMLElement | null> = ref(null);\n  let resizeObserver: ResizeObserver | null = null;\n\n  // Get the current theme value\n  const getThemeValue = (): Appearance => {\n    if (typeof theme === 'string') {\n      return theme;\n    }\n    return theme.value;\n  };\n\n  // Register themes\n  registerThemes();\n\n  /**\n   * Initialize the chart\n   */\n  const init = (container?: HTMLElement): ECharts | null => {\n    const targetContainer = container || containerRef.value;\n    if (!targetContainer) {\n      console.warn('useECharts: No container element provided');\n      return null;\n    }\n\n    // Dispose existing instance\n    if (chartInstance.value) {\n      chartInstance.value.dispose();\n    }\n\n    // Determine renderer\n    const useRenderer = shouldUseSvg(targetContainer) ? 'svg' : renderer;\n\n    // Create new instance\n    const instance = echarts.init(targetContainer, getThemeValue(), {\n      renderer: useRenderer\n    });\n\n    chartInstance.value = instance;\n\n    // Set up connect group if provided\n    if (connectGroup) {\n      instance.group = connectGroup;\n      echarts.connect(connectGroup);\n    }\n\n    return instance;\n  };\n\n  /**\n   * Set chart options\n   * @param option - ECharts option object\n   * @param opts - Either a boolean (legacy notMerge) or SetOptionOpts object\n   */\n  const setOption = (option: EChartsOption, opts: boolean | { notMerge?: boolean; replaceMerge?: string[] } = false): void => {\n    if (!chartInstance.value) {\n      console.warn('useECharts: Chart not initialized');\n      return;\n    }\n\n    // Convert legacy boolean to options object\n    const setOptionOpts = typeof opts === 'boolean'\n      ? { notMerge: opts }\n      : {\n          // Default to using replaceMerge for series to preserve toolbox state\n          replaceMerge: opts.replaceMerge ?? ['series'],\n          notMerge: opts.notMerge ?? false\n        };\n\n    chartInstance.value.setOption(\n      {\n        ...option,\n        animationDuration,\n        animationDurationUpdate: animationDuration\n      },\n      setOptionOpts\n    );\n  };\n\n  /**\n   * Resize the chart\n   */\n  const resize = (): void => {\n    if (!chartInstance.value) return;\n\n    chartInstance.value.resize({\n      animation: {\n        duration: animationDuration\n      }\n    });\n  };\n\n  /**\n   * Dispose the chart\n   */\n  const dispose = (): void => {\n    if (resizeObserver) {\n      resizeObserver.disconnect();\n      resizeObserver = null;\n    }\n\n    if (chartInstance.value) {\n      chartInstance.value.dispose();\n      chartInstance.value = null;\n    }\n  };\n\n  /**\n   * Get data URL for export\n   */\n  const getDataURL = (opts?: {\n    type?: 'png' | 'jpeg' | 'svg';\n    pixelRatio?: number;\n    backgroundColor?: string;\n    excludeComponents?: string[];\n  }): string | undefined => {\n    if (!chartInstance.value) return undefined;\n\n    return chartInstance.value.getConnectedDataURL({\n      type: opts?.type || 'png',\n      pixelRatio: opts?.pixelRatio || 3,\n      backgroundColor: opts?.backgroundColor || '#ffffff',\n      excludeComponents: opts?.excludeComponents || ['toolbox']\n    });\n  };\n\n  /**\n   * Check if chart is disposed\n   */\n  const isDisposed = (): boolean => {\n    return !chartInstance.value || chartInstance.value.isDisposed();\n  };\n\n  // Debounced resize handler\n  const debouncedResize = debounce(resize, resizeDebounce);\n\n  // Set up lifecycle hooks\n  onMounted(() => {\n    if (autoResize && containerRef.value) {\n      const parentElement = containerRef.value.parentElement;\n      if (window.ResizeObserver && parentElement) {\n        resizeObserver = new ResizeObserver(debouncedResize);\n        resizeObserver.observe(parentElement);\n      } else {\n        window.addEventListener('resize', debouncedResize);\n      }\n    }\n  });\n\n  onUnmounted(() => {\n    if (resizeObserver) {\n      resizeObserver.disconnect();\n    } else {\n      window.removeEventListener('resize', debouncedResize);\n    }\n    dispose();\n  });\n\n  // Watch for theme changes\n  if (typeof theme !== 'string') {\n    watch(theme, (newTheme) => {\n      if (chartInstance.value && containerRef.value) {\n        // Re-initialize with new theme\n        chartInstance.value.dispose();\n        const instance = echarts.init(containerRef.value, newTheme, {\n          renderer: shouldUseSvg(containerRef.value) ? 'svg' : renderer\n        });\n        chartInstance.value = instance;\n      }\n    });\n  }\n\n  return {\n    chartInstance,\n    containerRef,\n    init,\n    setOption,\n    resize,\n    dispose,\n    getDataURL,\n    isDisposed\n  };\n}\n\n/**\n * Apply series colors override\n */\nexport function applySeriesColors(\n  chart: ECharts,\n  seriesColors: Record<string, string> | undefined\n): void {\n  if (!seriesColors) return;\n\n  const prevOption = chart.getOption() as EChartsOption;\n  if (!prevOption || !prevOption.series) return;\n\n  const series = prevOption.series as Array<{ name?: string; itemStyle?: { color?: string } }>;\n  const newSeries = series.map((s) => {\n    if (s.name && seriesColors[s.name]) {\n      return {\n        ...s,\n        itemStyle: {\n          ...s.itemStyle,\n          color: seriesColors[s.name]\n        }\n      };\n    }\n    return s;\n  });\n\n  chart.setOption({ series: newSeries });\n}\n\n/**\n * Apply additional ECharts options\n */\nexport function applyEchartsOptions(\n  chart: ECharts,\n  echartsOptions: EChartsOption | undefined\n): void {\n  if (!echartsOptions) return;\n  chart.setOption(echartsOptions);\n}\n\n/**\n * Apply series options to all series (except reference lines/areas/points)\n */\nexport function applySeriesOptions(\n  chart: ECharts,\n  seriesOptions: Record<string, unknown> | undefined,\n  config: EChartsOption\n): void {\n  if (!seriesOptions) return;\n\n  const configSeries = config.series as Array<{ seriesType?: string }> | undefined;\n  if (!configSeries) return;\n\n  // Find reference series indices\n  const referenceIndices = configSeries.reduce<number[]>(\n    (acc, { seriesType }, index) => {\n      if (\n        seriesType === 'reference_line' ||\n        seriesType === 'reference_area' ||\n        seriesType === 'reference_point'\n      ) {\n        acc.push(index);\n      }\n      return acc;\n    },\n    []\n  );\n\n  // Apply options to non-reference series\n  const tempSeries = configSeries.map((_, index) => {\n    if (referenceIndices.includes(index)) {\n      return {};\n    }\n    return { ...seriesOptions };\n  });\n\n  chart.setOption({ series: tempSeries });\n}\n","/**\n * Vue 3 composable for value and axis formatting\n */\n\nimport { computed, type ComputedRef } from 'vue';\nimport type { FormatObject, ColumnUnitSummary, ValueType } from '../types';\nimport {\n  formatValue as formatValueFn,\n  formatAxisValue as formatAxisValueFn,\n  getFormatObjectFromString,\n  formatTitle as formatTitleFn,\n  fmt as fmtFn,\n  setCustomFormats,\n  getCustomFormats,\n  lookupColumnFormat,\n  applyTitleTagReplacement,\n  formatExample,\n  inferValueType\n} from '../utils/formatting';\nimport { BUILT_IN_FORMATS } from '../utils/builtInFormats';\n\nexport interface UseFormattingReturn {\n  /**\n   * Format a value for display in tooltips/labels\n   */\n  formatValue: (\n    value: unknown,\n    format?: FormatObject | string,\n    columnUnitSummary?: ColumnUnitSummary\n  ) => string;\n\n  /**\n   * Format a value for display on axes\n   */\n  formatAxisValue: (\n    value: unknown,\n    format?: FormatObject | string,\n    columnUnitSummary?: ColumnUnitSummary\n  ) => string;\n\n  /**\n   * Get a format object from a format string or tag\n   */\n  getFormat: (formatString: string, valueType?: ValueType) => FormatObject;\n\n  /**\n   * Format a column title\n   */\n  formatTitle: (columnName: string, format?: FormatObject) => string;\n\n  /**\n   * Convenience function to format with a format string\n   */\n  fmt: (value: unknown, format: string) => string;\n\n  /**\n   * Set custom formats\n   */\n  setCustomFormats: (formats: FormatObject[]) => void;\n\n  /**\n   * Get all custom formats\n   */\n  getCustomFormats: () => FormatObject[];\n\n  /**\n   * Get all built-in formats\n   */\n  getBuiltInFormats: () => FormatObject[];\n\n  /**\n   * Look up format based on column name\n   */\n  lookupColumnFormat: (\n    columnName: string,\n    columnType: { columnType: string },\n    columnUnitSummary?: ColumnUnitSummary\n  ) => FormatObject | undefined;\n\n  /**\n   * Apply title tag replacement\n   */\n  applyTitleTagReplacement: (columnName: string, format?: FormatObject) => string;\n\n  /**\n   * Format an example value\n   */\n  formatExample: (format: FormatObject & { userInput?: string }) => string;\n\n  /**\n   * Infer value type from a value\n   */\n  inferValueType: (value: unknown) => ValueType;\n}\n\n/**\n * Composable for formatting values and axis labels\n */\nexport function useFormatting(): UseFormattingReturn {\n  const formatValue = (\n    value: unknown,\n    format?: FormatObject | string,\n    columnUnitSummary?: ColumnUnitSummary\n  ): string => {\n    if (typeof format === 'string') {\n      return formatValueFn(value, getFormatObjectFromString(format), columnUnitSummary);\n    }\n    return formatValueFn(value, format, columnUnitSummary);\n  };\n\n  const formatAxisValue = (\n    value: unknown,\n    format?: FormatObject | string,\n    columnUnitSummary?: ColumnUnitSummary\n  ): string => {\n    if (typeof format === 'string') {\n      return formatAxisValueFn(value, getFormatObjectFromString(format), columnUnitSummary);\n    }\n    return formatAxisValueFn(value, format, columnUnitSummary);\n  };\n\n  const getFormat = (formatString: string, valueType?: ValueType): FormatObject => {\n    return getFormatObjectFromString(formatString, valueType);\n  };\n\n  const formatTitle = (columnName: string, format?: FormatObject): string => {\n    return formatTitleFn(columnName, format);\n  };\n\n  const fmt = (value: unknown, format: string): string => {\n    return fmtFn(value, format);\n  };\n\n  const getBuiltInFormats = (): FormatObject[] => {\n    return BUILT_IN_FORMATS;\n  };\n\n  return {\n    formatValue,\n    formatAxisValue,\n    getFormat,\n    formatTitle,\n    fmt,\n    setCustomFormats,\n    getCustomFormats,\n    getBuiltInFormats,\n    lookupColumnFormat,\n    applyTitleTagReplacement,\n    formatExample,\n    inferValueType\n  };\n}\n\n/**\n * Creates a computed formatter for a specific format\n */\nexport function useFormatter(\n  formatString: string | FormatObject,\n  columnUnitSummary?: ColumnUnitSummary\n): {\n  format: ComputedRef<FormatObject>;\n  formatValue: (value: unknown) => string;\n  formatAxisValue: (value: unknown) => string;\n} {\n  const format = computed(() => {\n    if (typeof formatString === 'string') {\n      return getFormatObjectFromString(formatString);\n    }\n    return formatString;\n  });\n\n  const formatValueComputed = (value: unknown): string => {\n    return formatValueFn(value, format.value, columnUnitSummary);\n  };\n\n  const formatAxisValueComputed = (value: unknown): string => {\n    return formatAxisValueFn(value, format.value, columnUnitSummary);\n  };\n\n  return {\n    format,\n    formatValue: formatValueComputed,\n    formatAxisValue: formatAxisValueComputed\n  };\n}\n","/**\n * Vue provide/inject symbols for the charting system\n */\n\nimport type { InjectionKey, Ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { Appearance, Theme, ChartContext } from '../types';\n\n/**\n * Key for providing chart props to child components\n */\nexport const chartPropsKey: InjectionKey<Ref<ChartContext>> = Symbol('chartProps');\n\n/**\n * Key for providing chart config to child components\n */\nexport const chartConfigKey: InjectionKey<Ref<EChartsOption>> = Symbol('chartConfig');\n\n/**\n * Key for providing theme stores\n */\nexport interface ThemeStoresContext {\n  activeAppearance: Ref<Appearance>;\n  selectedAppearance: Ref<Appearance | 'system'>;\n  theme: Ref<Theme>;\n  setAppearance: (appearance: Appearance | 'system') => void;\n  cycleAppearance: () => void;\n  resolveColor: <T>(input: T) => Ref<string | T | undefined>;\n  resolveColorsObject: <T>(input: Record<string, T> | undefined) => Ref<Record<string, string | T | undefined> | undefined>;\n  resolveColorPalette: (input: string | string[]) => Ref<string[] | undefined>;\n  resolveColorScale: (input: string | string[]) => Ref<string[] | undefined>;\n}\n\nexport const themeStoresKey: InjectionKey<ThemeStoresContext> = Symbol('themeStores');\n\n/**\n * Key for providing ECharts instance to child components\n */\nexport const echartsInstanceKey: InjectionKey<Ref<echarts.ECharts | null>> = Symbol('echartsInstance');\n\n/**\n * Key for providing series configuration to child components\n */\nexport interface SeriesConfigContext {\n  addSeries: (series: EChartsOption['series']) => void;\n  removeSeries: (name: string) => void;\n  updateSeries: (name: string, config: Partial<EChartsOption['series']>) => void;\n}\n\nexport const seriesConfigKey: InjectionKey<SeriesConfigContext> = Symbol('seriesConfig');\n","/**\n * Vue 3 composable for theme management\n */\n\nimport { ref, computed, watch, onMounted, onUnmounted, provide, inject, type Ref, type ComputedRef } from 'vue';\nimport type { Appearance, AppearancePreference, Theme, ColorPaletteInput, ColorScaleInput } from '../types';\nimport { getThemes, configureThemes } from '../themes/echartsThemes';\nimport {\n  resolveColor as resolveColorFn,\n  resolveColorsObject as resolveColorsObjectFn,\n  resolveColorPalette as resolveColorPaletteFn,\n  resolveColorScale as resolveColorScaleFn\n} from '../themes/colorPalettes';\nimport { themeStoresKey, type ThemeStoresContext } from '../symbols/injectionKeys';\n\nexport interface UseThemeOptions {\n  /**\n   * Default appearance preference\n   */\n  defaultAppearance?: AppearancePreference;\n\n  /**\n   * Whether to sync with system preference\n   */\n  syncWithSystem?: boolean;\n\n  /**\n   * Local storage key for persisting preference\n   */\n  storageKey?: string;\n}\n\nexport interface UseThemeReturn {\n  /**\n   * The current system theme preference\n   */\n  systemTheme: Ref<Appearance>;\n\n  /**\n   * The user's selected appearance preference\n   */\n  selectedAppearance: Ref<AppearancePreference>;\n\n  /**\n   * The actual active appearance (resolves 'system' to actual value)\n   */\n  activeAppearance: ComputedRef<Appearance>;\n\n  /**\n   * The current theme object\n   */\n  theme: ComputedRef<Theme>;\n\n  /**\n   * Set the appearance preference\n   */\n  setAppearance: (appearance: AppearancePreference) => void;\n\n  /**\n   * Cycle through appearance options (system -> light -> dark -> system)\n   */\n  cycleAppearance: () => void;\n\n  /**\n   * Resolve a color input to an actual color\n   */\n  resolveColor: <T>(input: T) => ComputedRef<string | T | undefined>;\n\n  /**\n   * Resolve an object of colors\n   */\n  resolveColorsObject: <T>(input: Record<string, T> | undefined) => ComputedRef<Record<string, string | T | undefined> | undefined>;\n\n  /**\n   * Resolve a color palette\n   */\n  resolveColorPalette: (input: ColorPaletteInput) => ComputedRef<string[] | undefined>;\n\n  /**\n   * Resolve a color scale\n   */\n  resolveColorScale: (input: ColorScaleInput) => ComputedRef<string[] | undefined>;\n\n  /**\n   * Configure custom themes\n   */\n  configureThemes: typeof configureThemes;\n}\n\n/**\n * Detects the system's color scheme preference\n */\nfunction getSystemTheme(): Appearance {\n  if (typeof window !== 'undefined' && window.matchMedia) {\n    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n  }\n  return 'light';\n}\n\n/**\n * Main composable for theme management\n */\nexport function useTheme(options: UseThemeOptions = {}): UseThemeReturn {\n  const {\n    defaultAppearance = 'system',\n    syncWithSystem = true,\n    storageKey = 'vue-echarts-theme'\n  } = options;\n\n  // System theme detection\n  const systemTheme = ref<Appearance>(getSystemTheme());\n\n  // User's selected preference\n  const selectedAppearance = ref<AppearancePreference>(defaultAppearance);\n\n  // Load from storage on mount\n  onMounted(() => {\n    if (typeof window !== 'undefined' && storageKey) {\n      const stored = localStorage.getItem(storageKey);\n      if (stored && ['system', 'light', 'dark'].includes(stored)) {\n        selectedAppearance.value = stored as AppearancePreference;\n      }\n    }\n\n    // Listen for system theme changes\n    if (syncWithSystem && typeof window !== 'undefined' && window.matchMedia) {\n      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n      const handler = (e: MediaQueryListEvent) => {\n        systemTheme.value = e.matches ? 'dark' : 'light';\n      };\n      mediaQuery.addEventListener('change', handler);\n      onUnmounted(() => {\n        mediaQuery.removeEventListener('change', handler);\n      });\n    }\n  });\n\n  // Persist selection to storage\n  watch(selectedAppearance, (newValue) => {\n    if (typeof window !== 'undefined' && storageKey) {\n      localStorage.setItem(storageKey, newValue);\n    }\n  });\n\n  // Active appearance (resolved)\n  const activeAppearance = computed<Appearance>(() => {\n    return selectedAppearance.value === 'system'\n      ? systemTheme.value\n      : selectedAppearance.value;\n  });\n\n  // Current theme object\n  const theme = computed<Theme>(() => {\n    const themes = getThemes();\n    return themes[activeAppearance.value];\n  });\n\n  // Set appearance\n  const setAppearance = (appearance: AppearancePreference): void => {\n    selectedAppearance.value = appearance;\n  };\n\n  // Cycle appearance\n  const cycleAppearance = (): void => {\n    const cycle: AppearancePreference[] = ['system', 'light', 'dark'];\n    const currentIndex = cycle.indexOf(selectedAppearance.value);\n    selectedAppearance.value = cycle[(currentIndex + 1) % cycle.length];\n  };\n\n  // Color resolution functions that return computed refs\n  const resolveColor = <T>(input: T): ComputedRef<string | T | undefined> => {\n    return computed(() => resolveColorFn(input, activeAppearance.value));\n  };\n\n  const resolveColorsObject = <T>(\n    input: Record<string, T> | undefined\n  ): ComputedRef<Record<string, string | T | undefined> | undefined> => {\n    return computed(() => resolveColorsObjectFn(input, activeAppearance.value));\n  };\n\n  const resolveColorPalette = (input: ColorPaletteInput): ComputedRef<string[] | undefined> => {\n    return computed(() => resolveColorPaletteFn(input, theme.value));\n  };\n\n  const resolveColorScale = (input: ColorScaleInput): ComputedRef<string[] | undefined> => {\n    return computed(() => resolveColorScaleFn(input, theme.value));\n  };\n\n  return {\n    systemTheme,\n    selectedAppearance,\n    activeAppearance,\n    theme,\n    setAppearance,\n    cycleAppearance,\n    resolveColor,\n    resolveColorsObject,\n    resolveColorPalette,\n    resolveColorScale,\n    configureThemes\n  };\n}\n\n/**\n * Provides theme context to child components\n */\nexport function provideTheme(themeReturn: UseThemeReturn): void {\n  const context: ThemeStoresContext = {\n    activeAppearance: themeReturn.activeAppearance as unknown as Ref<Appearance>,\n    selectedAppearance: themeReturn.selectedAppearance,\n    theme: themeReturn.theme as unknown as Ref<Theme>,\n    setAppearance: themeReturn.setAppearance,\n    cycleAppearance: themeReturn.cycleAppearance,\n    resolveColor: themeReturn.resolveColor as <T>(input: T) => Ref<string | T | undefined>,\n    resolveColorsObject: themeReturn.resolveColorsObject as <T>(input: Record<string, T> | undefined) => Ref<Record<string, string | T | undefined> | undefined>,\n    resolveColorPalette: themeReturn.resolveColorPalette as (input: string | string[]) => Ref<string[] | undefined>,\n    resolveColorScale: themeReturn.resolveColorScale as (input: string | string[]) => Ref<string[] | undefined>\n  };\n  provide(themeStoresKey, context);\n}\n\n/**\n * Injects theme context from parent components\n */\nexport function injectTheme(): ThemeStoresContext | undefined {\n  return inject(themeStoresKey);\n}\n\n/**\n * Gets theme stores, creating if not already provided\n */\nexport function useThemeStores(options?: UseThemeOptions): ThemeStoresContext {\n  const injected = inject(themeStoresKey, undefined);\n  if (injected) {\n    return injected;\n  }\n\n  // Create new theme stores if not provided\n  const themeReturn = useTheme(options);\n  return {\n    activeAppearance: themeReturn.activeAppearance as unknown as Ref<Appearance>,\n    selectedAppearance: themeReturn.selectedAppearance,\n    theme: themeReturn.theme as unknown as Ref<Theme>,\n    setAppearance: themeReturn.setAppearance,\n    cycleAppearance: themeReturn.cycleAppearance,\n    resolveColor: themeReturn.resolveColor as <T>(input: T) => Ref<string | T | undefined>,\n    resolveColorsObject: themeReturn.resolveColorsObject as <T>(input: Record<string, T> | undefined) => Ref<Record<string, string | T | undefined> | undefined>,\n    resolveColorPalette: themeReturn.resolveColorPalette as (input: string | string[]) => Ref<string[] | undefined>,\n    resolveColorScale: themeReturn.resolveColorScale as (input: string | string[]) => Ref<string[] | undefined>\n  };\n}\n","//download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage\n// v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime\n// v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs\n// v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.\n// v4 adds AMD/UMD, commonJS, and plain browser support\n// v4.1 adds url download capability via solo URL argument (same domain/CORS only)\n// v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors\n// https://github.com/rndme/download\n\n(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals (root is window)\n\t\troot.download = factory();\n  }\n}(this, function () {\n\n\treturn function download(data, strFileName, strMimeType) {\n\n\t\tvar self = window, // this script is only for browsers anyway...\n\t\t\tdefaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n\t\t\tmimeType = strMimeType || defaultMime,\n\t\t\tpayload = data,\n\t\t\turl = !strFileName && !strMimeType && payload,\n\t\t\tanchor = document.createElement(\"a\"),\n\t\t\ttoString = function(a){return String(a);},\n\t\t\tmyBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString),\n\t\t\tfileName = strFileName || \"download\",\n\t\t\tblob,\n\t\t\treader;\n\t\t\tmyBlob= myBlob.call ? myBlob.bind(self) : Blob ;\n\t  \n\t\tif(String(this)===\"true\"){ //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n\t\t\tpayload=[payload, mimeType];\n\t\t\tmimeType=payload[0];\n\t\t\tpayload=payload[1];\n\t\t}\n\n\n\t\tif(url && url.length< 2048){ // if no filename and no mime, assume a url was passed as the only argument\n\t\t\tfileName = url.split(\"/\").pop().split(\"?\")[0];\n\t\t\tanchor.href = url; // assign href prop to temp anchor\n\t\t  \tif(anchor.href.indexOf(url) !== -1){ // if the browser determines that it's a potentially valid url path:\n        \t\tvar ajax=new XMLHttpRequest();\n        \t\tajax.open( \"GET\", url, true);\n        \t\tajax.responseType = 'blob';\n        \t\tajax.onload= function(e){ \n\t\t\t\t  download(e.target.response, fileName, defaultMime);\n\t\t\t\t};\n        \t\tsetTimeout(function(){ ajax.send();}, 0); // allows setting custom ajax headers using the return:\n\t\t\t    return ajax;\n\t\t\t} // end if valid url?\n\t\t} // end if url?\n\n\n\t\t//go ahead and download dataURLs right away\n\t\tif(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(payload)){\n\t\t\n\t\t\tif(payload.length > (1024*1024*1.999) && myBlob !== toString ){\n\t\t\t\tpayload=dataUrlToBlob(payload);\n\t\t\t\tmimeType=payload.type || defaultMime;\n\t\t\t}else{\t\t\t\n\t\t\t\treturn navigator.msSaveBlob ?  // IE10 can't do a[download], only Blobs:\n\t\t\t\t\tnavigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n\t\t\t\t\tsaver(payload) ; // everyone else can save dataURLs un-processed\n\t\t\t}\n\t\t\t\n\t\t}else{//not data url, is it a string with special needs?\n\t\t\tif(/([\\x80-\\xff])/.test(payload)){\t\t\t  \n\t\t\t\tvar i=0, tempUiArr= new Uint8Array(payload.length), mx=tempUiArr.length;\n\t\t\t\tfor(i;i<mx;++i) tempUiArr[i]= payload.charCodeAt(i);\n\t\t\t \tpayload=new myBlob([tempUiArr], {type: mimeType});\n\t\t\t}\t\t  \n\t\t}\n\t\tblob = payload instanceof myBlob ?\n\t\t\tpayload :\n\t\t\tnew myBlob([payload], {type: mimeType}) ;\n\n\n\t\tfunction dataUrlToBlob(strUrl) {\n\t\t\tvar parts= strUrl.split(/[:;,]/),\n\t\t\ttype= parts[1],\n\t\t\tdecoder= parts[2] == \"base64\" ? atob : decodeURIComponent,\n\t\t\tbinData= decoder( parts.pop() ),\n\t\t\tmx= binData.length,\n\t\t\ti= 0,\n\t\t\tuiArr= new Uint8Array(mx);\n\n\t\t\tfor(i;i<mx;++i) uiArr[i]= binData.charCodeAt(i);\n\n\t\t\treturn new myBlob([uiArr], {type: type});\n\t\t }\n\n\t\tfunction saver(url, winMode){\n\n\t\t\tif ('download' in anchor) { //html5 A[download]\n\t\t\t\tanchor.href = url;\n\t\t\t\tanchor.setAttribute(\"download\", fileName);\n\t\t\t\tanchor.className = \"download-js-link\";\n\t\t\t\tanchor.innerHTML = \"downloading...\";\n\t\t\t\tanchor.style.display = \"none\";\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tanchor.click();\n\t\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\t\tif(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(anchor.href);}, 250 );}\n\t\t\t\t}, 66);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// handle non-a[download] safari as best we can:\n\t\t\tif(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n\t\t\t\tif(/^data:/.test(url))\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t\tif(!window.open(url)){ // popup blocked, offer direct download:\n\t\t\t\t\tif(confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")){ location.href=url; }\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t//do iframe dataURL download (old ch+FF):\n\t\t\tvar f = document.createElement(\"iframe\");\n\t\t\tdocument.body.appendChild(f);\n\n\t\t\tif(!winMode && /^data:/.test(url)){ // force a mime that will download:\n\t\t\t\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t}\n\t\t\tf.src=url;\n\t\t\tsetTimeout(function(){ document.body.removeChild(f); }, 333);\n\n\t\t}//end saver\n\n\n\n\n\t\tif (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n\t\t\treturn navigator.msSaveBlob(blob, fileName);\n\t\t}\n\n\t\tif(self.URL){ // simple fast and modern way using Blob and URL:\n\t\t\tsaver(self.URL.createObjectURL(blob), true);\n\t\t}else{\n\t\t\t// handle non-Blob()+non-URL browsers:\n\t\t\tif(typeof blob === \"string\" || blob.constructor===toString ){\n\t\t\t\ttry{\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \";base64,\"  +  self.btoa(blob)  );\n\t\t\t\t}catch(y){\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \",\" + encodeURIComponent(blob)  );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Blob but not URL support:\n\t\t\treader=new FileReader();\n\t\t\treader.onload=function(e){\n\t\t\t\tsaver(this.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(blob);\n\t\t}\n\t\treturn true;\n\t}; /* end download() */\n}));\n","var q;(function(x){x[\"csv\"]=\"text/csv\";x[\"tsv\"]=\"text/tab-separated-values\";x[\"plain\"]=\"text/plain\"})(q||(q={}));var X=(W)=>W,z=(W)=>W,Z=X,_=X,Y=X,N=X,V=X;var h={fieldSeparator:\",\",decimalSeparator:\".\",quoteStrings:!0,quoteCharacter:'\"',showTitle:!1,title:\"My Generated Report\",filename:\"generated\",showColumnHeaders:!0,useTextFile:!1,fileExtension:\"csv\",mediaType:q.csv,useBom:!0,columnHeaders:[],useKeysAsHeaders:!1,boolDisplay:{true:\"TRUE\",false:\"FALSE\"},replaceUndefinedWith:\"\"},F=\"\\r\\n\",R=\"\\uFEFF\",G=(W)=>Object.assign({},h,W);class K extends Error{constructor(W){super(W);this.name=\"CsvGenerationError\"}}class B extends Error{constructor(W){super(W);this.name=\"EmptyHeadersError\"}}class L extends Error{constructor(W){super(W);this.name=\"CsvDownloadEnvironmentError\"}}class P extends Error{constructor(W){super(W);this.name=\"UnsupportedDataFormatError\"}}var s=function(W,$){if($=='\"'&&W.indexOf('\"')>-1)return W.replace(/\"/g,'\"\"');return W},w=(W)=>typeof W===\"object\"?N(W.key):N(W),y=(W)=>typeof W===\"object\"?V(W.displayLabel):V(W),T=(W,...$)=>$.reduce((j,x)=>x(j),W),E=(W)=>($)=>W.useBom?_(z($)+R):$,M=(W)=>($)=>W.showTitle?S(_(z($)+W.title))(Y(\"\")):$,S=(W)=>($)=>_(z(W)+z($)+F),O=(W)=>($,j)=>l(W)(Y(z($)+z(j))),l=(W)=>($)=>X(z($)+W.fieldSeparator),b=(W,$)=>(j)=>{if(!W.showColumnHeaders)return j;if($.length<1)throw new B(\"Option to show headers but none supplied. Make sure there are keys in your collection or that you've supplied headers through the config options.\");let x=Y(\"\");for(let A=0;A<$.length;A++){const J=y($[A]);x=O(W)(x,v(W,z(J)))}return x=Y(z(x).slice(0,-1)),S(j)(x)},C=(W,$,j)=>(x)=>{let A=x;for(var J=0;J<j.length;J++){let I=Y(\"\");for(let U=0;U<$.length;U++){const H=w($[U]),D=j[J][z(H)];I=O(W)(I,v(W,D))}I=Y(z(I).slice(0,-1)),A=S(A)(I)}return A},k=z,m=(W)=>+W===W&&(!isFinite(W)||Boolean(W%1)),p=(W,$)=>{if(m($)){if(W.decimalSeparator===\"locale\")return Z($.toLocaleString());if(W.decimalSeparator)return Z($.toString().replace(\".\",W.decimalSeparator))}return Z($.toString())},Q=(W,$)=>{let j=$;if(W.quoteStrings||W.fieldSeparator&&$.indexOf(W.fieldSeparator)>-1||W.quoteCharacter&&$.indexOf(W.quoteCharacter)>-1||$.indexOf(\"\\n\")>-1||$.indexOf(\"\\r\")>-1)j=W.quoteCharacter+s($,W.quoteCharacter)+W.quoteCharacter;return Z(j)},g=(W,$)=>{const j=$?\"true\":\"false\";return Z(W.boolDisplay[j])},r=(W,$)=>{if(typeof $===\"undefined\"&&W.replaceUndefinedWith!==void 0)return Q(W,W.replaceUndefinedWith+\"\");if($===null)return Q(W,\"null\");return Q(W,\"\")},v=(W,$)=>{if(typeof $===\"number\")return p(W,$);if(typeof $===\"string\")return Q(W,$);if(typeof $===\"boolean\"&&W.boolDisplay)return g(W,$);if($===null||typeof $===\"undefined\")return r(W,$);throw new P(`\n    typeof ${typeof $} isn't supported. Only number, string, boolean, null and undefined are supported.\n    Please convert the data in your object to one of those before generating the CSV.\n    `)};var BW=(W)=>($)=>{const j=G(W),x=j.useKeysAsHeaders?Object.keys($[0]):j.columnHeaders;let A=T(_(\"\"),E(j),M(j),b(j,x),C(j,x,$));if(z(A).length<1)throw new K(\"Output is empty. Is your data formatted correctly?\");return A},f=(W)=>($)=>{const j=G(W),x=z($),A=j.useTextFile?\"text/plain\":j.mediaType;return new Blob([x],{type:`${A};charset=utf8;`})},LW=(W)=>($)=>{if(!window)throw new L(\"Downloading only supported in a browser environment.\");const j=f(W)($),x=G(W),A=x.useTextFile?\"txt\":x.fileExtension,J=`${x.filename}.${A}`,I=document.createElement(\"a\");I.download=J,I.href=URL.createObjectURL(j),I.setAttribute(\"visibility\",\"hidden\"),document.body.appendChild(I),I.click(),document.body.removeChild(I)};export{G as mkConfig,BW as generateCsv,LW as download,k as asString,f as asBlob,q as MediaType};\n","/**\n * Vue 3 composable for chart export functionality\n *\n */\n\nimport { ref, type Ref } from 'vue';\nimport download from 'downloadjs';\nimport { mkConfig, generateCsv, download as downloadCsv } from 'export-to-csv';\nimport * as echarts from 'echarts';\nimport type { EChartsOption } from 'echarts';\nimport type { DataRecord, Appearance } from '../types';\nimport { defaultThemeLight, defaultThemeDark } from '../themes/echartsThemes';\n\nexport interface ExportImageOptions {\n  /**\n   * Image format\n   */\n  type?: 'png' | 'jpeg';\n\n  /**\n   * Pixel ratio for higher resolution\n   */\n  pixelRatio?: number;\n\n  /**\n   * Background color\n   */\n  backgroundColor?: string;\n\n  /**\n   * Width of exported image\n   */\n  width?: number;\n\n  /**\n   * Filename (without extension)\n   */\n  filename?: string;\n\n  /**\n   * Components to exclude from export\n   */\n  excludeComponents?: string[];\n}\n\nexport interface ExportCsvOptions {\n  /**\n   * Filename (without extension)\n   */\n  filename?: string;\n\n  /**\n   * Include header row\n   */\n  showHeaders?: boolean;\n\n  /**\n   * Use BOM for UTF-8 encoding (helps Excel recognize UTF-8)\n   */\n  useBom?: boolean;\n\n  /**\n   * Column separator\n   */\n  separator?: string;\n}\n\nexport interface UseExportReturn {\n  /**\n   * Whether export is in progress\n   */\n  isExporting: Ref<boolean>;\n\n  /**\n   * Export chart as PNG image\n   */\n  exportAsPng: (\n    chartConfig: EChartsOption,\n    options?: ExportImageOptions,\n    theme?: Appearance,\n    seriesColors?: Record<string, string>,\n    echartsOptions?: EChartsOption,\n    seriesOptions?: Record<string, unknown>\n  ) => Promise<void>;\n\n  /**\n   * Export chart as JPEG image\n   */\n  exportAsJpeg: (\n    chartConfig: EChartsOption,\n    options?: ExportImageOptions,\n    theme?: Appearance,\n    seriesColors?: Record<string, string>,\n    echartsOptions?: EChartsOption,\n    seriesOptions?: Record<string, unknown>\n  ) => Promise<void>;\n\n  /**\n   * Export data as CSV\n   */\n  exportAsCsv: (data: DataRecord[], options?: ExportCsvOptions) => void;\n\n  /**\n   * Copy chart to clipboard as image\n   */\n  copyToClipboard: (\n    chartConfig: EChartsOption,\n    theme?: Appearance,\n    seriesColors?: Record<string, string>,\n    echartsOptions?: EChartsOption,\n    seriesOptions?: Record<string, unknown>\n  ) => Promise<boolean>;\n\n  /**\n   * Get data URL from chart config\n   */\n  getChartDataUrl: (\n    chartConfig: EChartsOption,\n    options?: ExportImageOptions,\n    theme?: Appearance,\n    seriesColors?: Record<string, string>,\n    echartsOptions?: EChartsOption,\n    seriesOptions?: Record<string, unknown>\n  ) => string | null;\n}\n\n// Register themes\nlet themesRegistered = false;\nfunction registerThemes(): void {\n  if (themesRegistered) return;\n  echarts.registerTheme('light', defaultThemeLight);\n  echarts.registerTheme('dark', defaultThemeDark);\n  themesRegistered = true;\n}\n\n/**\n * Generate timestamp for filenames\n */\nfunction getTimestamp(): string {\n  const date = new Date();\n  const localISOTime = new Date(date.getTime() - date.getTimezoneOffset() * 60000)\n    .toISOString()\n    .slice(0, 19)\n    .replace(/:/g, '-');\n  return localISOTime;\n}\n\n/**\n * Apply series colors to a chart instance\n */\nfunction applySeriesColors(\n  chart: echarts.ECharts,\n  seriesColors: Record<string, string> | undefined\n): void {\n  if (!seriesColors) return;\n\n  const prevOption = chart.getOption() as EChartsOption;\n  if (!prevOption || !prevOption.series) return;\n\n  const series = prevOption.series as Array<{ name?: string; itemStyle?: { color?: string } }>;\n  const newSeries = series.map((s) => {\n    if (s.name && seriesColors[s.name]) {\n      return {\n        ...s,\n        itemStyle: {\n          ...s.itemStyle,\n          color: seriesColors[s.name]\n        }\n      };\n    }\n    return s;\n  });\n\n  chart.setOption({ series: newSeries });\n}\n\n/**\n * Apply series options to chart instance\n */\nfunction applySeriesOptions(\n  chart: echarts.ECharts,\n  seriesOptions: Record<string, unknown> | undefined,\n  config: EChartsOption\n): void {\n  if (!seriesOptions) return;\n\n  const configSeries = config.series as Array<{ seriesType?: string }> | undefined;\n  if (!configSeries) return;\n\n  const referenceIndices = configSeries.reduce<number[]>(\n    (acc, { seriesType }, index) => {\n      if (\n        seriesType === 'reference_line' ||\n        seriesType === 'reference_area' ||\n        seriesType === 'reference_point'\n      ) {\n        acc.push(index);\n      }\n      return acc;\n    },\n    []\n  );\n\n  const tempSeries = configSeries.map((_, index) => {\n    if (referenceIndices.includes(index)) {\n      return {};\n    }\n    return { ...seriesOptions };\n  });\n\n  chart.setOption({ series: tempSeries });\n}\n\n/**\n * Create a temporary chart instance for export\n */\nfunction createExportChart(\n  config: EChartsOption,\n  width: number,\n  height: number,\n  theme: Appearance,\n  seriesColors?: Record<string, string>,\n  echartsOptions?: EChartsOption,\n  seriesOptions?: Record<string, unknown>\n): { chart: echarts.ECharts; container: HTMLDivElement } {\n  registerThemes();\n\n  // Create hidden container\n  const container = document.createElement('div');\n  container.style.cssText = `\n    position: fixed;\n    left: -9999px;\n    top: -9999px;\n    width: ${width}px;\n    height: ${height}px;\n    visibility: hidden;\n  `;\n  document.body.appendChild(container);\n\n  // Create chart instance\n  const chart = echarts.init(container, theme, { renderer: 'canvas' });\n\n  // Set options with animation disabled\n  const configWithoutAnimation = {\n    ...config,\n    animation: false\n  };\n  chart.setOption(configWithoutAnimation);\n\n  // Apply overrides\n  if (echartsOptions) {\n    chart.setOption(echartsOptions);\n  }\n  if (seriesColors) {\n    applySeriesColors(chart, seriesColors);\n  }\n  if (seriesOptions) {\n    applySeriesOptions(chart, seriesOptions, config);\n  }\n\n  return { chart, container };\n}\n\n/**\n * Main composable for export functionality\n */\nexport function useExport(): UseExportReturn {\n  const isExporting = ref(false);\n\n  /**\n   * Get chart data URL\n   */\n  const getChartDataUrl = (\n    chartConfig: EChartsOption,\n    options: ExportImageOptions = {},\n    theme: Appearance = 'light',\n    seriesColors?: Record<string, string>,\n    echartsOptions?: EChartsOption,\n    seriesOptions?: Record<string, unknown>\n  ): string | null => {\n    const {\n      type = 'png',\n      pixelRatio = 3,\n      backgroundColor = theme === 'dark' ? '#1a1a2e' : '#ffffff',\n      width = 666,\n      excludeComponents = ['toolbox']\n    } = options;\n\n    // Determine height from config or use default\n    const height = 300; // Default height\n\n    const { chart, container } = createExportChart(\n      chartConfig,\n      width,\n      height,\n      theme,\n      seriesColors,\n      echartsOptions,\n      seriesOptions\n    );\n\n    try {\n      const dataUrl = chart.getConnectedDataURL({\n        type,\n        pixelRatio,\n        backgroundColor,\n        excludeComponents\n      });\n\n      return dataUrl;\n    } finally {\n      chart.dispose();\n      document.body.removeChild(container);\n    }\n  };\n\n  /**\n   * Export chart as image\n   */\n  const exportAsImage = async (\n    chartConfig: EChartsOption,\n    options: ExportImageOptions = {},\n    theme: Appearance = 'light',\n    seriesColors?: Record<string, string>,\n    echartsOptions?: EChartsOption,\n    seriesOptions?: Record<string, unknown>\n  ): Promise<void> => {\n    isExporting.value = true;\n\n    try {\n      const {\n        type = 'png',\n        filename = 'chart'\n      } = options;\n\n      const dataUrl = getChartDataUrl(\n        chartConfig,\n        options,\n        theme,\n        seriesColors,\n        echartsOptions,\n        seriesOptions\n      );\n\n      if (dataUrl) {\n        const timestamp = getTimestamp();\n        download(dataUrl, `${filename}_${timestamp}.${type}`);\n      }\n    } finally {\n      isExporting.value = false;\n    }\n  };\n\n  /**\n   * Export as PNG\n   */\n  const exportAsPng = (\n    chartConfig: EChartsOption,\n    options: ExportImageOptions = {},\n    theme?: Appearance,\n    seriesColors?: Record<string, string>,\n    echartsOptions?: EChartsOption,\n    seriesOptions?: Record<string, unknown>\n  ): Promise<void> => {\n    return exportAsImage(\n      chartConfig,\n      { ...options, type: 'png', pixelRatio: options.pixelRatio || 3 },\n      theme || 'light',\n      seriesColors,\n      echartsOptions,\n      seriesOptions\n    );\n  };\n\n  /**\n   * Export as JPEG\n   */\n  const exportAsJpeg = (\n    chartConfig: EChartsOption,\n    options: ExportImageOptions = {},\n    theme?: Appearance,\n    seriesColors?: Record<string, string>,\n    echartsOptions?: EChartsOption,\n    seriesOptions?: Record<string, unknown>\n  ): Promise<void> => {\n    return exportAsImage(\n      chartConfig,\n      { ...options, type: 'jpeg', pixelRatio: options.pixelRatio || 2 },\n      theme || 'light',\n      seriesColors,\n      echartsOptions,\n      seriesOptions\n    );\n  };\n\n  /**\n   * Export data as CSV\n   */\n  const exportAsCsv = (\n    data: DataRecord[],\n    options: ExportCsvOptions = {}\n  ): void => {\n    const {\n      filename = 'data',\n      showHeaders = true,\n      useBom = true,\n      separator = ','\n    } = options;\n\n    if (!data || data.length === 0) {\n      console.warn('useExport: No data to export');\n      return;\n    }\n\n    const timestamp = getTimestamp();\n\n    const csvConfig = mkConfig({\n      filename: `${filename}_${timestamp}`,\n      columnHeaders: showHeaders ? Object.keys(data[0]) : [],\n      useKeysAsHeaders: showHeaders,\n      useBom,\n      fieldSeparator: separator\n    });\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const csv = generateCsv(csvConfig)(data as any);\n    downloadCsv(csvConfig)(csv);\n  };\n\n  /**\n   * Copy chart to clipboard\n   */\n  const copyToClipboard = async (\n    chartConfig: EChartsOption,\n    theme: Appearance = 'light',\n    seriesColors?: Record<string, string>,\n    echartsOptions?: EChartsOption,\n    seriesOptions?: Record<string, unknown>\n  ): Promise<boolean> => {\n    isExporting.value = true;\n\n    try {\n      const dataUrl = getChartDataUrl(\n        chartConfig,\n        { type: 'png', pixelRatio: 2 },\n        theme,\n        seriesColors,\n        echartsOptions,\n        seriesOptions\n      );\n\n      if (!dataUrl) {\n        return false;\n      }\n\n      // Convert data URL to blob\n      const response = await fetch(dataUrl);\n      const blob = await response.blob();\n\n      // Use clipboard API\n      await navigator.clipboard.write([\n        new ClipboardItem({\n          [blob.type]: blob\n        })\n      ]);\n\n      return true;\n    } catch (error) {\n      console.error('Failed to copy to clipboard:', error);\n      return false;\n    } finally {\n      isExporting.value = false;\n    }\n  };\n\n  return {\n    isExporting,\n    exportAsPng,\n    exportAsJpeg,\n    exportAsCsv,\n    copyToClipboard,\n    getChartDataUrl\n  };\n}\n","/**\n * Vue 3 composable for tooltip formatting\n *\n */\n\nimport type { TooltipComponentFormatterCallbackParams } from 'echarts';\nimport type { FormatObject, XAxisType } from '../types';\nimport { formatValue, formatTitle } from '../utils/formatting';\n\nexport interface TooltipOptions {\n  /**\n   * Whether X and Y axes are swapped\n   */\n  swapXY?: boolean;\n\n  /**\n   * X-axis type\n   */\n  xType?: XAxisType;\n\n  /**\n   * Total series count\n   */\n  totalSeriesCount?: number;\n\n  /**\n   * Y-axis series count\n   */\n  yCount?: number;\n\n  /**\n   * Y2-axis series count\n   */\n  y2Count?: number;\n\n  /**\n   * X column name\n   */\n  xColumn?: string;\n\n  /**\n   * Y column name(s)\n   */\n  yColumn?: string | string[];\n\n  /**\n   * X format\n   */\n  xFormat?: FormatObject;\n\n  /**\n   * Y format\n   */\n  yFormat?: FormatObject;\n\n  /**\n   * Y2 format\n   */\n  y2Format?: FormatObject;\n\n  /**\n   * Custom tooltip title column\n   */\n  tooltipTitle?: string;\n}\n\nexport interface TooltipFormatterReturn {\n  /**\n   * Creates a tooltip formatter function for ECharts\n   */\n  createFormatter: (options: TooltipOptions) => (params: TooltipComponentFormatterCallbackParams) => string;\n\n  /**\n   * Default tooltip formatter\n   */\n  defaultFormatter: (params: TooltipComponentFormatterCallbackParams, options: TooltipOptions) => string;\n\n  /**\n   * Scatter/Bubble chart tooltip formatter\n   */\n  scatterFormatter: (params: TooltipComponentFormatterCallbackParams, options: TooltipOptions & {\n    size?: string;\n    sizeFormat?: FormatObject;\n  }) => string;\n}\n\n/**\n * Gets the Y-axis index for a given component index\n */\nfunction getYAxisIndex(componentIndex: number, yCount: number, y2Count: number): number {\n  // If we have y2 series, they come after the y series\n  if (y2Count > 0 && componentIndex >= yCount) {\n    return 1;\n  }\n  return 0;\n}\n\n/**\n * Main composable for tooltip formatting\n */\nexport function useTooltip(): TooltipFormatterReturn {\n  /**\n   * Default tooltip formatter (for line, bar, area charts)\n   */\n  const defaultFormatter = (\n    params: TooltipComponentFormatterCallbackParams,\n    options: TooltipOptions\n  ): string => {\n    const {\n      swapXY = false,\n      xType = 'category',\n      totalSeriesCount = 1,\n      yCount = 1,\n      y2Count = 0,\n      xColumn = 'x',\n      xFormat,\n      yFormat,\n      y2Format\n    } = options;\n\n    // Handle array of params\n    const paramsArray = Array.isArray(params) ? params : [params];\n    if (paramsArray.length === 0) return '';\n\n    let output = '';\n    const firstValue = paramsArray[0].value as unknown[] | undefined;\n    const xVal = firstValue?.[swapXY ? 1 : 0];\n\n    if (totalSeriesCount > 1) {\n      // Multi-series: add x value as title\n      output = `<span id=\"tooltip\" style='font-weight: 600;'>${formatValue(xVal, xFormat)}</span>`;\n\n      // Add each series value (in reverse order for proper stacking display)\n      for (let i = paramsArray.length - 1; i >= 0; i--) {\n        const param = paramsArray[i];\n        if (param.seriesName !== 'stackTotal') {\n          const paramValue = param.value as unknown[] | undefined;\n          const yVal = paramValue?.[swapXY ? 0 : 1];\n          const yAxisIndex = getYAxisIndex(param.componentIndex || 0, yCount, y2Count);\n          const format = yAxisIndex === 0 ? yFormat : y2Format;\n\n          output += `<br> <span style='font-size: 11px;'>${param.marker} ${param.seriesName}</span>`;\n          output += `<span style='float:right; margin-left: 10px; font-size: 12px;'>${formatValue(yVal, format)}</span>`;\n        }\n      }\n    } else if (xType === 'value') {\n      // Single-series with numerical x-axis\n      const valueArr = paramsArray[0].value as unknown[] | undefined;\n      const xValLocal = valueArr?.[swapXY ? 1 : 0];\n      const yVal = valueArr?.[swapXY ? 0 : 1];\n      const yCol = paramsArray[0].seriesName || '';\n\n      output = `<span id=\"tooltip\" style='font-weight: 600;'>${formatTitle(xColumn, xFormat)}: </span>`;\n      output += `<span style='float:right; margin-left: 10px;'>${formatValue(xValLocal, xFormat)}</span><br/>`;\n      output += `<span style='font-weight: 600;'>${formatTitle(yCol, yFormat)}: </span>`;\n      output += `<span style='float:right; margin-left: 10px;'>${formatValue(yVal, yFormat)}</span>`;\n    } else {\n      // Single series with categorical or date x-axis\n      const valueArr = paramsArray[0].value as unknown[] | undefined;\n      const xValLocal = valueArr?.[swapXY ? 1 : 0];\n      const yVal = valueArr?.[swapXY ? 0 : 1];\n      const yCol = paramsArray[0].seriesName || '';\n\n      output = `<span id=\"tooltip\" style='font-weight: 600;'>${formatValue(xValLocal, xFormat)}</span><br/>`;\n      output += `<span>${formatTitle(yCol, yFormat)}: </span>`;\n      output += `<span style='float:right; margin-left: 10px;'>${formatValue(yVal, yFormat)}</span>`;\n    }\n\n    return output;\n  };\n\n  /**\n   * Scatter/Bubble chart tooltip formatter\n   */\n  const scatterFormatter = (\n    params: TooltipComponentFormatterCallbackParams,\n    options: TooltipOptions & {\n      size?: string;\n      sizeFormat?: FormatObject;\n    }\n  ): string => {\n    const {\n      xColumn = 'x',\n      yColumn,\n      xFormat,\n      yFormat,\n      size,\n      sizeFormat,\n      tooltipTitle\n    } = options;\n\n    // Handle array or single param\n    const param = Array.isArray(params) ? params[0] : params;\n    if (!param || !param.value) return '';\n\n    const data = param.value as (number | string)[];\n    const xVal = data[0];\n    const yVal = data[1];\n    const sizeVal = size ? data[2] : undefined;\n    const labelVal = tooltipTitle ? data[size ? 3 : 2] : undefined;\n\n    let output = '';\n\n    // Title (label or series name)\n    if (labelVal !== undefined) {\n      output += `<span id=\"tooltip\" style='font-weight: 600;'>${labelVal}</span><br/>`;\n    } else if (param.seriesName) {\n      output += `<span id=\"tooltip\" style='font-weight: 600;'>${param.seriesName}</span><br/>`;\n    }\n\n    // X value\n    output += `<span>${formatTitle(xColumn, xFormat)}: </span>`;\n    output += `<span style='float:right; margin-left: 10px;'>${formatValue(xVal, xFormat)}</span><br/>`;\n\n    // Y value\n    const yColName = typeof yColumn === 'string' ? yColumn : (yColumn?.[0] || 'y');\n    output += `<span>${formatTitle(yColName, yFormat)}: </span>`;\n    output += `<span style='float:right; margin-left: 10px;'>${formatValue(yVal, yFormat)}</span>`;\n\n    // Size value (for bubble charts)\n    if (size && sizeVal !== undefined) {\n      output += `<br/><span>${formatTitle(size, sizeFormat)}: </span>`;\n      output += `<span style='float:right; margin-left: 10px;'>${formatValue(sizeVal, sizeFormat)}</span>`;\n    }\n\n    return output;\n  };\n\n  /**\n   * Creates a tooltip formatter function\n   */\n  const createFormatter = (\n    options: TooltipOptions\n  ): ((params: TooltipComponentFormatterCallbackParams) => string) => {\n    return (params: TooltipComponentFormatterCallbackParams) => {\n      return defaultFormatter(params, options);\n    };\n  };\n\n  return {\n    createFormatter,\n    defaultFormatter,\n    scatterFormatter\n  };\n}\n\n/**\n * Creates default tooltip configuration\n */\nexport function createTooltipConfig(options: TooltipOptions = {}): object {\n  const { createFormatter } = useTooltip();\n\n  return {\n    trigger: 'axis',\n    show: true,\n    formatter: createFormatter(options),\n    confine: true,\n    axisPointer: {\n      type: 'shadow'\n    },\n    extraCssText:\n      'box-shadow: 0 3px 6px rgba(0,0,0,.15); box-shadow: 0 2px 4px rgba(0,0,0,.12); z-index: 1; font-feature-settings: \"cv02\", \"tnum\";',\n    order: 'valueDesc'\n  };\n}\n","/**\n * Vue 3 composable for chart configuration building\n */\n\nimport { computed, type ComputedRef } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type {\n  BaseChartProps,\n  DataRecord,\n  XAxisType,\n  FormatObject,\n  ColumnUnitSummary,\n  SeriesConfig,\n  ColumnSummary\n} from '../types';\nimport { formatAxisValue, formatTitle, getFormatObjectFromString, lookupColumnFormat } from '../utils/formatting';\nimport { standardizeDateColumn } from '../utils/dateParsing';\nimport { createTooltipConfig } from './useTooltip';\n\nexport interface ChartConfigOptions extends BaseChartProps {\n  chartType?: string;\n  stacked100?: boolean;\n  stackType?: string;\n}\n\nexport interface UseChartConfigReturn {\n  /**\n   * Processed data\n   */\n  processedData: ComputedRef<DataRecord[]>;\n\n  /**\n   * Column summary information\n   */\n  columnSummary: ComputedRef<Record<string, ColumnSummary>>;\n\n  /**\n   * X-axis type (category, value, time)\n   */\n  xAxisType: ComputedRef<XAxisType>;\n\n  /**\n   * Base ECharts configuration\n   */\n  baseConfig: ComputedRef<EChartsOption>;\n\n  /**\n   * Format objects\n   */\n  formats: ComputedRef<{\n    x?: FormatObject;\n    y?: FormatObject;\n    y2?: FormatObject;\n    size?: FormatObject;\n  }>;\n\n  /**\n   * Unit summaries\n   */\n  unitSummaries: ComputedRef<{\n    x?: ColumnUnitSummary;\n    y?: ColumnUnitSummary;\n    y2?: ColumnUnitSummary;\n  }>;\n}\n\n/**\n * Gets column summary from data\n */\nexport function getColumnSummary(data: DataRecord[]): Record<string, ColumnSummary> {\n  if (!data || data.length === 0) return {};\n\n  const summary: Record<string, ColumnSummary> = {};\n  const firstRow = data[0];\n\n  for (const key of Object.keys(firstRow)) {\n    const values = data.map((d) => d[key]).filter((v) => v != null);\n    const sampleValue = values[0];\n\n    let type: 'number' | 'date' | 'string' | 'boolean' = 'string';\n    let columnUnitSummary: ColumnUnitSummary | undefined;\n\n    if (typeof sampleValue === 'number') {\n      type = 'number';\n      const numValues = values as number[];\n      const sorted = [...numValues].sort((a, b) => a - b);\n      const min = sorted[0];\n      const max = sorted[sorted.length - 1];\n      const median = sorted[Math.floor(sorted.length / 2)];\n      const maxDecimals = Math.max(\n        ...numValues.map((v) => {\n          const str = v.toString();\n          const decimalIndex = str.indexOf('.');\n          return decimalIndex >= 0 ? str.length - decimalIndex - 1 : 0;\n        })\n      );\n\n      columnUnitSummary = { min, max, median, maxDecimals, unitType: 'number' };\n    } else if (typeof sampleValue === 'boolean') {\n      type = 'boolean';\n    } else if (sampleValue instanceof Date) {\n      type = 'date';\n      columnUnitSummary = { min: 0, max: 0, median: 0, maxDecimals: 0, unitType: 'date' };\n    } else if (typeof sampleValue === 'string') {\n      // Check if it looks like a date\n      const dateAttempt = new Date(sampleValue);\n      if (!isNaN(dateAttempt.getTime()) && sampleValue.match(/\\d{4}-\\d{2}-\\d{2}/)) {\n        type = 'date';\n        columnUnitSummary = { min: 0, max: 0, median: 0, maxDecimals: 0, unitType: 'date' };\n      }\n    }\n\n    // Look up format based on column name\n    const format = lookupColumnFormat(\n      key,\n      { columnType: type },\n      columnUnitSummary\n    );\n\n    summary[key] = {\n      id: key,\n      title: formatTitle(key, format),\n      type,\n      format,\n      columnUnitSummary\n    };\n  }\n\n  return summary;\n}\n\n/**\n * Gets distinct values from a column\n */\nexport function getDistinctValues(data: DataRecord[], column: string): unknown[] {\n  const values = new Set(data.map((d) => d[column]));\n  return Array.from(values);\n}\n\n/**\n * Gets distinct count from a column\n */\nexport function getDistinctCount(data: DataRecord[], column: string): number {\n  return getDistinctValues(data, column).length;\n}\n\n/**\n * Sorts data by a column\n */\nexport function getSortedData(\n  data: DataRecord[],\n  column: string | string[],\n  ascending = true\n): DataRecord[] {\n  const sortColumn = Array.isArray(column) ? column[0] : column;\n  return [...data].sort((a, b) => {\n    const aVal = a[sortColumn];\n    const bVal = b[sortColumn];\n\n    if (aVal == null) return 1;\n    if (bVal == null) return -1;\n\n    if (typeof aVal === 'number' && typeof bVal === 'number') {\n      return ascending ? aVal - bVal : bVal - aVal;\n    }\n\n    const aStr = String(aVal);\n    const bStr = String(bVal);\n    return ascending ? aStr.localeCompare(bStr) : bStr.localeCompare(aStr);\n  });\n}\n\n/**\n * Main composable for chart configuration\n */\ninterface ChartConfigExtraOptions {\n  chartType?: string;\n  stacked100?: boolean;\n  xType?: string;\n}\n\nexport function useChartConfig(\n  props: BaseChartProps,\n  options: ChartConfigExtraOptions = {}\n): UseChartConfigReturn {\n  // Extract options (chartType and stacked100 reserved for future use)\n  const { xType: overrideXType } = options;\n  // Process data\n  const processedData = computed(() => {\n    let data = [...(props.data || [])];\n\n    // Standardize date columns\n    const colSummary = getColumnSummary(data);\n    const dateCols = Object.values(colSummary)\n      .filter((col) => col.type === 'date')\n      .map((col) => col.id);\n\n    for (const col of dateCols) {\n      data = standardizeDateColumn(data, col);\n    }\n\n    // Sort data if needed\n    if (props.sort !== false && props.x) {\n      const xType = colSummary[props.x]?.type;\n      if (xType === 'date' || xType === 'number') {\n        data = getSortedData(data, props.x, true);\n      } else if (props.y) {\n        data = getSortedData(data, props.y, false);\n      }\n    }\n\n    return data;\n  });\n\n  // Column summary\n  const columnSummary = computed(() => {\n    return getColumnSummary(processedData.value);\n  });\n\n  // X-axis type\n  const xAxisType = computed<XAxisType>(() => {\n    if (overrideXType) return overrideXType as XAxisType;\n    if (props.xType) return props.xType;\n    if (!props.x) return 'category';\n\n    const colType = columnSummary.value[props.x]?.type;\n    switch (colType) {\n      case 'number':\n        return 'value';\n      case 'date':\n        return 'time';\n      default:\n        return 'category';\n    }\n  });\n\n  // Format objects\n  const formats = computed(() => {\n    const result: {\n      x?: FormatObject;\n      y?: FormatObject;\n      y2?: FormatObject;\n      size?: FormatObject;\n    } = {};\n\n    if (props.x) {\n      if (props.xFmt) {\n        result.x = getFormatObjectFromString(props.xFmt, columnSummary.value[props.x]?.format?.valueType);\n      } else {\n        result.x = columnSummary.value[props.x]?.format;\n      }\n    }\n\n    const yCol = Array.isArray(props.y) ? props.y[0] : props.y;\n    if (yCol) {\n      if (props.yFmt) {\n        result.y = getFormatObjectFromString(props.yFmt, columnSummary.value[yCol]?.format?.valueType);\n      } else {\n        result.y = columnSummary.value[yCol]?.format;\n      }\n    }\n\n    const y2Col = Array.isArray(props.y2) ? props.y2[0] : props.y2;\n    if (y2Col) {\n      if (props.y2Fmt) {\n        result.y2 = getFormatObjectFromString(props.y2Fmt, columnSummary.value[y2Col]?.format?.valueType);\n      } else {\n        result.y2 = columnSummary.value[y2Col]?.format;\n      }\n    }\n\n    return result;\n  });\n\n  // Unit summaries\n  const unitSummaries = computed(() => {\n    const result: {\n      x?: ColumnUnitSummary;\n      y?: ColumnUnitSummary;\n      y2?: ColumnUnitSummary;\n    } = {};\n\n    if (props.x) {\n      result.x = columnSummary.value[props.x]?.columnUnitSummary;\n    }\n\n    const yCol = Array.isArray(props.y) ? props.y[0] : props.y;\n    if (yCol) {\n      result.y = columnSummary.value[yCol]?.columnUnitSummary;\n    }\n\n    const y2Col = Array.isArray(props.y2) ? props.y2[0] : props.y2;\n    if (y2Col) {\n      result.y2 = columnSummary.value[y2Col]?.columnUnitSummary;\n    }\n\n    return result;\n  });\n\n  // Calculate series counts\n  const yCount = computed(() => {\n    return Array.isArray(props.y) ? props.y.length : (props.y ? 1 : 0);\n  });\n\n  const y2Count = computed(() => {\n    return Array.isArray(props.y2) ? props.y2.length : (props.y2 ? 1 : 0);\n  });\n\n  const seriesCount = computed(() => {\n    const distinctSeries = props.series ? getDistinctCount(processedData.value, props.series) : 1;\n    return yCount.value * distinctSeries;\n  });\n\n  const totalSeriesCount = computed(() => {\n    return seriesCount.value + y2Count.value;\n  });\n\n  // Base configuration\n  const baseConfig = computed<EChartsOption>(() => {\n    const swapXY = props.swapXY || false;\n    const legend = props.legend ?? totalSeriesCount.value > 1;\n\n    // Calculate chart dimensions\n    // Chart area height is computed but not currently used in grid calculation\n    void (props.chartAreaHeight || 180);\n    const hasTitle = !!props.title;\n    const hasSubtitle = !!props.subtitle;\n    const hasLegend = legend;\n\n    const titleFontSize = 15;\n    const subtitleFontSize = 13;\n    const titleBoxPadding = 6 * (hasSubtitle ? 1 : 0);\n    const titleBoxHeight =\n      (hasTitle ? titleFontSize : 0) +\n      (hasSubtitle ? subtitleFontSize : 0) +\n      titleBoxPadding * Math.max(hasTitle ? 1 : 0, hasSubtitle ? 1 : 0);\n\n    const legendHeight = hasLegend ? 15 : 0;\n    const legendPaddingTop = 7 * Math.max(hasTitle ? 1 : 0, hasSubtitle ? 1 : 0);\n    const legendTop = titleBoxHeight + legendPaddingTop;\n\n    const chartAreaPaddingTop = 10;\n    const chartAreaPaddingBottom = 10;\n    const chartTop = legendTop + legendHeight + chartAreaPaddingTop;\n    const chartBottom = chartAreaPaddingBottom;\n\n    // Axis titles\n    const xAxisTitle = props.xAxisTitle === true\n      ? formatTitle(props.x || '', formats.value.x)\n      : (props.xAxisTitle === false ? '' : (props.xAxisTitle || ''));\n\n    const yAxisTitle = props.yAxisTitle === true\n      ? formatTitle(Array.isArray(props.y) ? '' : (props.y || ''), formats.value.y)\n      : (props.yAxisTitle === false ? '' : (props.yAxisTitle || ''));\n\n    // Extra bottom padding needed when x-axis has a title\n    const xAxisTitlePadding = xAxisTitle ? 25 : 0;\n\n    // Debug logging\n    console.log('[useChartConfig] Config:', {\n      xAxisTitle,\n      yAxisTitle,\n      legend,\n      hasLegend,\n      totalSeriesCount: totalSeriesCount.value,\n      swapXY,\n      propsXAxisTitle: props.xAxisTitle,\n      propsYAxisTitle: props.yAxisTitle\n    });\n\n    // Build axis config\n    const xAxisConfig = swapXY\n      ? {\n          type: (props.yLog ? 'log' : 'value') as 'log' | 'value',\n          logBase: props.yLogBase || 10,\n          position: 'top' as const,\n          axisLabel: {\n            show: props.yAxisLabels !== false,\n            hideOverlap: true,\n            formatter: (value: number) => formatAxisValue(value, formats.value.y, unitSummaries.value.y)\n          },\n          min: props.yMin,\n          max: props.yMax,\n          scale: props.yScale,\n          splitLine: { show: props.yGridlines !== false },\n          axisLine: { show: props.yBaseline, onZero: false },\n          axisTick: { show: props.yTickMarks }\n        }\n      : {\n          type: xAxisType.value,\n          min: props.xMin,\n          max: props.xMax,\n          splitLine: { show: props.xGridlines },\n          axisLine: { show: props.xBaseline !== false },\n          axisTick: { show: props.xTickMarks },\n          axisLabel: {\n            show: props.xAxisLabels !== false,\n            hideOverlap: true,\n            formatter: xAxisType.value === 'time' || xAxisType.value === 'category'\n              ? undefined\n              : (value: number) => formatAxisValue(value, formats.value.x, unitSummaries.value.x)\n          },\n          name: xAxisTitle,\n          nameLocation: 'middle' as const,\n          nameGap: 30\n        };\n\n    const yAxisConfig = swapXY\n      ? {\n          type: 'category' as const,\n          inverse: true,\n          splitLine: { show: props.xGridlines },\n          axisLine: { show: props.xBaseline !== false },\n          axisTick: { show: props.xTickMarks },\n          axisLabel: { show: props.xAxisLabels !== false, hideOverlap: true }\n        }\n      : {\n          type: (props.yLog ? 'log' : 'value') as 'log' | 'value',\n          logBase: props.yLogBase || 10,\n          splitLine: { show: props.yGridlines !== false },\n          axisLine: { show: props.yBaseline, onZero: false },\n          axisTick: { show: props.yTickMarks },\n          axisLabel: {\n            show: props.yAxisLabels !== false,\n            hideOverlap: true,\n            formatter: (value: number) => formatAxisValue(value, formats.value.y, unitSummaries.value.y)\n          },\n          name: yAxisTitle,\n          nameLocation: 'end' as const,\n          nameTextStyle: { align: 'left' as const, verticalAlign: 'top' as const, padding: [0, 5, 0, 0] as [number, number, number, number] },\n          min: props.yMin,\n          max: props.yMax,\n          scale: props.yScale,\n          boundaryGap: ['0%', '1%'] as [string, string]\n        };\n\n    // Tooltip config\n    const tooltipConfig = createTooltipConfig({\n      swapXY,\n      xType: xAxisType.value,\n      totalSeriesCount: totalSeriesCount.value,\n      yCount: yCount.value,\n      y2Count: y2Count.value,\n      xColumn: props.x,\n      yColumn: props.y,\n      xFormat: formats.value.x,\n      yFormat: formats.value.y,\n      y2Format: formats.value.y2,\n      tooltipTitle: props.tooltipTitle\n    });\n\n    return {\n      title: {\n        text: props.title,\n        subtext: props.subtitle\n      },\n      tooltip: tooltipConfig,\n      legend: {\n        show: legend,\n        type: 'scroll' as const,\n        top: legendTop,\n        padding: [0, 0, 0, 0] as [number, number, number, number]\n        // Don't set data - let ECharts auto-detect from series names\n      },\n      grid: {\n        left: props.leftPadding || (swapXY ? '1%' : '0.8%'),\n        right: props.rightPadding || (swapXY ? '4%' : '3%'),\n        bottom: chartBottom + xAxisTitlePadding,\n        top: chartTop,\n        containLabel: true\n      },\n      xAxis: xAxisConfig,\n      yAxis: yAxisConfig,\n      series: [],\n      animation: true\n    };\n  });\n\n  return {\n    processedData,\n    columnSummary,\n    xAxisType,\n    baseConfig,\n    formats,\n    unitSummaries\n  };\n}\n\n/**\n * Generates series configuration from data\n */\nexport function getSeriesConfig(\n  data: DataRecord[],\n  x: string,\n  y: string | string[],\n  series: string | undefined,\n  swapXY: boolean,\n  baseConfig: Partial<SeriesConfig>,\n  columnSummary: Record<string, ColumnSummary>,\n  options: {\n    xMismatch?: boolean;\n    size?: string;\n    tooltipTitle?: string;\n    y2?: string | string[];\n    seriesOrder?: string[];\n    seriesLabelFmt?: string;\n  } = {}\n): SeriesConfig[] {\n  const {\n    xMismatch = false,\n    size,\n    tooltipTitle,\n    y2,\n    seriesOrder\n  } = options;\n\n  const seriesConfigs: SeriesConfig[] = [];\n\n  // Combine y and y2 columns with their axis indices\n  const yList: Array<[string, number]> = [];\n  const yArray = Array.isArray(y) ? y : (y ? [y] : []);\n  const y2Array = Array.isArray(y2) ? y2 : (y2 ? [y2] : []);\n\n  yArray.forEach((col) => yList.push([col, 0]));\n  y2Array.forEach((col) => yList.push([col, 1]));\n\n  // Generate series config\n  if (series && yList.length === 1) {\n    // Series column with single y column\n    const distinctValues = getDistinctValues(data, series);\n\n    for (const seriesValue of distinctValues) {\n      const filteredData = data.filter((d) => d[series] === seriesValue);\n      const seriesData = filteredData.map((d) => {\n        const xVal = xMismatch ? String(d[x]) : d[x];\n        const yVal = d[yList[0][0]];\n        const point = swapXY ? [yVal, xVal] : [xVal, yVal];\n\n        if (size) point.push(d[size]);\n        if (tooltipTitle) point.push(d[tooltipTitle]);\n\n        return point;\n      });\n\n      seriesConfigs.push({\n        name: String(seriesValue ?? 'null'),\n        data: seriesData,\n        yAxisIndex: yList[0][1],\n        ...baseConfig\n      });\n    }\n  } else if (yList.length > 1) {\n    // Multiple y columns\n    for (const [yCol, yAxisIndex] of yList) {\n      const seriesData = data.map((d) => {\n        const xVal = xMismatch ? String(d[x]) : d[x];\n        const yVal = d[yCol];\n        const point = swapXY ? [yVal, xVal] : [xVal, yVal];\n\n        if (size) point.push(d[size]);\n        if (tooltipTitle) point.push(d[tooltipTitle]);\n\n        return point;\n      });\n\n      seriesConfigs.push({\n        name: columnSummary[yCol]?.title || yCol,\n        data: seriesData,\n        yAxisIndex,\n        ...baseConfig\n      });\n    }\n  } else if (yList.length === 1) {\n    // Single y column\n    const seriesData = data.map((d) => {\n      const xVal = xMismatch ? String(d[x]) : d[x];\n      const yVal = d[yList[0][0]];\n      const point = swapXY ? [yVal, xVal] : [xVal, yVal];\n\n      if (size) point.push(d[size]);\n      if (tooltipTitle) point.push(d[tooltipTitle]);\n\n      return point;\n    });\n\n    seriesConfigs.push({\n      name: columnSummary[yList[0][0]]?.title || yList[0][0],\n      data: seriesData,\n      yAxisIndex: yList[0][1],\n      ...baseConfig\n    });\n  }\n\n  // Apply series order\n  if (seriesOrder) {\n    seriesConfigs.sort((a, b) => seriesOrder.indexOf(a.name) - seriesOrder.indexOf(b.name));\n  }\n\n  return seriesConfigs;\n}\n","/**\n * Vue 3 composable for converting structured interactive feature props to ECharts config\n */\n\nimport { computed, toValue, type ComputedRef, type MaybeRefOrGetter } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type {\n  ZoomProp,\n  ZoomConfig,\n  ToolboxProp,\n  ToolboxConfig,\n  BrushProp,\n  BrushConfig,\n  AnimationProp,\n  AnimationConfig,\n  TooltipProp,\n  TooltipConfig,\n  ToolboxPosition\n} from '../types';\n\nexport interface InteractiveFeaturesOptions {\n  zoom?: MaybeRefOrGetter<ZoomProp | undefined>;\n  toolbox?: MaybeRefOrGetter<ToolboxProp | undefined>;\n  brush?: MaybeRefOrGetter<BrushProp | undefined>;\n  animation?: MaybeRefOrGetter<AnimationProp | undefined>;\n  tooltip?: MaybeRefOrGetter<TooltipProp | undefined>;\n  swapXY?: MaybeRefOrGetter<boolean | undefined>;\n  chartType?: 'line' | 'bar' | 'area' | 'scatter';\n}\n\nexport interface UseInteractiveFeaturesReturn {\n  dataZoomConfig: ComputedRef<EChartsOption['dataZoom']>;\n  toolboxConfig: ComputedRef<Record<string, unknown> | undefined>;\n  brushConfig: ComputedRef<Record<string, unknown> | undefined>;\n  animationConfig: ComputedRef<Partial<EChartsOption>>;\n  tooltipBaseConfig: ComputedRef<Record<string, unknown>>;\n  interactiveConfig: ComputedRef<Partial<EChartsOption>>;\n}\n\n/**\n * Default configurations when props are set to `true`\n */\nconst ZOOM_DEFAULTS: ZoomConfig = {\n  type: 'slider',\n  axis: 'x',\n  start: 0,\n  end: 100,\n  minSpan: 1,\n  maxSpan: 100,\n  showDetail: false,\n  height: 30,\n  zoomLock: false,\n  realtime: true\n};\n\nconst TOOLBOX_DEFAULTS: ToolboxConfig = {\n  position: 'top-right',\n  orient: 'horizontal',\n  iconSize: 15,\n  itemGap: 10,\n  saveAsImage: true,\n  restore: true\n};\n\nconst BRUSH_DEFAULTS: BrushConfig = {\n  type: ['rect', 'polygon', 'lineX', 'lineY'],\n  defaultType: 'rect',\n  mode: 'single',\n  toolbox: true,\n  outOfBrush: { opacity: 0.3 }\n};\n\nconst ANIMATION_DEFAULTS: AnimationConfig = {\n  enabled: true,\n  duration: 1000,\n  durationUpdate: 500,\n  easing: 'cubicOut',\n  delay: 0,\n  threshold: 2000\n};\n\nconst TOOLTIP_DEFAULTS: TooltipConfig = {\n  enabled: true,\n  trigger: 'axis',\n  axisPointer: 'shadow',\n  showSeriesMarker: true,\n  confine: true,\n  followMouse: false,\n  order: 'desc'\n};\n\n/**\n * Convert toolbox position to ECharts left/right/top/bottom\n */\nfunction getToolboxPositionConfig(position: ToolboxPosition = 'top-right'): Record<string, number | string> {\n  switch (position) {\n    case 'top-left':\n      return { left: 10, top: 10 };\n    case 'top-right':\n      return { right: 10, top: 10 };\n    case 'bottom-left':\n      return { left: 10, bottom: 10 };\n    case 'bottom-right':\n      return { right: 10, bottom: 10 };\n    default:\n      return { right: 10, top: 10 };\n  }\n}\n\n/**\n * Main composable for interactive chart features\n * All options can be refs, getters, or plain values for reactivity\n */\nexport function useInteractiveFeatures(options: InteractiveFeaturesOptions): UseInteractiveFeaturesReturn {\n  const { chartType } = options;\n\n  /**\n   * DataZoom configuration\n   */\n  const dataZoomConfig = computed<EChartsOption['dataZoom']>(() => {\n    const zoomProp = toValue(options.zoom);\n    const swapXY = toValue(options.swapXY) || false;\n\n    if (!zoomProp) return undefined;\n\n    const config: ZoomConfig = zoomProp === true\n      ? { ...ZOOM_DEFAULTS }\n      : { ...ZOOM_DEFAULTS, ...zoomProp };\n\n    const zoomComponents: EChartsOption['dataZoom'] = [];\n    const xAxisKey = swapXY ? 'yAxisIndex' : 'xAxisIndex';\n    const yAxisKey = swapXY ? 'xAxisIndex' : 'yAxisIndex';\n\n    // Helper to add zoom components for an axis\n    const addAxisZoom = (axisKey: string, isY: boolean) => {\n      const isVertical = (isY && !swapXY) || (!isY && swapXY);\n\n      if (config.type === 'slider' || config.type === 'both') {\n        zoomComponents.push({\n          type: 'slider',\n          [axisKey]: 0,\n          start: config.start,\n          end: config.end,\n          minSpan: config.minSpan,\n          maxSpan: config.maxSpan,\n          showDetail: config.showDetail,\n          zoomLock: config.zoomLock,\n          realtime: config.realtime,\n          ...(isVertical\n            ? { right: 10, width: config.height || 30 }\n            : { bottom: 10, height: config.height || 30 })\n        });\n      }\n\n      if (config.type === 'inside' || config.type === 'both') {\n        zoomComponents.push({\n          type: 'inside',\n          [axisKey]: 0,\n          start: config.start,\n          end: config.end,\n          minSpan: config.minSpan,\n          maxSpan: config.maxSpan,\n          zoomLock: config.zoomLock\n        });\n      }\n    };\n\n    // Add zoom for configured axes\n    if (config.axis === 'x' || config.axis === 'both') {\n      addAxisZoom(xAxisKey, false);\n    }\n    if (config.axis === 'y' || config.axis === 'both') {\n      addAxisZoom(yAxisKey, true);\n    }\n\n    return zoomComponents.length > 0 ? zoomComponents : undefined;\n  });\n\n  /**\n   * Toolbox configuration\n   */\n  const toolboxConfig = computed<Record<string, unknown> | undefined>(() => {\n    const toolboxProp = toValue(options.toolbox);\n\n    if (!toolboxProp) return undefined;\n\n    const config: ToolboxConfig = toolboxProp === true\n      ? { ...TOOLBOX_DEFAULTS }\n      : { ...TOOLBOX_DEFAULTS, ...toolboxProp };\n\n    const positionConfig = getToolboxPositionConfig(config.position);\n    const feature: Record<string, unknown> = {};\n\n    // Save as image\n    if (config.saveAsImage) {\n      const saveConfig = config.saveAsImage === true ? {} : config.saveAsImage;\n      feature.saveAsImage = {\n        type: saveConfig.type || 'png',\n        pixelRatio: saveConfig.pixelRatio || 1,\n        name: saveConfig.name,\n        title: 'Save'\n      };\n    }\n\n    // Data zoom - enables area selection zoom in the toolbox\n    if (config.dataZoom) {\n      feature.dataZoom = {\n        xAxisIndex: 0,      // Enable zoom on first X axis\n        yAxisIndex: 'none', // Don't zoom Y axis (keeps proportions)\n        title: { zoom: 'Zoom', back: 'Reset' }\n      };\n    }\n\n    // Restore\n    if (config.restore) {\n      feature.restore = { title: 'Restore' };\n    }\n\n    // Data view\n    if (config.dataView) {\n      const viewConfig = config.dataView === true ? {} : config.dataView;\n      feature.dataView = {\n        readOnly: viewConfig.readOnly ?? false,\n        title: 'Data'\n      };\n    }\n\n    // Magic type\n    if (config.magicType) {\n      const magicConfig = config.magicType === true\n        ? { type: ['line', 'bar'] }\n        : config.magicType;\n      feature.magicType = {\n        type: magicConfig.type,\n        title: {\n          line: 'Line',\n          bar: 'Bar',\n          stack: 'Stack'\n        }\n      };\n    }\n\n    return {\n      show: true,\n      ...positionConfig,\n      orient: config.orient || 'horizontal',\n      itemSize: config.iconSize || 15,\n      itemGap: config.itemGap || 10,\n      feature\n    };\n  });\n\n  /**\n   * Brush configuration\n   */\n  const brushConfig = computed<Record<string, unknown> | undefined>(() => {\n    const brushProp = toValue(options.brush);\n\n    if (!brushProp) return undefined;\n\n    const config: BrushConfig = brushProp === true\n      ? { ...BRUSH_DEFAULTS }\n      : { ...BRUSH_DEFAULTS, ...brushProp };\n\n    const brushTypes = Array.isArray(config.type) ? config.type : (config.type ? [config.type] : ['rect']);\n\n    return {\n      toolbox: brushTypes.filter(t => !['keep', 'clear'].includes(t)) as Array<'rect' | 'polygon' | 'lineX' | 'lineY'>,\n      brushType: config.defaultType || 'rect',\n      brushMode: config.mode || 'single',\n      outOfBrush: {\n        colorAlpha: config.outOfBrush?.opacity ?? 0.3\n      }\n    };\n  });\n\n  /**\n   * Animation configuration\n   */\n  const animationConfig = computed<Partial<EChartsOption>>(() => {\n    const animationProp = toValue(options.animation);\n\n    // If explicitly false, disable animation\n    if (animationProp === false) {\n      return { animation: false };\n    }\n\n    // If not set, return empty (use ECharts defaults)\n    if (animationProp === undefined) {\n      return {};\n    }\n\n    const config: AnimationConfig = animationProp === true\n      ? { ...ANIMATION_DEFAULTS }\n      : { ...ANIMATION_DEFAULTS, ...animationProp };\n\n    if (config.enabled === false) {\n      return { animation: false };\n    }\n\n    return {\n      animation: true,\n      animationDuration: config.duration,\n      animationDurationUpdate: config.durationUpdate,\n      animationEasing: config.easing,\n      animationDelay: config.delay,\n      animationThreshold: config.threshold\n    };\n  });\n\n  /**\n   * Tooltip base configuration\n   */\n  const tooltipBaseConfig = computed<Record<string, unknown>>(() => {\n    const tooltipProp = toValue(options.tooltip);\n\n    // If explicitly false, disable tooltip\n    if (tooltipProp === false) {\n      return { show: false };\n    }\n\n    // If not set, return empty (use chart component defaults)\n    if (tooltipProp === undefined) {\n      return {};\n    }\n\n    const config: TooltipConfig = tooltipProp === true\n      ? { ...TOOLTIP_DEFAULTS }\n      : { ...TOOLTIP_DEFAULTS, ...tooltipProp };\n\n    if (config.enabled === false) {\n      return { show: false };\n    }\n\n    // Determine default trigger based on chart type\n    const defaultTrigger = chartType === 'scatter' ? 'item' : 'axis';\n    const trigger = config.trigger ?? defaultTrigger;\n\n    const tooltipConfig: Record<string, unknown> = {\n      show: true,\n      trigger,\n      confine: config.confine,\n      enterable: config.followMouse ? false : true\n    };\n\n    // Axis pointer settings (only for axis trigger)\n    if (trigger === 'axis' && config.axisPointer && config.axisPointer !== 'none') {\n      tooltipConfig.axisPointer = {\n        type: config.axisPointer\n      };\n    }\n\n    // Order setting\n    if (config.order && config.order !== 'none') {\n      tooltipConfig.order = config.order === 'asc' ? 'valueAsc' : 'valueDesc';\n    }\n\n    // Custom styling\n    if (config.backgroundColor) {\n      tooltipConfig.backgroundColor = config.backgroundColor;\n    }\n    if (config.borderColor) {\n      tooltipConfig.borderColor = config.borderColor;\n    }\n    if (config.textColor) {\n      tooltipConfig.textStyle = { color: config.textColor };\n    }\n\n    return tooltipConfig;\n  });\n\n  /**\n   * Combined interactive configuration\n   */\n  const interactiveConfig = computed<Partial<EChartsOption>>(() => {\n    const config: Partial<EChartsOption> = {};\n\n    // Add dataZoom\n    const dataZoom = dataZoomConfig.value;\n    if (dataZoom) {\n      config.dataZoom = dataZoom;\n    }\n\n    // Add toolbox\n    const toolbox = toolboxConfig.value;\n    if (toolbox) {\n      config.toolbox = toolbox;\n    }\n\n    // Add brush\n    const brush = brushConfig.value;\n    if (brush) {\n      config.brush = brush;\n    }\n\n    // Add animation settings\n    const animation = animationConfig.value;\n    Object.assign(config, animation);\n\n    return config;\n  });\n\n  return {\n    dataZoomConfig,\n    toolboxConfig,\n    brushConfig,\n    animationConfig,\n    tooltipBaseConfig,\n    interactiveConfig\n  };\n}\n","<script setup lang=\"ts\">\n/**\n * Base ECharts wrapper component\n * Handles chart initialization, resize, and theme switching\n */\n\nimport { ref, watch, onMounted, onUnmounted, shallowRef } from 'vue';\nimport type { EChartsOption, ECharts } from 'echarts';\nimport * as echarts from 'echarts';\nimport debounce from 'debounce';\nimport type { Appearance, ChartRenderer } from '../../types';\nimport { defaultThemeLight, defaultThemeDark } from '../../themes/echartsThemes';\nimport { applySeriesColors, applyEchartsOptions, applySeriesOptions } from '../../composables/useECharts';\n\nconst ANIMATION_DURATION = 500;\n\n// Register themes once\nlet themesRegistered = false;\nfunction registerThemes(): void {\n  if (themesRegistered) return;\n  echarts.registerTheme('light', defaultThemeLight);\n  echarts.registerTheme('dark', defaultThemeDark);\n  themesRegistered = true;\n}\n\ninterface Props {\n  config: EChartsOption;\n  height?: string;\n  width?: string;\n  theme?: Appearance;\n  renderer?: ChartRenderer;\n  connectGroup?: string;\n  seriesColors?: Record<string, string>;\n  echartsOptions?: EChartsOption;\n  seriesOptions?: Record<string, unknown>;\n  showAllXAxisLabels?: boolean;\n  swapXY?: boolean;\n  xAxisLabelOverflow?: 'break' | 'truncate';\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  height: '291px',\n  width: '100%',\n  theme: 'light',\n  renderer: 'canvas'\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n  (e: 'init', chart: ECharts): void;\n  (e: 'dispose'): void;\n}>();\n\nconst containerRef = ref<HTMLElement | null>(null);\nconst chartInstance = shallowRef<ECharts | null>(null);\nconst hovering = ref(false);\nconst isFirstRender = ref(true);\n\n// Check if we should use SVG (iOS large canvas workaround)\nfunction shouldUseSvg(container: HTMLElement): boolean {\n  const isIOS = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(\n    navigator.platform\n  );\n  return isIOS && container.clientWidth * 3 * container.clientHeight * 3 > 16777215;\n}\n\n// Initialize chart\nfunction initChart(): void {\n  if (!containerRef.value) return;\n\n  registerThemes();\n\n  // Dispose existing instance\n  if (chartInstance.value) {\n    chartInstance.value.dispose();\n  }\n\n  // Reset first render flag when creating a new chart instance\n  isFirstRender.value = true;\n\n  const useRenderer = shouldUseSvg(containerRef.value) ? 'svg' : props.renderer;\n  const chart = echarts.init(containerRef.value, props.theme, {\n    renderer: useRenderer\n  });\n\n  chartInstance.value = chart;\n\n  // Set up connect group\n  if (props.connectGroup) {\n    chart.group = props.connectGroup;\n    echarts.connect(props.connectGroup);\n  }\n\n  // Click event handler\n  chart.on('click', (params) => {\n    emit('click', params);\n  });\n\n  emit('init', chart);\n}\n\n// Update chart options\nfunction updateChart(): void {\n  if (!chartInstance.value) return;\n\n  const config = { ...props.config };\n\n  // Debug logging\n  console.log('[EChartsBase] updateChart called:', {\n    xAxis: config.xAxis,\n    xAxisName: (config.xAxis as Record<string, unknown>)?.name,\n    legend: config.legend,\n    legendShow: (config.legend as Record<string, unknown>)?.show,\n    isFirstRender: isFirstRender.value\n  });\n\n  // Ensure series is a valid array with properly typed entries\n  // Filter out null/undefined entries AND entries without a valid 'type' property\n  if (Array.isArray(config.series)) {\n    config.series = config.series.filter((s): s is NonNullable<typeof s> => {\n      if (s == null) return false;\n      if (typeof s !== 'object') return false;\n      // ECharts requires each series to have a 'type' property\n      if (!('type' in s) || s.type == null) return false;\n      return true;\n    });\n  } else {\n    config.series = [];\n  }\n\n  // Skip update if no valid series data yet\n  if (config.series.length === 0) {\n    return;\n  }\n\n  // For first render, use notMerge to ensure clean initial state\n  // For subsequent updates, use notMerge: false to preserve toolbox internal\n  // state (required for restore/dataZoom to work)\n  const setOptionOpts = { notMerge: isFirstRender.value };\n\n  chartInstance.value.setOption(\n    {\n      ...config,\n      animationDuration: ANIMATION_DURATION,\n      animationDurationUpdate: ANIMATION_DURATION\n    },\n    setOptionOpts\n  );\n\n  isFirstRender.value = false;\n\n  if (props.seriesColors) {\n    applySeriesColors(chartInstance.value, props.seriesColors);\n  }\n\n  if (props.echartsOptions) {\n    applyEchartsOptions(chartInstance.value, props.echartsOptions);\n  }\n\n  if (props.seriesOptions) {\n    applySeriesOptions(chartInstance.value, props.seriesOptions, props.config);\n  }\n\n  updateLabelWidths();\n}\n\n// Update label widths for category axes\nfunction updateLabelWidths(): void {\n  if (!chartInstance.value || !props.showAllXAxisLabels || props.swapXY) return;\n\n  const prevOption = chartInstance.value.getOption() as EChartsOption;\n  if (!prevOption || !prevOption.series) return;\n\n  const series = prevOption.series as Array<{ data?: Array<[unknown, unknown]> }>;\n  const distinctXValues = new Set(\n    series.flatMap((s) => s.data?.map((d) => d[0]) || [])\n  );\n\n  const modConst = 4 / 5;\n  const clientWidth = containerRef.value?.clientWidth ?? 0;\n\n  chartInstance.value.setOption({\n    xAxis: {\n      axisLabel: {\n        interval: 0,\n        overflow: props.xAxisLabelOverflow || 'truncate',\n        width: (clientWidth * modConst) / distinctXValues.size\n      }\n    }\n  });\n}\n\n// Resize handler\nconst resize = debounce(() => {\n  if (!chartInstance.value) return;\n\n  chartInstance.value.resize({\n    animation: {\n      duration: ANIMATION_DURATION\n    }\n  });\n\n  updateLabelWidths();\n}, 100);\n\n// ResizeObserver\nlet resizeObserver: ResizeObserver | null = null;\n\nonMounted(() => {\n  initChart();\n  updateChart();\n\n  // Set up resize observer\n  const parentElement = containerRef.value?.parentElement;\n  if (window.ResizeObserver && parentElement) {\n    resizeObserver = new ResizeObserver(resize);\n    resizeObserver.observe(parentElement);\n  } else {\n    window.addEventListener('resize', resize);\n  }\n});\n\nonUnmounted(() => {\n  if (resizeObserver) {\n    resizeObserver.disconnect();\n  } else {\n    window.removeEventListener('resize', resize);\n  }\n\n  if (chartInstance.value) {\n    chartInstance.value.dispose();\n    emit('dispose');\n  }\n});\n\n// Watch for config changes\nwatch(\n  () => props.config,\n  () => {\n    updateChart();\n  },\n  { deep: true }\n);\n\n// Watch for theme changes\nwatch(\n  () => props.theme,\n  () => {\n    initChart();\n    updateChart();\n  }\n);\n\n// Expose chart instance\ndefineExpose({\n  getChart: () => chartInstance.value,\n  resize,\n  updateChart\n});\n</script>\n\n<template>\n  <div\n    class=\"echarts-base-container\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <div\n      ref=\"containerRef\"\n      class=\"echarts-base\"\n      :style=\"{\n        height: props.height,\n        width: props.width\n      }\"\n    />\n    <slot name=\"footer\" :hovering=\"hovering\" />\n  </div>\n</template>\n\n<style scoped>\n.echarts-base-container {\n  margin-top: 0.5rem;\n  margin-bottom: 0.75rem;\n}\n\n.echarts-base {\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n}\n\n@media print {\n  .echarts-base {\n    break-inside: avoid;\n    -moz-column-break-inside: avoid;\n  }\n\n  .echarts-base-container {\n    padding: 0;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\n/**\n * ChartProvider component\n * Provides chart context to child components via provide/inject\n */\n\nimport { provide, reactive, computed } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { ChartContext } from '../../types';\nimport { chartPropsKey, chartConfigKey, seriesConfigKey } from '../../symbols/injectionKeys';\nimport { useTheme, provideTheme } from '../../composables/useTheme';\n\ninterface Props {\n  data?: Record<string, unknown>[];\n  x?: string;\n  y?: string | string[];\n  y2?: string | string[];\n  series?: string;\n  swapXY?: boolean;\n  xType?: 'category' | 'value' | 'time';\n  xFormat?: object;\n  yFormat?: object;\n  y2Format?: object;\n  sizeFormat?: object;\n  xMismatch?: boolean;\n  columnSummary?: Record<string, unknown>;\n  xAxisTitle?: string;\n  yAxisTitle?: string;\n  y2AxisTitle?: string;\n  tooltipTitle?: string;\n  chartAreaHeight?: number;\n  chartType?: string;\n  yCount?: number;\n  y2Count?: number;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  data: () => [],\n  swapXY: false,\n  xType: 'category',\n  xMismatch: false,\n  chartType: 'Chart',\n  yCount: 1,\n  y2Count: 0\n});\n\n// Set up theme\nconst themeReturn = useTheme();\nprovideTheme(themeReturn);\n\n// Create reactive chart context\nconst chartContext = reactive<ChartContext>({\n  data: props.data,\n  x: props.x,\n  y: props.y,\n  y2: props.y2,\n  series: props.series,\n  swapXY: props.swapXY,\n  xType: props.xType,\n  xFormat: props.xFormat,\n  yFormat: props.yFormat,\n  y2Format: props.y2Format,\n  sizeFormat: props.sizeFormat,\n  xMismatch: props.xMismatch,\n  columnSummary: props.columnSummary || {},\n  xAxisTitle: props.xAxisTitle,\n  yAxisTitle: props.yAxisTitle,\n  y2AxisTitle: props.y2AxisTitle,\n  tooltipTitle: props.tooltipTitle,\n  chartAreaHeight: props.chartAreaHeight,\n  chartType: props.chartType,\n  yCount: props.yCount,\n  y2Count: props.y2Count\n});\n\n// Create reactive chart config\nconst chartConfig = reactive<EChartsOption>({\n  series: []\n});\n\n// Series management\nconst seriesMap = new Map<string, object>();\n\nconst addSeries = (series: EChartsOption['series']) => {\n  if (!series) return;\n  const seriesArray = Array.isArray(series) ? series : [series];\n  for (const s of seriesArray) {\n    if (s && typeof s === 'object' && 'name' in s) {\n      seriesMap.set(s.name as string, s);\n    }\n  }\n  chartConfig.series = Array.from(seriesMap.values());\n};\n\nconst removeSeries = (name: string) => {\n  seriesMap.delete(name);\n  chartConfig.series = Array.from(seriesMap.values());\n};\n\nconst updateSeries = (name: string, config: Partial<EChartsOption['series']>) => {\n  const existing = seriesMap.get(name);\n  if (existing) {\n    seriesMap.set(name, { ...existing, ...config });\n    chartConfig.series = Array.from(seriesMap.values());\n  }\n};\n\n// Provide context to children\nprovide(chartPropsKey, computed(() => chartContext));\n// @ts-expect-error - Complex type incompatibility with ECharts nested types\nprovide(chartConfigKey, computed(() => chartConfig));\nprovide(seriesConfigKey, {\n  addSeries,\n  removeSeries,\n  updateSeries\n});\n\n// Expose for parent access (cast to simpler types to avoid declaration emit issues)\ndefineExpose({\n  chartContext,\n  chartConfig: chartConfig as Record<string, unknown>,\n  addSeries,\n  removeSeries,\n  updateSeries\n});\n</script>\n\n<template>\n  <slot\n    :context=\"chartContext\"\n    :config=\"chartConfig as Record<string, unknown>\"\n    :theme=\"themeReturn\"\n  />\n</template>\n","<script setup lang=\"ts\">\n/**\n * ChartFooter component\n * Displays download buttons for chart image and data\n */\n\n// Vue types\nimport type { EChartsOption } from 'echarts';\nimport type { DataRecord, Appearance } from '../../types';\nimport { useExport } from '../../composables/useExport';\n\ninterface Props {\n  config: EChartsOption;\n  data?: DataRecord[];\n  queryId?: string;\n  chartTitle?: string;\n  theme?: Appearance;\n  seriesColors?: Record<string, string>;\n  echartsOptions?: EChartsOption;\n  seriesOptions?: Record<string, unknown>;\n  downloadableData?: boolean;\n  downloadableImage?: boolean;\n  visible?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  downloadableData: true,\n  downloadableImage: true,\n  visible: false,\n  theme: 'light'\n});\n\nconst { exportAsPng, exportAsCsv, isExporting } = useExport();\n\nconst handleSaveImage = async () => {\n  await exportAsPng(\n    props.config,\n    {\n      filename: props.chartTitle || props.queryId || 'chart',\n      pixelRatio: 3,\n      width: 666\n    },\n    props.theme,\n    props.seriesColors,\n    props.echartsOptions,\n    props.seriesOptions\n  );\n};\n\nconst handleDownloadData = () => {\n  if (props.data) {\n    exportAsCsv(props.data, {\n      filename: props.queryId || 'data'\n    });\n  }\n};\n</script>\n\n<template>\n  <div\n    v-if=\"downloadableData || downloadableImage\"\n    class=\"chart-footer\"\n    :class=\"{ visible }\"\n  >\n    <button\n      v-if=\"downloadableImage\"\n      class=\"download-button\"\n      :disabled=\"isExporting\"\n      @click=\"handleSaveImage\"\n    >\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"12\"\n        height=\"12\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        stroke-width=\"2\"\n        stroke-linecap=\"round\"\n        stroke-linejoin=\"round\"\n      >\n        <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" />\n        <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\" />\n        <path d=\"M20.4 14.5L16 10 4 20\" />\n      </svg>\n      <span class=\"button-text\">Save Image</span>\n    </button>\n\n    <button\n      v-if=\"data && downloadableData\"\n      class=\"download-button\"\n      @click=\"handleDownloadData\"\n    >\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"12\"\n        height=\"12\"\n        viewBox=\"0 0 24 24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        stroke-width=\"2\"\n        stroke-linecap=\"round\"\n        stroke-linejoin=\"round\"\n      >\n        <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n        <polyline points=\"7 10 12 15 17 10\" />\n        <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\" />\n      </svg>\n      <span class=\"button-text\">Download Data</span>\n    </button>\n  </div>\n</template>\n\n<style scoped>\n.chart-footer {\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  margin: 3px 12px;\n  font-size: 12px;\n  height: 9px;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n}\n\n.chart-footer.visible {\n  opacity: 1;\n}\n\n.download-button {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 4px 8px;\n  margin-left: 8px;\n  border: none;\n  background: transparent;\n  color: inherit;\n  font-size: 11px;\n  cursor: pointer;\n  opacity: 0.6;\n  transition: opacity 0.2s ease;\n}\n\n.download-button:hover {\n  opacity: 1;\n}\n\n.download-button:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.button-text {\n  white-space: nowrap;\n}\n\n@media print {\n  .chart-footer {\n    display: none;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\n/**\n * BarChart component\n * Supports stacked, grouped, and stacked100 layouts\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { BarChartProps, SeriesConfig } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useChartConfig, getSeriesConfig } from '../../composables/useChartConfig';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { useInteractiveFeatures } from '../../composables/useInteractiveFeatures';\nimport { formatValue } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<BarChartProps>(), {\n  type: 'stacked',\n  fillOpacity: 1,\n  outlineWidth: 0,\n  swapXY: false,\n  xBaseline: true,\n  yGridlines: true,\n  xAxisLabels: true,\n  yAxisLabels: true,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColor, resolveColorPalette, resolveColorsObject } = useThemeStores();\n\n// Interactive features - use getters for reactivity\nconst {\n  interactiveConfig,\n  tooltipBaseConfig\n} = useInteractiveFeatures({\n  zoom: () => props.zoom,\n  toolbox: () => props.toolbox,\n  brush: () => props.brush,\n  animation: () => props.animation,\n  tooltip: () => props.tooltip,\n  swapXY: () => props.swapXY,\n  chartType: 'bar'\n});\n\n// Process chart configuration\nconst {\n  processedData,\n  columnSummary,\n  xAxisType: _xAxisType,\n  baseConfig,\n  formats,\n  unitSummaries\n} = useChartConfig(props, {\n  chartType: 'Bar Chart',\n  stacked100: props.type === 'stacked100'\n});\n\n// Resolve colors\nconst fillColorResolved = computed(() =>\n  props.fillColor ? resolveColor(props.fillColor).value : undefined\n);\nconst outlineColorResolved = computed(() =>\n  props.outlineColor ? resolveColor(props.outlineColor).value : undefined\n);\nconst labelColorResolved = computed(() =>\n  props.labelColor ? resolveColor(props.labelColor).value : undefined\n);\nconst colorPaletteResolved = computed(() =>\n  resolveColorPalette(props.colorPalette || 'default').value\n);\nconst seriesColorsResolved = computed(() =>\n  props.seriesColors ? resolveColorsObject(props.seriesColors).value : undefined\n);\n\n// Build bar series configuration\nconst barSeriesConfig = computed<Partial<SeriesConfig>>(() => {\n  const isStacked = props.type === 'stacked' || props.type === 'stacked100';\n\n  return {\n    type: 'bar',\n    stack: isStacked ? 'total' : undefined,\n    barMaxWidth: props.swapXY ? undefined : 60,\n    itemStyle: {\n      color: fillColorResolved.value,\n      opacity: props.fillOpacity,\n      borderColor: outlineColorResolved.value,\n      borderWidth: props.outlineWidth\n    },\n    label: props.labels ? {\n      show: true,\n      position: props.labelPosition || (props.swapXY ? 'right' : 'top'),\n      fontSize: props.labelSize || 11,\n      color: labelColorResolved.value,\n      formatter: (params: { value: unknown[] }) => {\n        const value = props.swapXY ? params.value[0] : params.value[1];\n        if (props.labelFmt || props.yLabelFmt) {\n          return formatValue(value, formats.value.y, unitSummaries.value.y);\n        }\n        return String(value);\n      }\n    } : undefined,\n    emphasis: {\n      focus: 'series'\n    }\n  };\n});\n\n// Generate series\nconst seriesData = computed(() => {\n  if (!props.x || !props.y) return [];\n\n  const baseSeriesConfig = barSeriesConfig.value;\n\n  return getSeriesConfig(\n    processedData.value,\n    props.x,\n    props.y,\n    props.series,\n    props.swapXY || false,\n    baseSeriesConfig,\n    columnSummary.value,\n    {\n      y2: props.y2,\n      seriesOrder: props.seriesOrder\n    }\n  );\n});\n\n// Build final config\nconst chartConfig = computed<EChartsOption>(() => {\n  const config = { ...baseConfig.value };\n\n  // Update series\n  config.series = seriesData.value as EChartsOption['series'];\n\n  // Update color palette\n  if (colorPaletteResolved.value) {\n    config.color = colorPaletteResolved.value;\n  }\n\n  // Handle stacked100 y-axis formatting\n  if (props.type === 'stacked100') {\n    const yAxis = config.yAxis as Record<string, unknown> | undefined;\n    if (yAxis && !props.swapXY) {\n      yAxis.max = 1;\n      yAxis.axisLabel = {\n        ...(yAxis.axisLabel as Record<string, unknown> | undefined),\n        formatter: (value: number) => `${Math.round(value * 100)}%`\n      };\n    }\n  }\n\n  // Handle stack total labels\n  if (props.stackTotalLabel && (props.type === 'stacked' || props.type === 'stacked100')) {\n    // Add a hidden series for stack total labels\n    const stackTotalSeries = {\n      name: 'stackTotal',\n      type: 'bar',\n      stack: 'total',\n      itemStyle: { color: 'transparent' },\n      label: {\n        show: true,\n        position: props.swapXY ? 'right' : 'top',\n        formatter: (params: { value: unknown[]; dataIndex: number }) => {\n          // Calculate total from all series\n          const seriesArray = seriesData.value;\n          let total = 0;\n          for (const s of seriesArray) {\n            const dataPoint = s.data[params.dataIndex] as unknown[];\n            total += (dataPoint[props.swapXY ? 0 : 1] as number) || 0;\n          }\n          return formatValue(total, formats.value.y, unitSummaries.value.y);\n        }\n      },\n      data: seriesData.value[0]?.data.map(() => [0, 0]) || []\n    };\n    (config.series as unknown[]).push(stackTotalSeries);\n  }\n\n  // Merge interactive features\n  const interactive = interactiveConfig.value;\n  if (interactive.dataZoom) {\n    config.dataZoom = interactive.dataZoom;\n  }\n  if (interactive.toolbox) {\n    config.toolbox = interactive.toolbox;\n  }\n  if (interactive.brush) {\n    config.brush = interactive.brush;\n  }\n  // Merge animation settings\n  if (interactive.animation !== undefined) {\n    config.animation = interactive.animation;\n  }\n  if (interactive.animationDuration !== undefined) {\n    config.animationDuration = interactive.animationDuration;\n  }\n  if (interactive.animationDurationUpdate !== undefined) {\n    config.animationDurationUpdate = interactive.animationDurationUpdate;\n  }\n  if (interactive.animationEasing !== undefined) {\n    config.animationEasing = interactive.animationEasing;\n  }\n  if (interactive.animationDelay !== undefined) {\n    config.animationDelay = interactive.animationDelay;\n  }\n  if (interactive.animationThreshold !== undefined) {\n    config.animationThreshold = interactive.animationThreshold;\n  }\n\n  // Merge tooltip config from interactive features\n  const tooltipBase = tooltipBaseConfig.value;\n  if (tooltipBase && Object.keys(tooltipBase).length > 0) {\n    config.tooltip = { ...(config.tooltip as Record<string, unknown>), ...tooltipBase } as EChartsOption['tooltip'];\n  }\n\n  return config;\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :connect-group=\"props.connectGroup\"\n    :series-colors=\"seriesColorsResolved as Record<string, string>\"\n    :echarts-options=\"props.echartsOptions\"\n    :series-options=\"props.seriesOptions\"\n    :show-all-x-axis-labels=\"props.showAllXAxisLabels\"\n    :swap-x-y=\"props.swapXY\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"processedData\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :series-colors=\"seriesColorsResolved as Record<string, string>\"\n        :echarts-options=\"props.echartsOptions\"\n        :series-options=\"props.seriesOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * LineChart component\n * Supports markers, step interpolation, and missing value handling\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { LineChartProps, SeriesConfig } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useChartConfig, getSeriesConfig } from '../../composables/useChartConfig';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { useInteractiveFeatures } from '../../composables/useInteractiveFeatures';\nimport { formatValue } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<LineChartProps>(), {\n  lineType: 'solid',\n  lineOpacity: 1,\n  lineWidth: 2,\n  markers: false,\n  markerShape: 'circle',\n  markerSize: 8,\n  handleMissing: 'gap',\n  step: false,\n  stepPosition: 'middle',\n  xBaseline: true,\n  yGridlines: true,\n  xAxisLabels: true,\n  yAxisLabels: true,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColor, resolveColorPalette, resolveColorsObject } = useThemeStores();\n\n// Interactive features - use getters for reactivity\nconst {\n  interactiveConfig,\n  tooltipBaseConfig\n} = useInteractiveFeatures({\n  zoom: () => props.zoom,\n  toolbox: () => props.toolbox,\n  brush: () => props.brush,\n  animation: () => props.animation,\n  tooltip: () => props.tooltip,\n  swapXY: () => false,\n  chartType: 'line'\n});\n\n// Process chart configuration\n// Note: We pass props directly (not spread) to maintain Vue reactivity\nconst {\n  processedData,\n  columnSummary,\n  xAxisType: _xAxisType,\n  baseConfig,\n  formats,\n  unitSummaries\n} = useChartConfig(props, { chartType: 'Line Chart' });\n\n// Resolve colors\nconst lineColorResolved = computed(() =>\n  props.lineColor ? resolveColor(props.lineColor).value : undefined\n);\nconst labelColorResolved = computed(() =>\n  props.labelColor ? resolveColor(props.labelColor).value : undefined\n);\nconst colorPaletteResolved = computed(() =>\n  resolveColorPalette(props.colorPalette || 'default').value\n);\nconst seriesColorsResolved = computed(() =>\n  props.seriesColors ? resolveColorsObject(props.seriesColors).value : undefined\n);\n\n// Map line type to ECharts format\nconst lineTypeMap = {\n  solid: 'solid',\n  dashed: 'dashed',\n  dotted: 'dotted'\n} as const;\n\n// Map step position\nconst stepMap = {\n  start: 'start',\n  middle: 'middle',\n  end: 'end'\n} as const;\n\n// Build line series configuration\nconst lineSeriesConfig = computed<Partial<SeriesConfig>>(() => {\n  return {\n    type: 'line',\n    smooth: false,\n    step: props.step ? stepMap[props.stepPosition || 'middle'] : false,\n    connectNulls: props.handleMissing === 'connect',\n    lineStyle: {\n      color: lineColorResolved.value,\n      width: props.lineWidth,\n      opacity: props.lineOpacity,\n      type: lineTypeMap[props.lineType || 'solid']\n    },\n    itemStyle: {\n      color: lineColorResolved.value\n    },\n    symbol: props.markers ? props.markerShape : 'none',\n    symbolSize: props.markers ? props.markerSize : 0,\n    label: props.labels ? {\n      show: true,\n      position: props.labelPosition || 'top',\n      fontSize: props.labelSize || 11,\n      color: labelColorResolved.value,\n      formatter: (params: { value: unknown[] }) => {\n        const value = params.value[1];\n        if (props.labelFmt || props.yLabelFmt) {\n          return formatValue(value, formats.value.y, unitSummaries.value.y);\n        }\n        return String(value);\n      }\n    } : undefined,\n    emphasis: {\n      focus: 'series',\n      lineStyle: {\n        width: (props.lineWidth || 2) + 1\n      }\n    }\n  };\n});\n\n// Generate series\nconst seriesData = computed(() => {\n  if (!props.x || !props.y) return [];\n\n  let data = processedData.value;\n\n  // Handle missing values\n  if (props.handleMissing === 'zero') {\n    const yColumns = Array.isArray(props.y) ? props.y : [props.y];\n    data = data.map((row) => {\n      const newRow = { ...row };\n      for (const col of yColumns) {\n        if (newRow[col] == null) {\n          newRow[col] = 0;\n        }\n      }\n      return newRow;\n    });\n  }\n\n  return getSeriesConfig(\n    data,\n    props.x,\n    props.y,\n    props.series,\n    false,\n    lineSeriesConfig.value,\n    columnSummary.value,\n    {\n      y2: props.y2,\n      seriesOrder: props.seriesOrder\n    }\n  );\n});\n\n// Build final config\nconst chartConfig = computed<EChartsOption>(() => {\n  const config = { ...baseConfig.value };\n\n  // Update series\n  config.series = seriesData.value as EChartsOption['series'];\n\n  // Update color palette\n  if (colorPaletteResolved.value) {\n    config.color = colorPaletteResolved.value;\n  }\n\n  // Merge interactive features\n  const interactive = interactiveConfig.value;\n  if (interactive.dataZoom) {\n    config.dataZoom = interactive.dataZoom;\n  }\n  if (interactive.toolbox) {\n    config.toolbox = interactive.toolbox;\n  }\n  if (interactive.brush) {\n    config.brush = interactive.brush;\n  }\n  // Merge animation settings\n  if (interactive.animation !== undefined) {\n    config.animation = interactive.animation;\n  }\n  if (interactive.animationDuration !== undefined) {\n    config.animationDuration = interactive.animationDuration;\n  }\n  if (interactive.animationDurationUpdate !== undefined) {\n    config.animationDurationUpdate = interactive.animationDurationUpdate;\n  }\n  if (interactive.animationEasing !== undefined) {\n    config.animationEasing = interactive.animationEasing;\n  }\n  if (interactive.animationDelay !== undefined) {\n    config.animationDelay = interactive.animationDelay;\n  }\n  if (interactive.animationThreshold !== undefined) {\n    config.animationThreshold = interactive.animationThreshold;\n  }\n\n  // Merge tooltip config from interactive features\n  const tooltipBase = tooltipBaseConfig.value;\n  if (tooltipBase && Object.keys(tooltipBase).length > 0) {\n    config.tooltip = { ...(config.tooltip as Record<string, unknown>), ...tooltipBase } as EChartsOption['tooltip'];\n  }\n\n  // Debug logging\n  console.log('[LineChart] Final config:', {\n    xAxis: config.xAxis,\n    xAxisName: (config.xAxis as Record<string, unknown>)?.name,\n    legend: config.legend,\n    legendShow: (config.legend as Record<string, unknown>)?.show,\n    seriesCount: Array.isArray(config.series) ? config.series.length : 0,\n    seriesNames: Array.isArray(config.series) ? (config.series as Array<{ name?: unknown }>).map((s) => String(s.name || '')) : [],\n    grid: config.grid\n  });\n\n  return config;\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :connect-group=\"props.connectGroup\"\n    :series-colors=\"seriesColorsResolved as Record<string, string>\"\n    :echarts-options=\"props.echartsOptions\"\n    :series-options=\"props.seriesOptions\"\n    :show-all-x-axis-labels=\"props.showAllXAxisLabels\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"processedData\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :series-colors=\"seriesColorsResolved as Record<string, string>\"\n        :echarts-options=\"props.echartsOptions\"\n        :series-options=\"props.seriesOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * AreaChart component\n * Supports stacked and stacked100 layouts\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { AreaChartProps, SeriesConfig } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useChartConfig, getSeriesConfig } from '../../composables/useChartConfig';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { useInteractiveFeatures } from '../../composables/useInteractiveFeatures';\nimport { formatValue } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<AreaChartProps>(), {\n  type: 'stacked',\n  fillOpacity: 0.7,\n  lineType: 'solid',\n  lineWidth: 2,\n  markers: false,\n  markerShape: 'circle',\n  markerSize: 8,\n  handleMissing: 'gap',\n  step: false,\n  stepPosition: 'middle',\n  xBaseline: true,\n  yGridlines: true,\n  xAxisLabels: true,\n  yAxisLabels: true,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColor, resolveColorPalette, resolveColorsObject } = useThemeStores();\n\n// Interactive features - use getters for reactivity\nconst {\n  interactiveConfig,\n  tooltipBaseConfig\n} = useInteractiveFeatures({\n  zoom: () => props.zoom,\n  toolbox: () => props.toolbox,\n  brush: () => props.brush,\n  animation: () => props.animation,\n  tooltip: () => props.tooltip,\n  swapXY: () => false,\n  chartType: 'area'\n});\n\n// Process chart configuration\nconst {\n  processedData,\n  columnSummary,\n  xAxisType: _xAxisType,\n  baseConfig,\n  formats,\n  unitSummaries\n} = useChartConfig(props, {\n  chartType: 'Area Chart',\n  stacked100: props.type === 'stacked100'\n});\n\n// Resolve colors\nconst fillColorResolved = computed(() =>\n  props.fillColor ? resolveColor(props.fillColor).value : undefined\n);\nconst lineColorResolved = computed(() =>\n  props.lineColor ? resolveColor(props.lineColor).value : undefined\n);\nconst labelColorResolved = computed(() =>\n  props.labelColor ? resolveColor(props.labelColor).value : undefined\n);\nconst colorPaletteResolved = computed(() =>\n  resolveColorPalette(props.colorPalette || 'default').value\n);\nconst seriesColorsResolved = computed(() =>\n  props.seriesColors ? resolveColorsObject(props.seriesColors).value : undefined\n);\n\n// Map line type to ECharts format\nconst lineTypeMap = {\n  solid: 'solid',\n  dashed: 'dashed',\n  dotted: 'dotted'\n} as const;\n\n// Map step position\nconst stepMap = {\n  start: 'start',\n  middle: 'middle',\n  end: 'end'\n} as const;\n\n// Build area series configuration\nconst areaSeriesConfig = computed<Partial<SeriesConfig>>(() => {\n  return {\n    type: 'line',\n    stack: 'total',\n    smooth: false,\n    step: props.step ? stepMap[props.stepPosition || 'middle'] : false,\n    connectNulls: props.handleMissing === 'connect',\n    areaStyle: {\n      color: fillColorResolved.value,\n      opacity: props.fillOpacity\n    },\n    lineStyle: {\n      color: lineColorResolved.value,\n      width: props.lineWidth,\n      type: lineTypeMap[props.lineType || 'solid']\n    },\n    itemStyle: {\n      color: lineColorResolved.value || fillColorResolved.value\n    },\n    symbol: props.markers ? props.markerShape : 'none',\n    symbolSize: props.markers ? props.markerSize : 0,\n    label: props.labels ? {\n      show: true,\n      position: props.labelPosition || 'top',\n      fontSize: props.labelSize || 11,\n      color: labelColorResolved.value,\n      formatter: (params: { value: unknown[] }) => {\n        const value = params.value[1];\n        if (props.labelFmt || props.yLabelFmt) {\n          return formatValue(value, formats.value.y, unitSummaries.value.y);\n        }\n        return String(value);\n      }\n    } : undefined,\n    emphasis: {\n      focus: 'series'\n    }\n  };\n});\n\n// Generate series\nconst seriesData = computed(() => {\n  if (!props.x || !props.y) return [];\n\n  let data = processedData.value;\n\n  // Handle missing values\n  if (props.handleMissing === 'zero') {\n    const yColumns = Array.isArray(props.y) ? props.y : [props.y];\n    data = data.map((row) => {\n      const newRow = { ...row };\n      for (const col of yColumns) {\n        if (newRow[col] == null) {\n          newRow[col] = 0;\n        }\n      }\n      return newRow;\n    });\n  }\n\n  return getSeriesConfig(\n    data,\n    props.x,\n    props.y,\n    props.series,\n    false,\n    areaSeriesConfig.value,\n    columnSummary.value,\n    {\n      seriesOrder: props.seriesOrder\n    }\n  );\n});\n\n// Build final config\nconst chartConfig = computed<EChartsOption>(() => {\n  const config = { ...baseConfig.value };\n\n  // Update series\n  config.series = seriesData.value as EChartsOption['series'];\n\n  // Update color palette\n  if (colorPaletteResolved.value) {\n    config.color = colorPaletteResolved.value;\n  }\n\n  // Handle stacked100 y-axis formatting\n  if (props.type === 'stacked100') {\n    const yAxis = config.yAxis as Record<string, unknown> | undefined;\n    if (yAxis) {\n      yAxis.max = 1;\n      yAxis.axisLabel = {\n        ...(yAxis.axisLabel as Record<string, unknown> | undefined),\n        formatter: (value: number) => `${Math.round(value * 100)}%`\n      };\n    }\n  }\n\n  // Merge interactive features\n  const interactive = interactiveConfig.value;\n  if (interactive.dataZoom) {\n    config.dataZoom = interactive.dataZoom;\n  }\n  if (interactive.toolbox) {\n    config.toolbox = interactive.toolbox;\n  }\n  if (interactive.brush) {\n    config.brush = interactive.brush;\n  }\n  // Merge animation settings\n  if (interactive.animation !== undefined) {\n    config.animation = interactive.animation;\n  }\n  if (interactive.animationDuration !== undefined) {\n    config.animationDuration = interactive.animationDuration;\n  }\n  if (interactive.animationDurationUpdate !== undefined) {\n    config.animationDurationUpdate = interactive.animationDurationUpdate;\n  }\n  if (interactive.animationEasing !== undefined) {\n    config.animationEasing = interactive.animationEasing;\n  }\n  if (interactive.animationDelay !== undefined) {\n    config.animationDelay = interactive.animationDelay;\n  }\n  if (interactive.animationThreshold !== undefined) {\n    config.animationThreshold = interactive.animationThreshold;\n  }\n\n  // Merge tooltip config from interactive features\n  const tooltipBase = tooltipBaseConfig.value;\n  if (tooltipBase && Object.keys(tooltipBase).length > 0) {\n    config.tooltip = { ...(config.tooltip as Record<string, unknown>), ...tooltipBase } as EChartsOption['tooltip'];\n  }\n\n  return config;\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :connect-group=\"props.connectGroup\"\n    :series-colors=\"seriesColorsResolved as Record<string, string>\"\n    :echarts-options=\"props.echartsOptions\"\n    :series-options=\"props.seriesOptions\"\n    :show-all-x-axis-labels=\"props.showAllXAxisLabels\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"processedData\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :series-colors=\"seriesColorsResolved as Record<string, string>\"\n        :echarts-options=\"props.echartsOptions\"\n        :series-options=\"props.seriesOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * ScatterPlot component\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { ScatterPlotProps, SeriesConfig } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useChartConfig, getSeriesConfig } from '../../composables/useChartConfig';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { useInteractiveFeatures } from '../../composables/useInteractiveFeatures';\nimport { useTooltip } from '../../composables/useTooltip';\n\nconst props = withDefaults(defineProps<ScatterPlotProps>(), {\n  pointOpacity: 0.7,\n  pointSize: 10,\n  pointShape: 'circle',\n  outlineWidth: 1,\n  xBaseline: true,\n  yGridlines: true,\n  xAxisLabels: true,\n  yAxisLabels: true,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColor, resolveColorPalette, resolveColorsObject } = useThemeStores();\nconst { scatterFormatter } = useTooltip();\n\n// Interactive features - use getters for reactivity\nconst {\n  interactiveConfig,\n  tooltipBaseConfig\n} = useInteractiveFeatures({\n  zoom: () => props.zoom,\n  toolbox: () => props.toolbox,\n  brush: () => props.brush,\n  animation: () => props.animation,\n  tooltip: () => props.tooltip,\n  swapXY: () => false,\n  chartType: 'scatter'\n});\n\n// Process chart configuration\nconst {\n  processedData,\n  columnSummary,\n  xAxisType: _xAxisType,\n  baseConfig,\n  formats,\n  unitSummaries: _unitSummaries\n} = useChartConfig(props, {\n  chartType: 'Scatter Plot',\n  xType: props.xType || 'value' // Default to value axis for scatter\n});\n\n// Resolve colors\nconst pointColorResolved = computed(() =>\n  props.pointColor ? resolveColor(props.pointColor).value : undefined\n);\nconst outlineColorResolved = computed(() =>\n  props.outlineColor ? resolveColor(props.outlineColor).value : undefined\n);\nconst colorPaletteResolved = computed(() =>\n  resolveColorPalette(props.colorPalette || 'default').value\n);\nconst seriesColorsResolved = computed(() =>\n  props.seriesColors ? resolveColorsObject(props.seriesColors).value : undefined\n);\n\n// Build scatter series configuration\nconst scatterSeriesConfig = computed<Partial<SeriesConfig>>(() => {\n  return {\n    type: 'scatter',\n    symbol: props.pointShape,\n    symbolSize: props.pointSize,\n    itemStyle: {\n      color: pointColorResolved.value,\n      opacity: props.pointOpacity,\n      borderColor: outlineColorResolved.value,\n      borderWidth: props.outlineWidth\n    },\n    emphasis: {\n      focus: 'series',\n      itemStyle: {\n        borderWidth: (props.outlineWidth || 1) + 1\n      }\n    }\n  };\n});\n\n// Generate series\nconst seriesData = computed(() => {\n  if (!props.x || !props.y) return [];\n\n  return getSeriesConfig(\n    processedData.value,\n    props.x,\n    props.y,\n    props.series,\n    false,\n    scatterSeriesConfig.value,\n    columnSummary.value,\n    {\n      tooltipTitle: props.tooltipTitle\n    }\n  );\n});\n\n// Build final config\nconst chartConfig = computed<EChartsOption>(() => {\n  const config = { ...baseConfig.value };\n\n  // Update series\n  config.series = seriesData.value as EChartsOption['series'];\n\n  // Update color palette\n  if (colorPaletteResolved.value) {\n    config.color = colorPaletteResolved.value;\n  }\n\n  // Custom tooltip for scatter\n  config.tooltip = {\n    ...config.tooltip,\n    trigger: 'item',\n    formatter: (params: unknown) => {\n      return scatterFormatter(params as Parameters<typeof scatterFormatter>[0], {\n        xColumn: props.x,\n        yColumn: props.y,\n        xFormat: formats.value.x,\n        yFormat: formats.value.y,\n        tooltipTitle: props.tooltipTitle\n      });\n    }\n  };\n\n  // Ensure x-axis is value type for scatter\n  if (!props.xType) {\n    (config.xAxis as Record<string, unknown>).type = 'value';\n  }\n\n  // Merge interactive features\n  const interactive = interactiveConfig.value;\n  if (interactive.dataZoom) {\n    config.dataZoom = interactive.dataZoom;\n  }\n  if (interactive.toolbox) {\n    config.toolbox = interactive.toolbox;\n  }\n  if (interactive.brush) {\n    config.brush = interactive.brush;\n  }\n  // Merge animation settings\n  if (interactive.animation !== undefined) {\n    config.animation = interactive.animation;\n  }\n  if (interactive.animationDuration !== undefined) {\n    config.animationDuration = interactive.animationDuration;\n  }\n  if (interactive.animationDurationUpdate !== undefined) {\n    config.animationDurationUpdate = interactive.animationDurationUpdate;\n  }\n  if (interactive.animationEasing !== undefined) {\n    config.animationEasing = interactive.animationEasing;\n  }\n  if (interactive.animationDelay !== undefined) {\n    config.animationDelay = interactive.animationDelay;\n  }\n  if (interactive.animationThreshold !== undefined) {\n    config.animationThreshold = interactive.animationThreshold;\n  }\n\n  // Merge tooltip config from interactive features (but preserve custom formatter)\n  const tooltipBase = tooltipBaseConfig.value;\n  if (tooltipBase && Object.keys(tooltipBase).length > 0) {\n    const { show, confine, enterable, axisPointer, backgroundColor, borderColor, textStyle } = tooltipBase as Record<string, unknown>;\n    if (show !== undefined) (config.tooltip as Record<string, unknown>).show = show;\n    if (confine !== undefined) (config.tooltip as Record<string, unknown>).confine = confine;\n    if (enterable !== undefined) (config.tooltip as Record<string, unknown>).enterable = enterable;\n    if (axisPointer !== undefined) (config.tooltip as Record<string, unknown>).axisPointer = axisPointer;\n    if (backgroundColor !== undefined) (config.tooltip as Record<string, unknown>).backgroundColor = backgroundColor;\n    if (borderColor !== undefined) (config.tooltip as Record<string, unknown>).borderColor = borderColor;\n    if (textStyle !== undefined) (config.tooltip as Record<string, unknown>).textStyle = textStyle;\n  }\n\n  return config;\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :connect-group=\"props.connectGroup\"\n    :series-colors=\"seriesColorsResolved as Record<string, string>\"\n    :echarts-options=\"props.echartsOptions\"\n    :series-options=\"props.seriesOptions\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"processedData\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :series-colors=\"seriesColorsResolved as Record<string, string>\"\n        :echarts-options=\"props.echartsOptions\"\n        :series-options=\"props.seriesOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * BubbleChart component\n * Scatter plot with size dimension\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { BubbleChartProps, SeriesConfig } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useChartConfig, getSeriesConfig } from '../../composables/useChartConfig';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { useTooltip } from '../../composables/useTooltip';\nimport { getFormatObjectFromString } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<BubbleChartProps>(), {\n  pointOpacity: 0.7,\n  minSize: 5,\n  maxSize: 50,\n  outlineWidth: 1,\n  xBaseline: true,\n  yGridlines: true,\n  xAxisLabels: true,\n  yAxisLabels: true,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColor, resolveColorPalette, resolveColorsObject } = useThemeStores();\nconst { scatterFormatter } = useTooltip();\n\n// Process chart configuration\nconst {\n  processedData,\n  columnSummary,\n  xAxisType: _xAxisType,\n  baseConfig,\n  formats,\n  unitSummaries: _unitSummaries\n} = useChartConfig(props, {\n  chartType: 'Bubble Chart',\n  xType: props.xType || 'value'\n});\n\n// Resolve colors\nconst pointColorResolved = computed(() =>\n  props.pointColor ? resolveColor(props.pointColor).value : undefined\n);\nconst outlineColorResolved = computed(() =>\n  props.outlineColor ? resolveColor(props.outlineColor).value : undefined\n);\nconst colorPaletteResolved = computed(() =>\n  resolveColorPalette(props.colorPalette || 'default').value\n);\nconst seriesColorsResolved = computed(() =>\n  props.seriesColors ? resolveColorsObject(props.seriesColors).value : undefined\n);\n\n// Get size format\nconst sizeFormat = computed(() => {\n  if (props.sizeFmt) {\n    return getFormatObjectFromString(props.sizeFmt);\n  }\n  if (props.size && columnSummary.value[props.size]) {\n    return columnSummary.value[props.size].format;\n  }\n  return undefined;\n});\n\n// Calculate size range from data\nconst sizeRange = computed(() => {\n  if (!props.size || !processedData.value.length) {\n    return { min: 0, max: 1 };\n  }\n\n  const sizes = processedData.value\n    .map((d) => d[props.size!] as number)\n    .filter((v) => v != null && !isNaN(v));\n\n  return {\n    min: Math.min(...sizes),\n    max: Math.max(...sizes)\n  };\n});\n\n// Build bubble series configuration\nconst bubbleSeriesConfig = computed<Partial<SeriesConfig>>(() => {\n  return {\n    type: 'scatter',\n    itemStyle: {\n      color: pointColorResolved.value,\n      opacity: props.pointOpacity,\n      borderColor: outlineColorResolved.value,\n      borderWidth: props.outlineWidth\n    },\n    emphasis: {\n      focus: 'series',\n      itemStyle: {\n        borderWidth: (props.outlineWidth || 1) + 1\n      }\n    }\n  };\n});\n\n// Generate series with size mapping\nconst seriesData = computed(() => {\n  if (!props.x || !props.y || !props.size) return [];\n\n  const baseSeries = getSeriesConfig(\n    processedData.value,\n    props.x,\n    props.y,\n    props.series,\n    false,\n    bubbleSeriesConfig.value,\n    columnSummary.value,\n    {\n      size: props.size,\n      tooltipTitle: props.tooltipTitle\n    }\n  );\n\n  // Add symbol size function to each series\n  const { min: sizeMin, max: sizeMax } = sizeRange.value;\n  const sizeSpan = sizeMax - sizeMin || 1;\n\n  return baseSeries.map((series) => ({\n    ...series,\n    symbolSize: (data: unknown[]) => {\n      const sizeValue = data[2] as number;\n      if (sizeValue == null) return props.minSize;\n\n      // Normalize to 0-1 range then scale to min-max size\n      const normalized = (sizeValue - sizeMin) / sizeSpan;\n      return props.minSize! + normalized * (props.maxSize! - props.minSize!);\n    }\n  }));\n});\n\n// Build final config\nconst chartConfig = computed<EChartsOption>(() => {\n  const config = { ...baseConfig.value };\n\n  // Update series\n  config.series = seriesData.value as EChartsOption['series'];\n\n  // Update color palette\n  if (colorPaletteResolved.value) {\n    config.color = colorPaletteResolved.value;\n  }\n\n  // Custom tooltip for bubble\n  config.tooltip = {\n    ...config.tooltip,\n    trigger: 'item',\n    formatter: (params: unknown) => {\n      return scatterFormatter(params as Parameters<typeof scatterFormatter>[0], {\n        xColumn: props.x,\n        yColumn: props.y,\n        xFormat: formats.value.x,\n        yFormat: formats.value.y,\n        size: props.size,\n        sizeFormat: sizeFormat.value,\n        tooltipTitle: props.tooltipTitle\n      });\n    }\n  };\n\n  // Ensure x-axis is value type\n  if (!props.xType) {\n    (config.xAxis as Record<string, unknown>).type = 'value';\n  }\n\n  return config;\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :connect-group=\"props.connectGroup\"\n    :series-colors=\"seriesColorsResolved as Record<string, string>\"\n    :echarts-options=\"props.echartsOptions\"\n    :series-options=\"props.seriesOptions\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"processedData\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :series-colors=\"seriesColorsResolved as Record<string, string>\"\n        :echarts-options=\"props.echartsOptions\"\n        :series-options=\"props.seriesOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * BoxPlot component\n * Statistical box plot with min, max, midpoint, and confidence intervals\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { BoxPlotProps } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useChartConfig, getDistinctValues } from '../../composables/useChartConfig';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { formatValue } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<BoxPlotProps>(), {\n  fillOpacity: 0.8,\n  outlineWidth: 1.5,\n  xBaseline: true,\n  yGridlines: true,\n  xAxisLabels: true,\n  yAxisLabels: true,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColor, resolveColorPalette } = useThemeStores();\n\n// Process chart configuration\nconst {\n  processedData,\n  columnSummary: _columnSummary,\n  baseConfig,\n  formats,\n  unitSummaries\n} = useChartConfig(props, { chartType: 'Box Plot' });\n\n// Resolve colors\nconst fillColorResolved = computed(() =>\n  props.fillColor ? resolveColor(props.fillColor).value : undefined\n);\nconst outlineColorResolved = computed(() =>\n  props.outlineColor ? resolveColor(props.outlineColor).value : undefined\n);\nconst colorPaletteResolved = computed(() =>\n  resolveColorPalette(props.colorPalette || 'default').value\n);\n\n// Get box plot data\n// Expects data with columns: x, min, max, midpoint (median), confidenceIntervalLower (Q1), confidenceIntervalUpper (Q3)\nconst boxPlotData = computed(() => {\n  if (!props.x) return { categories: [], data: [] };\n\n  const categories = getDistinctValues(processedData.value, props.x) as string[];\n\n  const data = categories.map((cat) => {\n    const row = processedData.value.find((d) => d[props.x!] === cat);\n    if (!row) return [0, 0, 0, 0, 0];\n\n    // BoxPlot format: [min, Q1, median, Q3, max]\n    const min = (row[props.min!] as number) ?? 0;\n    const q1 = (row[props.confidenceIntervalLower!] as number) ?? 0;\n    const median = (row[props.midpoint!] as number) ?? 0;\n    const q3 = (row[props.confidenceIntervalUpper!] as number) ?? 0;\n    const max = (row[props.max!] as number) ?? 0;\n\n    return [min, q1, median, q3, max];\n  });\n\n  return { categories, data };\n});\n\n// Build final config\nconst chartConfig = computed<EChartsOption>(() => {\n  const config = { ...baseConfig.value };\n  const { categories, data } = boxPlotData.value;\n\n  // Update x-axis for categories\n  config.xAxis = {\n    ...config.xAxis,\n    type: 'category',\n    data: categories\n  };\n\n  // Update y-axis\n  config.yAxis = {\n    ...config.yAxis,\n    type: 'value'\n  };\n\n  // Update series\n  config.series = [\n    {\n      name: 'boxplot',\n      type: 'boxplot' as const,\n      data: data,\n      itemStyle: {\n        color: fillColorResolved.value as string | undefined,\n        opacity: props.fillOpacity,\n        borderColor: outlineColorResolved.value as string | undefined,\n        borderWidth: props.outlineWidth\n      }\n    }\n  ];\n\n  // Update color palette\n  if (colorPaletteResolved.value) {\n    config.color = colorPaletteResolved.value;\n  }\n\n  // Custom tooltip\n  config.tooltip = {\n    ...(config.tooltip as Record<string, unknown>),\n    trigger: 'item' as const,\n    formatter: (params: unknown) => {\n      const p = params as { name: string; value: number[] };\n      const [min, q1, median, q3, max] = p.value;\n      let output = `<span style='font-weight: 600;'>${p.name}</span><br/>`;\n      output += `Min: <span style='float:right; margin-left: 10px;'>${formatValue(min, formats.value.y, unitSummaries.value.y)}</span><br/>`;\n      output += `Q1: <span style='float:right; margin-left: 10px;'>${formatValue(q1, formats.value.y, unitSummaries.value.y)}</span><br/>`;\n      output += `Median: <span style='float:right; margin-left: 10px;'>${formatValue(median, formats.value.y, unitSummaries.value.y)}</span><br/>`;\n      output += `Q3: <span style='float:right; margin-left: 10px;'>${formatValue(q3, formats.value.y, unitSummaries.value.y)}</span><br/>`;\n      output += `Max: <span style='float:right; margin-left: 10px;'>${formatValue(max, formats.value.y, unitSummaries.value.y)}</span>`;\n      return output;\n    }\n  };\n\n  return config;\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :connect-group=\"props.connectGroup\"\n    :echarts-options=\"props.echartsOptions\"\n    :series-options=\"props.seriesOptions\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"processedData\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :echarts-options=\"props.echartsOptions\"\n        :series-options=\"props.seriesOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * Histogram component\n * Displays frequency distribution of data\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { HistogramProps } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useChartConfig } from '../../composables/useChartConfig';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { formatValue } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<HistogramProps>(), {\n  fillOpacity: 0.8,\n  outlineWidth: 1,\n  bins: 10,\n  xBaseline: true,\n  yGridlines: true,\n  xAxisLabels: true,\n  yAxisLabels: true,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColor, resolveColorPalette } = useThemeStores();\n\n// Process chart configuration\nconst {\n  processedData,\n  columnSummary: _columnSummary,\n  baseConfig,\n  formats,\n  unitSummaries\n} = useChartConfig(props, { chartType: 'Histogram' });\n\n// Resolve colors\nconst fillColorResolved = computed(() =>\n  props.fillColor ? resolveColor(props.fillColor).value : undefined\n);\nconst outlineColorResolved = computed(() =>\n  props.outlineColor ? resolveColor(props.outlineColor).value : undefined\n);\nconst colorPaletteResolved = computed(() =>\n  resolveColorPalette(props.colorPalette || 'default').value\n);\n\n// Calculate histogram bins\nconst histogramData = computed(() => {\n  if (!props.x || !processedData.value.length) {\n    return { bins: [], counts: [] };\n  }\n\n  // Get numeric values\n  const values = processedData.value\n    .map((d) => d[props.x!] as number)\n    .filter((v) => v != null && !isNaN(v))\n    .sort((a, b) => a - b);\n\n  if (values.length === 0) {\n    return { bins: [], counts: [] };\n  }\n\n  const min = values[0];\n  const max = values[values.length - 1];\n  const range = max - min;\n  const binWidth = range / props.bins!;\n\n  // Create bins\n  const bins: { start: number; end: number; label: string }[] = [];\n  const counts: number[] = [];\n\n  for (let i = 0; i < props.bins!; i++) {\n    const binStart = min + i * binWidth;\n    const binEnd = min + (i + 1) * binWidth;\n    bins.push({\n      start: binStart,\n      end: binEnd,\n      label: `${formatValue(binStart, formats.value.x, unitSummaries.value.x)} - ${formatValue(binEnd, formats.value.x, unitSummaries.value.x)}`\n    });\n\n    // Count values in this bin\n    const count = values.filter((v) => {\n      if (i === props.bins! - 1) {\n        // Last bin includes the max value\n        return v >= binStart && v <= binEnd;\n      }\n      return v >= binStart && v < binEnd;\n    }).length;\n\n    counts.push(count);\n  }\n\n  return { bins, counts };\n});\n\n// Build final config\nconst chartConfig = computed<EChartsOption>(() => {\n  const config = { ...baseConfig.value };\n  const { bins, counts } = histogramData.value;\n\n  // Update x-axis\n  const xAxisBase = config.xAxis as Record<string, unknown> | undefined;\n  config.xAxis = {\n    ...xAxisBase,\n    type: 'category' as const,\n    data: bins.map((b) => b.label),\n    axisLabel: {\n      ...(xAxisBase?.axisLabel as Record<string, unknown> | undefined),\n      rotate: 45,\n      interval: 0\n    }\n  };\n\n  // Update y-axis for counts\n  config.yAxis = {\n    ...config.yAxis,\n    type: 'value',\n    name: 'Count'\n  };\n\n  // Update series\n  config.series = [\n    {\n      name: 'Frequency',\n      type: 'bar' as const,\n      data: counts,\n      barWidth: '90%',\n      itemStyle: {\n        color: (fillColorResolved.value || colorPaletteResolved.value?.[0]) as string | undefined,\n        opacity: props.fillOpacity,\n        borderColor: outlineColorResolved.value as string | undefined,\n        borderWidth: props.outlineWidth\n      }\n    }\n  ];\n\n  // Update color palette\n  if (colorPaletteResolved.value) {\n    config.color = colorPaletteResolved.value;\n  }\n\n  // Custom tooltip\n  config.tooltip = {\n    ...(config.tooltip as Record<string, unknown>),\n    trigger: 'axis' as const,\n    axisPointer: { type: 'shadow' as const },\n    formatter: (params: unknown) => {\n      const p = params as { name: string; value: number }[];\n      const param = p[0];\n      return `<span style='font-weight: 600;'>${param.name}</span><br/>Count: <span style='float:right; margin-left: 10px;'>${param.value}</span>`;\n    }\n  };\n\n  return config;\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :connect-group=\"props.connectGroup\"\n    :echarts-options=\"props.echartsOptions\"\n    :series-options=\"props.seriesOptions\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"processedData\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :echarts-options=\"props.echartsOptions\"\n        :series-options=\"props.seriesOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * FunnelChart component\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { FunnelChartProps } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { formatValue, getFormatObjectFromString } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<FunnelChartProps>(), {\n  height: '400px',\n  width: '100%',\n  legend: true,\n  showPercent: true,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColorPalette } = useThemeStores();\n\n// Resolve colors\nconst colorPaletteResolved = computed(() =>\n  resolveColorPalette(props.colorPalette || 'default').value\n);\n\n// Get format objects\nconst valueFormat = computed(() =>\n  props.valueFmt ? getFormatObjectFromString(props.valueFmt) : undefined\n);\nconst percentFormat = computed(() =>\n  props.percentFmt ? getFormatObjectFromString(props.percentFmt) : { formatTag: 'pct1', formatCode: '#,##0.0%', valueType: 'number' as const }\n);\n\n// Process funnel data\nconst funnelData = computed(() => {\n  if (!props.data?.length) return [];\n\n  const nameCol = props.name || Object.keys(props.data[0])[0];\n  const valueCol = props.value || Object.keys(props.data[0])[1];\n\n  return props.data.map((row) => ({\n    name: String(row[nameCol]),\n    value: row[valueCol] as number\n  }));\n});\n\n// Calculate max value for percentage calculation\nconst maxValue = computed(() => {\n  if (!funnelData.value.length) return 0;\n  return Math.max(...funnelData.value.map((d) => d.value));\n});\n\n// Build chart config\nconst chartConfig = computed<EChartsOption>(() => {\n  // Calculate chart area\n  const hasTitle = !!props.title;\n  const hasSubtitle = !!props.subtitle;\n  const hasLegend = props.legend;\n\n  const titleBoxHeight = (hasTitle ? 15 : 0) + (hasSubtitle ? 13 : 0) + (hasTitle || hasSubtitle ? 6 : 0);\n  const legendHeight = hasLegend ? 25 : 0;\n  const legendTop = titleBoxHeight + 7;\n  const chartTop = legendTop + legendHeight + 10;\n\n  return {\n    title: {\n      text: props.title,\n      subtext: props.subtitle\n    },\n    tooltip: {\n      trigger: 'item' as const,\n      formatter: (params: unknown) => {\n        const p = params as { name: string; value: number };\n        let output = `<span style='font-weight: 600;'>${p.name}</span><br/>`;\n        output += `Value: <span style='float:right; margin-left: 10px;'>${formatValue(p.value, valueFormat.value)}</span>`;\n        if (props.showPercent && maxValue.value > 0) {\n          const percent = p.value / maxValue.value;\n          output += `<br/>Percent: <span style='float:right; margin-left: 10px;'>${formatValue(percent, percentFormat.value)}</span>`;\n        }\n        return output;\n      }\n    },\n    legend: {\n      show: props.legend,\n      type: 'scroll',\n      top: legendTop,\n      data: funnelData.value.map((d) => d.name)\n    },\n    series: [\n      {\n        name: 'Funnel',\n        type: 'funnel',\n        left: '10%',\n        top: chartTop,\n        bottom: 20,\n        width: '80%',\n        min: 0,\n        max: maxValue.value || 100,\n        minSize: '0%',\n        maxSize: '100%',\n        sort: 'descending',\n        gap: 2,\n        label: {\n          show: true,\n          position: 'inside' as const,\n          formatter: (params: unknown) => {\n            const p = params as { name: string; value: number };\n            if (props.showPercent && maxValue.value > 0) {\n              const percent = p.value / maxValue.value;\n              return `${p.name}\\n${formatValue(percent, percentFormat.value)}`;\n            }\n            return p.name;\n          }\n        },\n        labelLine: {\n          length: 10,\n          lineStyle: {\n            width: 1,\n            type: 'solid'\n          }\n        },\n        itemStyle: {\n          borderColor: '#fff',\n          borderWidth: 1\n        },\n        emphasis: {\n          label: {\n            fontSize: 14\n          }\n        },\n        data: funnelData.value\n      }\n    ],\n    color: colorPaletteResolved.value\n  };\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :echarts-options=\"props.echartsOptions\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"props.data\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :echarts-options=\"props.echartsOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * Heatmap component\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { HeatmapProps } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { formatValue, getFormatObjectFromString } from '../../utils/formatting';\nimport { getDistinctValues } from '../../composables/useChartConfig';\n\nconst props = withDefaults(defineProps<HeatmapProps>(), {\n  height: '400px',\n  width: '100%',\n  legend: true,\n  nullsZero: false,\n  valueLabels: true,\n  mobileValueLabels: false,\n  zeroDisplay: '—',\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColorScale } = useThemeStores();\n\n// Resolve color scale\nconst colorScaleResolved = computed(() =>\n  resolveColorScale(props.colorScale || 'default').value\n);\n\n// Get format objects\nconst xFormat = computed(() =>\n  props.xFmt ? getFormatObjectFromString(props.xFmt) : undefined\n);\nconst yFormat = computed(() =>\n  props.yFmt ? getFormatObjectFromString(props.yFmt) : undefined\n);\nconst valueFormat = computed(() =>\n  props.valueFmt ? getFormatObjectFromString(props.valueFmt) : undefined\n);\n\n// Process heatmap data\nconst heatmapData = computed(() => {\n  if (!props.data?.length || !props.x || !props.y || !props.value) {\n    return { xCategories: [], yCategories: [], data: [], min: 0, max: 0 };\n  }\n\n  const xCategories = getDistinctValues(props.data, props.x).map(String);\n  const yCategories = getDistinctValues(props.data, props.y).map(String);\n\n  // Create data array: [xIndex, yIndex, value]\n  const data: [number, number, number | null][] = [];\n  let min = Infinity;\n  let max = -Infinity;\n\n  for (const row of props.data) {\n    const xVal = String(row[props.x]);\n    const yVal = String(row[props.y]);\n    const value = row[props.value] as number;\n\n    const xIndex = xCategories.indexOf(xVal);\n    const yIndex = yCategories.indexOf(yVal);\n\n    if (xIndex !== -1 && yIndex !== -1) {\n      const numValue = props.nullsZero && value == null ? 0 : value;\n      data.push([xIndex, yIndex, numValue]);\n\n      if (numValue != null) {\n        min = Math.min(min, numValue);\n        max = Math.max(max, numValue);\n      }\n    }\n  }\n\n  // Handle empty data\n  if (min === Infinity) min = 0;\n  if (max === -Infinity) max = 0;\n\n  // Override with props if provided\n  if (props.min !== undefined) min = props.min;\n  if (props.max !== undefined) max = props.max;\n\n  return { xCategories, yCategories, data, min, max };\n});\n\n// Build chart config\nconst chartConfig = computed<EChartsOption>(() => {\n  const { xCategories, yCategories, data, min, max } = heatmapData.value;\n\n  // Calculate chart area\n  const hasTitle = !!props.title;\n  const hasSubtitle = !!props.subtitle;\n  const hasDescription = !!props.description;\n  const titleBoxHeight = (hasTitle ? 15 : 0) + (hasSubtitle ? 13 : 0) + (hasDescription ? 13 : 0) + (hasTitle || hasSubtitle ? 6 : 0);\n\n  // Build title text with optional icon\n  const titleText = props.titleIcon && props.title\n    ? `{icon|} ${props.title}`\n    : props.title;\n\n  // Build subtext with optional description\n  const subtext = props.description\n    ? (props.subtitle ? `${props.subtitle}\\n${props.description}` : props.description)\n    : props.subtitle;\n\n  return {\n    title: {\n      text: titleText,\n      subtext: subtext,\n      textStyle: props.titleIcon ? {\n        rich: {\n          icon: {\n            backgroundColor: {\n              image: props.titleIcon\n            },\n            height: 18,\n            width: 18\n          }\n        }\n      } : undefined,\n      subtextStyle: hasDescription ? {\n        lineHeight: 16\n      } : undefined\n    },\n    tooltip: {\n      trigger: 'item' as const,\n      position: 'top',\n      formatter: (params: unknown) => {\n        const p = params as { value: [number, number, number | null] };\n        const [xIdx, yIdx, value] = p.value;\n        const xVal = xCategories[xIdx];\n        const yVal = yCategories[yIdx];\n\n        let output = `<span style='font-weight: 600;'>${formatValue(xVal, xFormat.value)} / ${formatValue(yVal, yFormat.value)}</span><br/>`;\n        output += `Value: <span style='float:right; margin-left: 10px;'>${value != null ? formatValue(value, valueFormat.value) : '-'}</span>`;\n        return output;\n      }\n    },\n    grid: {\n      left: '3%',\n      right: '10%',\n      bottom: '10%',\n      top: titleBoxHeight + 20,\n      containLabel: true\n    },\n    xAxis: {\n      type: 'category',\n      data: xCategories,\n      splitArea: { show: true },\n      axisLabel: {\n        rotate: xCategories.length > 10 ? 45 : 0\n      }\n    },\n    yAxis: {\n      type: 'category',\n      data: yCategories,\n      splitArea: { show: true }\n    },\n    visualMap: {\n      show: props.legend,\n      min,\n      max,\n      calculable: true,\n      orient: 'vertical',\n      right: '2%',\n      top: 'center',\n      inRange: {\n        color: colorScaleResolved.value || ['#f0f9e8', '#0868ac']\n      }\n    },\n    series: [\n      {\n        name: 'Heatmap',\n        type: 'heatmap',\n        data: data,\n        label: {\n          show: props.valueLabels,\n          formatter: (params: unknown) => {\n            const p = params as { value: [number, number, number | null] };\n            const val = p.value[2];\n            if (val === 0) return props.zeroDisplay;\n            return val != null ? formatValue(val, valueFormat.value) : '';\n          }\n        },\n        labelLayout: {\n          hideOverlap: true\n        },\n        emphasis: {\n          itemStyle: {\n            shadowBlur: 10,\n            shadowColor: 'rgba(0, 0, 0, 0.5)'\n          }\n        }\n      }\n    ],\n    media: [\n      {\n        query: { maxWidth: 400 },\n        option: {\n          series: [{ label: { show: props.mobileValueLabels } }]\n        }\n      },\n      {\n        query: { minWidth: 400 },\n        option: {\n          series: [{ label: { show: props.valueLabels } }]\n        }\n      }\n    ]\n  };\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :echarts-options=\"props.echartsOptions\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"props.data\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :echarts-options=\"props.echartsOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * CalendarHeatmap component\n * Time-series heatmap displayed as a calendar\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { CalendarHeatmapProps } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { formatValue, getFormatObjectFromString } from '../../utils/formatting';\nimport { standardizeDateString } from '../../utils/dateParsing';\n\nconst props = withDefaults(defineProps<CalendarHeatmapProps>(), {\n  height: '200px',\n  width: '100%',\n  legend: true,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColorScale } = useThemeStores();\n\n// Resolve color scale\nconst colorScaleResolved = computed(() =>\n  resolveColorScale(props.colorScale || 'green').value\n);\n\n// Get format objects\nconst valueFormat = computed(() =>\n  props.valueFmt ? getFormatObjectFromString(props.valueFmt) : undefined\n);\n\n// Process calendar data\nconst calendarData = computed(() => {\n  if (!props.data?.length || !props.date || !props.value) {\n    return { data: [], range: ['', ''], min: 0, max: 0 };\n  }\n\n  // Parse dates and values\n  const data: [string, number][] = [];\n  let min = Infinity;\n  let max = -Infinity;\n  let minDate: Date | null = null;\n  let maxDate: Date | null = null;\n\n  for (const row of props.data) {\n    const dateStr = standardizeDateString(row[props.date]);\n    const date = new Date(dateStr);\n    const value = row[props.value] as number;\n\n    if (!isNaN(date.getTime()) && value != null) {\n      const formattedDate = date.toISOString().split('T')[0];\n      data.push([formattedDate, value]);\n\n      min = Math.min(min, value);\n      max = Math.max(max, value);\n\n      if (!minDate || date < minDate) minDate = date;\n      if (!maxDate || date > maxDate) maxDate = date;\n    }\n  }\n\n  // Handle empty data\n  if (min === Infinity) min = 0;\n  if (max === -Infinity) max = 0;\n\n  // Override with props if provided\n  if (props.min !== undefined) min = props.min;\n  if (props.max !== undefined) max = props.max;\n\n  // Calculate range (year)\n  let range: [string, string] = ['', ''];\n  if (minDate && maxDate) {\n    const minYear = minDate.getFullYear();\n    const maxYear = maxDate.getFullYear();\n\n    if (minYear === maxYear) {\n      range = [`${minYear}-01-01`, `${minYear}-12-31`];\n    } else {\n      range = [`${minYear}-01-01`, `${maxYear}-12-31`];\n    }\n  }\n\n  return { data, range, min, max };\n});\n\n// Determine number of calendars needed\nconst calendarCount = computed(() => {\n  const { range } = calendarData.value;\n  if (!range[0] || !range[1]) return 1;\n\n  const startYear = parseInt(range[0].split('-')[0]);\n  const endYear = parseInt(range[1].split('-')[0]);\n  return endYear - startYear + 1;\n});\n\n// Build chart config\nconst chartConfig = computed<EChartsOption>(() => {\n  const { data, range, min, max } = calendarData.value;\n\n  // Calculate height based on number of years\n  const cellSize = 13;\n  const yearHeight = cellSize * 7 + 40;\n\n  // Calculate chart area\n  const hasTitle = !!props.title;\n  const hasSubtitle = !!props.subtitle;\n  const titleBoxHeight = (hasTitle ? 15 : 0) + (hasSubtitle ? 13 : 0) + (hasTitle || hasSubtitle ? 6 : 0);\n\n  // Create calendar for each year\n  const calendars: object[] = [];\n  const series: object[] = [];\n\n  const startYear = range[0] ? parseInt(range[0].split('-')[0]) : new Date().getFullYear();\n  const yearCount = calendarCount.value;\n\n  for (let i = 0; i < yearCount; i++) {\n    const year = startYear + i;\n    const top = titleBoxHeight + 30 + (i * yearHeight);\n\n    calendars.push({\n      top,\n      left: 60,\n      right: props.legend ? 100 : 30,\n      cellSize: [cellSize, cellSize],\n      range: `${year}`,\n      itemStyle: {\n        borderWidth: 0.5\n      },\n      yearLabel: { show: yearCount > 1, position: 'left' },\n      monthLabel: { show: true },\n      dayLabel: { firstDay: 0, show: true }\n    });\n\n    series.push({\n      type: 'heatmap',\n      coordinateSystem: 'calendar',\n      calendarIndex: i,\n      data: data.filter((d) => d[0].startsWith(`${year}`))\n    });\n  }\n\n  return {\n    title: {\n      text: props.title,\n      subtext: props.subtitle\n    },\n    tooltip: {\n      trigger: 'item' as const,\n      formatter: (params: unknown) => {\n        const p = params as { value: [string, number] };\n        const [date, value] = p.value;\n        let output = `<span style='font-weight: 600;'>${date}</span><br/>`;\n        output += `Value: <span style='float:right; margin-left: 10px;'>${formatValue(value, valueFormat.value)}</span>`;\n        return output;\n      }\n    },\n    visualMap: {\n      show: props.legend,\n      min,\n      max,\n      calculable: true,\n      orient: 'vertical',\n      right: '2%',\n      top: 'center',\n      inRange: {\n        color: colorScaleResolved.value || ['#ebedf0', '#216e39']\n      }\n    },\n    calendar: calendars,\n    series\n  };\n});\n\n// Dynamic height based on data\nconst dynamicHeight = computed(() => {\n  if (props.height !== '200px') return props.height;\n\n  const yearHeight = 140;\n  const baseHeight = 60;\n  return `${baseHeight + (calendarCount.value * yearHeight)}px`;\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"dynamicHeight\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :echarts-options=\"props.echartsOptions\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"props.data\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :echarts-options=\"props.echartsOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * SankeyDiagram component\n * Flow visualization showing relationships and quantities\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { SankeyDiagramProps } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { formatValue, getFormatObjectFromString } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<SankeyDiagramProps>(), {\n  height: '400px',\n  width: '100%',\n  orient: 'horizontal',\n  nodeWidth: 20,\n  nodeGap: 8,\n  nodeAlign: 'justify',\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColorPalette } = useThemeStores();\n\n// Resolve colors\nconst colorPaletteResolved = computed(() =>\n  resolveColorPalette(props.colorPalette || 'default').value\n);\n\n// Get format objects\nconst valueFormat = computed(() =>\n  props.valueFmt ? getFormatObjectFromString(props.valueFmt) : undefined\n);\n\n// Process sankey data\nconst sankeyData = computed(() => {\n  if (!props.data?.length || !props.source || !props.target || !props.value) {\n    return { nodes: [], links: [] };\n  }\n\n  // Collect unique nodes\n  const nodeSet = new Set<string>();\n  const links: { source: string; target: string; value: number }[] = [];\n\n  for (const row of props.data) {\n    const source = String(row[props.source]);\n    const target = String(row[props.target]);\n    const value = row[props.value] as number;\n\n    nodeSet.add(source);\n    nodeSet.add(target);\n\n    links.push({ source, target, value });\n  }\n\n  // Create nodes array\n  const nodes = Array.from(nodeSet).map((name) => ({ name }));\n\n  return { nodes, links };\n});\n\n// Build chart config\nconst chartConfig = computed<EChartsOption>(() => {\n  const { nodes, links } = sankeyData.value;\n\n  // Calculate chart area\n  const hasTitle = !!props.title;\n  const hasSubtitle = !!props.subtitle;\n  const titleBoxHeight = (hasTitle ? 15 : 0) + (hasSubtitle ? 13 : 0) + (hasTitle || hasSubtitle ? 6 : 0);\n\n  return {\n    title: {\n      text: props.title,\n      subtext: props.subtitle\n    },\n    tooltip: {\n      trigger: 'item' as const,\n      triggerOn: 'mousemove',\n      formatter: (params: unknown) => {\n        const p = params as { data: { source?: string; target?: string; value?: number; name?: string } };\n        if (p.data.source && p.data.target) {\n          // Link tooltip\n          return `${p.data.source} → ${p.data.target}<br/>Value: ${formatValue(p.data.value, valueFormat.value)}`;\n        } else {\n          // Node tooltip\n          return p.data.name || '';\n        }\n      }\n    },\n    series: [\n      {\n        type: 'sankey',\n        orient: props.orient,\n        nodeWidth: props.nodeWidth,\n        nodeGap: props.nodeGap,\n        nodeAlign: props.nodeAlign,\n        layoutIterations: 32,\n        left: '5%',\n        right: '15%',\n        top: titleBoxHeight + 20,\n        bottom: 20,\n        data: nodes,\n        links: links,\n        emphasis: {\n          focus: 'adjacency'\n        },\n        lineStyle: {\n          color: 'gradient',\n          curveness: 0.5\n        },\n        label: {\n          show: true,\n          position: props.orient === 'horizontal' ? 'right' : 'top'\n        }\n      }\n    ],\n    color: colorPaletteResolved.value\n  };\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :echarts-options=\"props.echartsOptions\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"props.data\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :echarts-options=\"props.echartsOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * USMap component\n * Choropleth map of the United States\n * Note: Requires GeoJSON data to be registered with ECharts\n */\n\nimport { computed, ref, onMounted } from 'vue';\nimport * as echarts from 'echarts';\nimport type { EChartsOption } from 'echarts';\nimport type { USMapProps } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { formatValue, getFormatObjectFromString } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<USMapProps>(), {\n  height: '500px',\n  width: '100%',\n  legend: true,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColorScale } = useThemeStores();\n\n// Resolve color scale\nconst colorScaleResolved = computed(() =>\n  resolveColorScale(props.colorScale || 'blue').value\n);\n\n// Get format objects\nconst valueFormat = computed(() =>\n  props.valueFmt ? getFormatObjectFromString(props.valueFmt) : undefined\n);\n\n// GeoJSON loaded state\nconst geoJsonLoaded = ref(false);\n\n// Load US GeoJSON on mount\nonMounted(async () => {\n  try {\n    // You need to provide US GeoJSON data\n    // This is a placeholder - in production, load from a CDN or local file\n    const response = await fetch('https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json');\n    const usGeoJson = await response.json();\n\n    // Convert TopoJSON to GeoJSON if needed\n    // For simplicity, we assume it's already GeoJSON or handle conversion\n    echarts.registerMap('USA', usGeoJson);\n    geoJsonLoaded.value = true;\n  } catch (error) {\n    console.warn('Failed to load US GeoJSON:', error);\n  }\n});\n\n// Process map data\nconst mapData = computed(() => {\n  if (!props.data?.length || !props.state || !props.value) {\n    return { data: [], min: 0, max: 0 };\n  }\n\n  let min = Infinity;\n  let max = -Infinity;\n\n  const data = props.data.map((row) => {\n    const value = row[props.value] as number;\n    if (value != null) {\n      min = Math.min(min, value);\n      max = Math.max(max, value);\n    }\n    return {\n      name: String(row[props.state]),\n      value: value\n    };\n  });\n\n  // Handle empty data\n  if (min === Infinity) min = 0;\n  if (max === -Infinity) max = 0;\n\n  // Override with props if provided\n  if (props.min !== undefined) min = props.min;\n  if (props.max !== undefined) max = props.max;\n\n  return { data, min, max };\n});\n\n// Build chart config\nconst chartConfig = computed<EChartsOption>(() => {\n  const { data, min, max } = mapData.value;\n\n  return {\n    title: {\n      text: props.title,\n      subtext: props.subtitle\n    },\n    tooltip: {\n      trigger: 'item' as const,\n      formatter: (params: unknown) => {\n        const p = params as { name: string; value: number };\n        let output = `<span style='font-weight: 600;'>${p.name}</span><br/>`;\n        output += `Value: <span style='float:right; margin-left: 10px;'>${p.value != null ? formatValue(p.value, valueFormat.value) : '-'}</span>`;\n        return output;\n      }\n    },\n    visualMap: {\n      show: props.legend,\n      min,\n      max,\n      left: 'left',\n      top: 'bottom',\n      calculable: true,\n      inRange: {\n        color: colorScaleResolved.value || ['#e0f3db', '#0868ac']\n      }\n    },\n    series: [\n      {\n        name: 'USA',\n        type: 'map',\n        map: 'USA',\n        roam: true,\n        emphasis: {\n          label: {\n            show: true\n          }\n        },\n        data: geoJsonLoaded.value ? data : []\n      }\n    ]\n  };\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <div v-if=\"!geoJsonLoaded\" class=\"map-loading\">\n    Loading map data...\n  </div>\n  <EChartsBase\n    v-else\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :echarts-options=\"props.echartsOptions\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"props.data\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :echarts-options=\"props.echartsOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n\n<style scoped>\n.map-loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: v-bind('props.height');\n  color: #666;\n}\n</style>\n","<script setup lang=\"ts\">\n/**\n * AreaMap component\n * Choropleth map with custom GeoJSON\n */\n\nimport { computed, ref, watch, onMounted } from 'vue';\nimport * as echarts from 'echarts';\nimport type { EChartsOption } from 'echarts';\nimport type { AreaMapProps } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { formatValue, getFormatObjectFromString } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<AreaMapProps>(), {\n  geoId: 'id',\n  height: '500px',\n  width: '100%',\n  legend: true,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColorScale } = useThemeStores();\n\n// Resolve color scale\nconst colorScaleResolved = computed(() =>\n  resolveColorScale(props.colorScale || 'blue').value\n);\n\n// Get format objects\nconst valueFormat = computed(() =>\n  props.valueFmt ? getFormatObjectFromString(props.valueFmt) : undefined\n);\n\n// GeoJSON loaded state\nconst geoJsonLoaded = ref(false);\nconst mapName = ref(`custom_map_${Date.now()}`);\n\n// Load GeoJSON\nconst loadGeoJson = async () => {\n  if (!props.geoJsonUrl) return;\n\n  try {\n    const response = await fetch(props.geoJsonUrl);\n    const geoJson = await response.json();\n    echarts.registerMap(mapName.value, geoJson);\n    geoJsonLoaded.value = true;\n  } catch (error) {\n    console.error('Failed to load GeoJSON:', error);\n    geoJsonLoaded.value = false;\n  }\n};\n\nonMounted(() => {\n  loadGeoJson();\n});\n\nwatch(() => props.geoJsonUrl, () => {\n  geoJsonLoaded.value = false;\n  mapName.value = `custom_map_${Date.now()}`;\n  loadGeoJson();\n});\n\n// Process map data\nconst mapData = computed(() => {\n  if (!props.data?.length || !props.areaCol || !props.value) {\n    return { data: [], min: 0, max: 0 };\n  }\n\n  let min = Infinity;\n  let max = -Infinity;\n\n  const data = props.data.map((row) => {\n    const value = row[props.value] as number;\n    if (value != null) {\n      min = Math.min(min, value);\n      max = Math.max(max, value);\n    }\n    return {\n      name: String(row[props.areaCol]),\n      value: value\n    };\n  });\n\n  // Handle empty data\n  if (min === Infinity) min = 0;\n  if (max === -Infinity) max = 0;\n\n  // Override with props if provided\n  if (props.min !== undefined) min = props.min;\n  if (props.max !== undefined) max = props.max;\n\n  return { data, min, max };\n});\n\n// Build chart config\nconst chartConfig = computed<EChartsOption>(() => {\n  const { data, min, max } = mapData.value;\n\n  return {\n    title: {\n      text: props.title,\n      subtext: props.subtitle\n    },\n    tooltip: {\n      trigger: 'item' as const,\n      formatter: (params: unknown) => {\n        const p = params as { name: string; value: number };\n        let output = `<span style='font-weight: 600;'>${p.name}</span><br/>`;\n        output += `Value: <span style='float:right; margin-left: 10px;'>${p.value != null ? formatValue(p.value, valueFormat.value) : '-'}</span>`;\n        return output;\n      }\n    },\n    visualMap: {\n      show: props.legend,\n      min,\n      max,\n      left: 'left',\n      top: 'bottom',\n      calculable: true,\n      inRange: {\n        color: colorScaleResolved.value || ['#e0f3db', '#0868ac']\n      }\n    },\n    series: [\n      {\n        name: 'Area Map',\n        type: 'map',\n        map: mapName.value,\n        roam: true,\n        emphasis: {\n          label: {\n            show: true\n          }\n        },\n        data: geoJsonLoaded.value ? data : []\n      }\n    ]\n  };\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <div v-if=\"!geoJsonLoaded\" class=\"map-loading\">\n    Loading map data...\n  </div>\n  <EChartsBase\n    v-else\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :echarts-options=\"props.echartsOptions\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"props.data\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :echarts-options=\"props.echartsOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n\n<style scoped>\n.map-loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: v-bind('props.height');\n  color: #666;\n}\n</style>\n","<script setup lang=\"ts\">\n/**\n * PointMap component\n * Map with point markers at lat/long coordinates\n * Uses ECharts scatter series with geo coordinate system\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { PointMapProps } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { formatValue, getFormatObjectFromString } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<PointMapProps>(), {\n  height: '500px',\n  width: '100%',\n  pointOpacity: 0.8,\n  pointSize: 8,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColor } = useThemeStores();\n\n// Resolve colors\nconst pointColorResolved = computed(() =>\n  props.pointColor ? resolveColor(props.pointColor).value : '#3366cc'\n);\n\n// Get format objects\nconst valueFormat = computed(() =>\n  props.valueFmt ? getFormatObjectFromString(props.valueFmt) : undefined\n);\n\n// Process point data\nconst pointData = computed(() => {\n  if (!props.data?.length || !props.lat || !props.long) {\n    return [];\n  }\n\n  return props.data.map((row) => {\n    const lat = row[props.lat] as number;\n    const lng = row[props.long] as number;\n    const value = props.value ? row[props.value] as number : undefined;\n    const name = props.name ? String(row[props.name]) : undefined;\n\n    return {\n      name,\n      value: [lng, lat, value],\n      lat,\n      lng\n    };\n  }).filter((d) => d.lat != null && d.lng != null);\n});\n\n// Calculate bounds for centering\nconst mapBounds = computed(() => {\n  if (!pointData.value.length) {\n    return { center: [0, 0], zoom: 1 };\n  }\n\n  const lats = pointData.value.map((d) => d.lat);\n  const lngs = pointData.value.map((d) => d.lng);\n\n  const minLat = Math.min(...lats);\n  const maxLat = Math.max(...lats);\n  const minLng = Math.min(...lngs);\n  const maxLng = Math.max(...lngs);\n\n  const centerLat = (minLat + maxLat) / 2;\n  const centerLng = (minLng + maxLng) / 2;\n\n  // Calculate zoom based on extent\n  const latSpan = maxLat - minLat;\n  const lngSpan = maxLng - minLng;\n  const span = Math.max(latSpan, lngSpan);\n\n  let zoom = 1;\n  if (span < 1) zoom = 8;\n  else if (span < 5) zoom = 6;\n  else if (span < 20) zoom = 4;\n  else if (span < 50) zoom = 3;\n  else zoom = 2;\n\n  return { center: [centerLng, centerLat], zoom };\n});\n\n// Build chart config\nconst chartConfig = computed<EChartsOption>(() => {\n  return {\n    title: {\n      text: props.title,\n      subtext: props.subtitle\n    },\n    tooltip: {\n      trigger: 'item' as const,\n      formatter: (params: unknown) => {\n        const p = params as { data: { name?: string; value: [number, number, number?] } };\n        const { name, value } = p.data;\n        let output = '';\n        if (name) {\n          output += `<span style='font-weight: 600;'>${name}</span><br/>`;\n        }\n        output += `Lat: ${value[1].toFixed(4)}<br/>`;\n        output += `Long: ${value[0].toFixed(4)}`;\n        if (value[2] != null) {\n          output += `<br/>Value: ${formatValue(value[2], valueFormat.value)}`;\n        }\n        return output;\n      }\n    },\n    geo: {\n      map: 'world',\n      roam: true,\n      center: mapBounds.value.center,\n      zoom: mapBounds.value.zoom,\n      itemStyle: {\n        areaColor: '#e0e0e0',\n        borderColor: '#111'\n      },\n      emphasis: {\n        disabled: true\n      }\n    },\n    series: [\n      {\n        name: 'Points',\n        type: 'scatter' as const,\n        coordinateSystem: 'geo' as const,\n        data: pointData.value,\n        symbolSize: props.pointSize,\n        itemStyle: {\n          color: pointColorResolved.value as string | undefined,\n          opacity: props.pointOpacity\n        },\n        emphasis: {\n          itemStyle: {\n            borderColor: '#333',\n            borderWidth: 1\n          }\n        }\n      }\n    ]\n  };\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :echarts-options=\"props.echartsOptions\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"props.data\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :echarts-options=\"props.echartsOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * BubbleMap component\n * Map with sized bubble markers at lat/long coordinates\n */\n\nimport { computed, ref } from 'vue';\nimport type { EChartsOption } from 'echarts';\nimport type { BubbleMapProps } from '../../types';\nimport EChartsBase from '../core/EChartsBase.vue';\nimport ChartFooter from '../core/ChartFooter.vue';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { formatValue, getFormatObjectFromString } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<BubbleMapProps>(), {\n  height: '500px',\n  width: '100%',\n  pointOpacity: 0.6,\n  minSize: 5,\n  maxSize: 40,\n  downloadableData: true,\n  downloadableImage: true\n});\n\nconst emit = defineEmits<{\n  (e: 'click', params: unknown): void;\n}>();\n\nconst { activeAppearance, resolveColor } = useThemeStores();\n\n// Resolve colors\nconst pointColorResolved = computed(() =>\n  props.pointColor ? resolveColor(props.pointColor).value : '#3366cc'\n);\n\n// Get format objects\nconst valueFormat = computed(() =>\n  props.valueFmt ? getFormatObjectFromString(props.valueFmt) : undefined\n);\nconst sizeFormat = computed(() =>\n  props.sizeFmt ? getFormatObjectFromString(props.sizeFmt) : undefined\n);\n\n// Calculate size range\nconst sizeRange = computed(() => {\n  if (!props.data?.length || !props.size) {\n    return { min: 0, max: 1 };\n  }\n\n  const sizes = props.data\n    .map((d) => d[props.size!] as number)\n    .filter((v) => v != null && !isNaN(v));\n\n  if (sizes.length === 0) return { min: 0, max: 1 };\n\n  return {\n    min: Math.min(...sizes),\n    max: Math.max(...sizes)\n  };\n});\n\n// Process bubble data\nconst bubbleData = computed(() => {\n  if (!props.data?.length || !props.lat || !props.long || !props.size) {\n    return [];\n  }\n\n  const { min: sizeMin, max: sizeMax } = sizeRange.value;\n  const sizeSpan = sizeMax - sizeMin || 1;\n\n  return props.data.map((row) => {\n    const lat = row[props.lat] as number;\n    const lng = row[props.long] as number;\n    const size = row[props.size!] as number;\n    const value = props.value ? row[props.value] as number : undefined;\n    const name = props.name ? String(row[props.name]) : undefined;\n\n    // Calculate symbol size\n    const normalized = (size - sizeMin) / sizeSpan;\n    const symbolSize = props.minSize! + normalized * (props.maxSize! - props.minSize!);\n\n    return {\n      name,\n      value: [lng, lat, size, value],\n      symbolSize,\n      lat,\n      lng\n    };\n  }).filter((d) => d.lat != null && d.lng != null);\n});\n\n// Calculate bounds for centering\nconst mapBounds = computed(() => {\n  if (!bubbleData.value.length) {\n    return { center: [0, 0], zoom: 1 };\n  }\n\n  const lats = bubbleData.value.map((d) => d.lat);\n  const lngs = bubbleData.value.map((d) => d.lng);\n\n  const minLat = Math.min(...lats);\n  const maxLat = Math.max(...lats);\n  const minLng = Math.min(...lngs);\n  const maxLng = Math.max(...lngs);\n\n  const centerLat = (minLat + maxLat) / 2;\n  const centerLng = (minLng + maxLng) / 2;\n\n  // Calculate zoom based on extent\n  const latSpan = maxLat - minLat;\n  const lngSpan = maxLng - minLng;\n  const span = Math.max(latSpan, lngSpan);\n\n  let zoom = 1;\n  if (span < 1) zoom = 8;\n  else if (span < 5) zoom = 6;\n  else if (span < 20) zoom = 4;\n  else if (span < 50) zoom = 3;\n  else zoom = 2;\n\n  return { center: [centerLng, centerLat], zoom };\n});\n\n// Build chart config\nconst chartConfig = computed<EChartsOption>(() => {\n  return {\n    title: {\n      text: props.title,\n      subtext: props.subtitle\n    },\n    tooltip: {\n      trigger: 'item' as const,\n      formatter: (params: unknown) => {\n        const p = params as { data: { name?: string; value: [number, number, number, number?]; symbolSize: number } };\n        const { name, value } = p.data;\n        let output = '';\n        if (name) {\n          output += `<span style='font-weight: 600;'>${name}</span><br/>`;\n        }\n        output += `Lat: ${value[1].toFixed(4)}<br/>`;\n        output += `Long: ${value[0].toFixed(4)}<br/>`;\n        output += `Size: ${formatValue(value[2], sizeFormat.value)}`;\n        if (value[3] != null) {\n          output += `<br/>Value: ${formatValue(value[3], valueFormat.value)}`;\n        }\n        return output;\n      }\n    },\n    geo: {\n      map: 'world',\n      roam: true,\n      center: mapBounds.value.center,\n      zoom: mapBounds.value.zoom,\n      itemStyle: {\n        areaColor: '#e0e0e0',\n        borderColor: '#111'\n      },\n      emphasis: {\n        disabled: true\n      }\n    },\n    series: [\n      {\n        name: 'Bubbles',\n        type: 'scatter' as const,\n        coordinateSystem: 'geo' as const,\n        data: bubbleData.value,\n        itemStyle: {\n          color: pointColorResolved.value as string | undefined,\n          opacity: props.pointOpacity\n        },\n        emphasis: {\n          itemStyle: {\n            borderColor: '#333',\n            borderWidth: 1\n          }\n        }\n      }\n    ]\n  };\n});\n\nconst hovering = ref(false);\n</script>\n\n<template>\n  <EChartsBase\n    :config=\"chartConfig\"\n    :height=\"props.height\"\n    :width=\"props.width\"\n    :theme=\"activeAppearance\"\n    :renderer=\"props.renderer\"\n    :echarts-options=\"props.echartsOptions\"\n    @click=\"emit('click', $event)\"\n    @mouseenter=\"hovering = true\"\n    @mouseleave=\"hovering = false\"\n  >\n    <template #footer>\n      <ChartFooter\n        :config=\"chartConfig\"\n        :data=\"props.data\"\n        :chart-title=\"props.title\"\n        :theme=\"activeAppearance\"\n        :echarts-options=\"props.echartsOptions\"\n        :downloadable-data=\"props.downloadableData\"\n        :downloadable-image=\"props.downloadableImage\"\n        :visible=\"hovering\"\n      />\n    </template>\n  </EChartsBase>\n</template>\n","<script setup lang=\"ts\">\n/**\n * ReferenceLine component\n * Adds a reference line to a chart\n */\n\nimport { computed, inject, watch, onMounted, onUnmounted } from 'vue';\nimport type { ReferenceLineProps } from '../../types';\nimport { seriesConfigKey } from '../../symbols/injectionKeys';\nimport { useThemeStores } from '../../composables/useTheme';\nimport { formatValue } from '../../utils/formatting';\n\nconst props = withDefaults(defineProps<ReferenceLineProps>(), {\n  labelPosition: 'end',\n  lineType: 'dashed',\n  lineWidth: 1,\n  hideValue: false,\n  labelPadding: 4,\n  fontSize: 12\n});\n\nconst seriesConfig = inject(seriesConfigKey, undefined);\nconst { resolveColor } = useThemeStores();\n\n// Resolve colors\nconst colorResolved = computed(() =>\n  props.color ? resolveColor(props.color).value : undefined\n);\nconst labelColorResolved = computed(() =>\n  props.labelColor ? resolveColor(props.labelColor).value : undefined\n);\nconst labelBgResolved = computed(() =>\n  props.labelBackgroundColor ? resolveColor(props.labelBackgroundColor).value : undefined\n);\n\n// Map line type\nconst lineTypeMap = {\n  solid: 'solid',\n  dashed: 'dashed',\n  dotted: 'dotted'\n} as const;\n\n// Generate a unique series name\nconst seriesName = computed(() => `reference_line_${props.y ?? props.x}_${Date.now()}`);\n\n// Build markLine config\nconst markLineConfig = computed(() => {\n  const isHorizontal = props.y !== undefined;\n\n  const lineConfig: Record<string, unknown> = {\n    symbol: 'none',\n    lineStyle: {\n      color: colorResolved.value || '#666',\n      width: props.lineWidth,\n      type: lineTypeMap[props.lineType || 'dashed']\n    },\n    label: {\n      show: true,\n      position: props.labelPosition,\n      formatter: () => {\n        let labelText = '';\n        if (props.label) {\n          labelText = props.label;\n          if (!props.hideValue) {\n            const value = isHorizontal ? props.y : props.x;\n            labelText += `: ${formatValue(value)}`;\n          }\n        } else if (!props.hideValue) {\n          labelText = formatValue(isHorizontal ? props.y : props.x);\n        }\n        return labelText;\n      },\n      color: labelColorResolved.value,\n      backgroundColor: labelBgResolved.value,\n      padding: props.labelPadding,\n      fontSize: props.fontSize\n    }\n  };\n\n  if (isHorizontal) {\n    lineConfig.yAxis = props.y;\n  } else {\n    lineConfig.xAxis = props.x;\n  }\n\n  return {\n    silent: true,\n    data: [lineConfig]\n  };\n});\n\n// Build series config\nconst seriesConfig2 = computed(() => ({\n  name: seriesName.value,\n  type: 'line' as const,\n  data: [] as number[],\n  markLine: markLineConfig.value,\n  seriesType: 'reference_line'\n}));\n\n// Register series on mount\nonMounted(() => {\n  if (seriesConfig) {\n    seriesConfig.addSeries(seriesConfig2.value);\n  }\n});\n\n// Update series when props change\nwatch(seriesConfig2, (newConfig) => {\n  if (seriesConfig) {\n    seriesConfig.updateSeries(seriesName.value, newConfig);\n  }\n});\n\n// Cleanup on unmount\nonUnmounted(() => {\n  if (seriesConfig) {\n    seriesConfig.removeSeries(seriesName.value);\n  }\n});\n</script>\n\n<template>\n  <slot />\n</template>\n","<script setup lang=\"ts\">\n/**\n * ReferenceArea component\n * Adds a reference area/region to a chart\n */\n\nimport { computed, inject, watch, onMounted, onUnmounted } from 'vue';\nimport type { ReferenceAreaProps } from '../../types';\nimport { seriesConfigKey } from '../../symbols/injectionKeys';\nimport { useThemeStores } from '../../composables/useTheme';\n\nconst props = withDefaults(defineProps<ReferenceAreaProps>(), {\n  opacity: 0.2,\n  border: false,\n  borderType: 'solid',\n  borderWidth: 1\n});\n\nconst seriesConfig = inject(seriesConfigKey, undefined);\nconst { resolveColor } = useThemeStores();\n\n// Resolve colors\nconst colorResolved = computed(() =>\n  props.color ? resolveColor(props.color).value : undefined\n);\nconst labelColorResolved = computed(() =>\n  props.labelColor ? resolveColor(props.labelColor).value : undefined\n);\nconst borderColorResolved = computed(() =>\n  props.borderColor ? resolveColor(props.borderColor).value : undefined\n);\n\n// Map border type\nconst borderTypeMap = {\n  solid: 'solid',\n  dashed: 'dashed',\n  dotted: 'dotted'\n} as const;\n\n// Generate a unique series name\nconst seriesName = computed(() => `reference_area_${Date.now()}`);\n\n// Build markArea config\nconst markAreaConfig = computed(() => {\n  // Determine if horizontal (y-based) or vertical (x-based)\n  const hasYBounds = props.yMin !== undefined || props.yMax !== undefined;\n  const hasXBounds = props.xMin !== undefined || props.xMax !== undefined;\n\n  const areaConfig: [Record<string, unknown>, Record<string, unknown>] = [{}, {}];\n\n  // Set up the area bounds\n  if (hasYBounds) {\n    areaConfig[0].yAxis = props.yMin ?? 'min';\n    areaConfig[1].yAxis = props.yMax ?? 'max';\n  }\n\n  if (hasXBounds) {\n    areaConfig[0].xAxis = props.xMin ?? 'min';\n    areaConfig[1].xAxis = props.xMax ?? 'max';\n  }\n\n  return {\n    silent: true,\n    itemStyle: {\n      color: (colorResolved.value || 'rgba(100, 100, 100, 0.2)') as string,\n      opacity: props.opacity,\n      borderColor: (props.border ? (borderColorResolved.value || colorResolved.value) : 'transparent') as string,\n      borderWidth: props.border ? props.borderWidth : 0,\n      borderType: borderTypeMap[props.borderType || 'solid']\n    },\n    label: props.label ? {\n      show: true,\n      position: 'insideTop' as const,\n      color: labelColorResolved.value as string | undefined\n    } : undefined,\n    data: [[\n      { ...areaConfig[0], name: props.label || '' },\n      areaConfig[1]\n    ]] as [Record<string, unknown>, Record<string, unknown>][]\n  };\n});\n\n// Build series config\nconst seriesConfig2 = computed(() => ({\n  name: seriesName.value,\n  type: 'line' as const,\n  data: [] as number[],\n  markArea: markAreaConfig.value,\n  seriesType: 'reference_area'\n}));\n\n// Register series on mount\nonMounted(() => {\n  if (seriesConfig) {\n    seriesConfig.addSeries(seriesConfig2.value);\n  }\n});\n\n// Update series when props change\nwatch(seriesConfig2, (newConfig) => {\n  if (seriesConfig) {\n    seriesConfig.updateSeries(seriesName.value, newConfig);\n  }\n});\n\n// Cleanup on unmount\nonUnmounted(() => {\n  if (seriesConfig) {\n    seriesConfig.removeSeries(seriesName.value);\n  }\n});\n</script>\n\n<template>\n  <slot />\n</template>\n","<script setup lang=\"ts\">\n/**\n * ReferencePoint component\n * Adds a reference point/marker to a chart\n */\n\nimport { computed, inject, watch, onMounted, onUnmounted } from 'vue';\nimport type { ReferencePointProps } from '../../types';\nimport { seriesConfigKey } from '../../symbols/injectionKeys';\nimport { useThemeStores } from '../../composables/useTheme';\n// formatValue is used indirectly through formatter\n\nconst props = withDefaults(defineProps<ReferencePointProps>(), {\n  labelPosition: 'top',\n  symbol: 'pin',\n  symbolSize: 30,\n  labelPadding: 4,\n  fontSize: 12\n});\n\nconst seriesConfig = inject(seriesConfigKey, undefined);\nconst { resolveColor } = useThemeStores();\n\n// Resolve colors\nconst colorResolved = computed(() =>\n  props.color ? resolveColor(props.color).value : undefined\n);\nconst labelColorResolved = computed(() =>\n  props.labelColor ? resolveColor(props.labelColor).value : undefined\n);\nconst labelBgResolved = computed(() =>\n  props.labelBackgroundColor ? resolveColor(props.labelBackgroundColor).value : undefined\n);\n\n// Generate a unique series name\nconst seriesName = computed(() => `reference_point_${props.x}_${props.y}_${Date.now()}`);\n\n// Map label position\nconst labelPositionMap = {\n  top: 'top',\n  bottom: 'bottom',\n  left: 'left',\n  right: 'right'\n} as const;\n\n// Build markPoint config\nconst markPointConfig = computed(() => {\n  return {\n    silent: false,\n    symbol: props.symbol,\n    symbolSize: props.symbolSize,\n    itemStyle: {\n      color: (colorResolved.value || '#666') as string\n    },\n    label: {\n      show: !!props.label,\n      position: labelPositionMap[props.labelPosition || 'top'],\n      formatter: () => props.label || '',\n      color: labelColorResolved.value as string | undefined,\n      backgroundColor: labelBgResolved.value as string | undefined,\n      padding: props.labelPadding,\n      fontSize: props.fontSize\n    },\n    data: [\n      {\n        name: props.label || '',\n        coord: [props.x, props.y] as [string | number, number],\n        value: props.y\n      }\n    ]\n  };\n});\n\n// Build series config\nconst seriesConfig2 = computed(() => ({\n  name: seriesName.value,\n  type: 'line' as const,\n  data: [] as number[],\n  markPoint: markPointConfig.value,\n  seriesType: 'reference_point'\n}));\n\n// Register series on mount\nonMounted(() => {\n  if (seriesConfig) {\n    seriesConfig.addSeries(seriesConfig2.value);\n  }\n});\n\n// Update series when props change\nwatch(seriesConfig2, (newConfig) => {\n  if (seriesConfig) {\n    seriesConfig.updateSeries(seriesName.value, newConfig);\n  }\n});\n\n// Cleanup on unmount\nonUnmounted(() => {\n  if (seriesConfig) {\n    seriesConfig.removeSeries(seriesName.value);\n  }\n});\n</script>\n\n<template>\n  <slot />\n</template>\n"],"names":["SSF","make_ssf","_strrev","x","o","i","fill","c","l","pad0","v","d","t","pad_","rpad_","pad0r1","pad0r2","p2_32","pad0r","isgeneral","s","days","months","init_table","table_fmt","default_map","defi","default_str","frac","D","mixed","sgn","B","P_2","P_1","P","Q_2","Q_1","Q","A","q","parse_date_code","opts","b2","date","time","dow","dout","out","fix_hijri","basedate","dnthresh","base1904","datenum_local","date1904","epoch","general_fmt_int","general_fmt_num","trailing_zeroes_and_decimal","strip_decimal","mantissa_zeroes_and_decimal","exp_with_single_digit","normalize_exp","small_exp","w","large_exp","general_fmt_num_base","V","general_fmt","format","write_date","type","fmt","val","ss0","ss","tt","y","outl","outstr","commaify","j","write_num","pct1","write_num_pct","sfmt","mul","write_num_cm","idx","write_num_exp","period","ee","fakee","$$","$1","$2","$3","frac1","write_num_f1","r","aval","sign","den","rr","base","myn","myd","write_num_f2","dec1","closeparen","phone","hashq","str","cc","rnd","dd","dec","_frac","carry","flr","write_num_flt","ffmt","ri","ff","oa","lres","rres","write_num_cm2","write_num_pct2","write_num_exp2","write_num_int","split_fmt","in_str","abstime","fmt_is_date","eval_fmt","flen","lst","dt","hr","bt","ssm","nstr","jj","vv","myv","ostr","decpt","lasti","retval","cfregex","cfregex2","chkcond","thresh","choose_fmt","f","lat","m1","m2","load_entry","tbl","module","AUTO_FORMAT_CODE","AUTO_FORMAT_MEDIAN_PRECISION","IMPLICIT_COLUMN_AUTO_FORMATS","columnName","columnTypeDescriptor","columnUnitSummary","typedValue","numValue","_columnName","applyColumnUnits","value","unit","configureAutoFormatting","formatCode","truncateUnits","isAutoFormat","effectiveCode","matchesCode","_a","autoFormatCode","_b","_c","generateImplicitNumberFormat","maxDisplayDecimals","effectiveFormatCode","columnUnits","median","medianInUnitTerms","getAutoColumnUnit","computeNumberAutoFormatCode","findImplicitAutoFormat","matched","implicitFormat","autoFormat","columnFormat","unitValue","ssf","fallbackFormat","referenceValue","significantDigits","formatCodeBuilder","referenceValueLeadingDigitExponent","base10Exponent","displayDecimals","absoluteValue","SUPPORTED_CURRENCIES","DERIVED_CURRENCY_FORMATS","BUILT_IN_FORMATS","currency","derivedFormat","symbolInFormatCode","_columnFormat","suffix","displayValue","adjustedColumnUnitSummary","standardizeDateString","normalizedDate","dateSplit","re","convertColumnToDate","data","column","standardizeDateColumn","AXIS_FORMATTING_CONTEXT","VALUE_FORMATTING_CONTEXT","customFormats","setCustomFormats","formats","getCustomFormats","inferValueType","dateAttempt","maybeExtractFormatTag","lastUnderscore","lookupColumnFormat","columnInfo","potentialFormatTag","matchingFormat","matchingImplicitAutoFormat","getFormatObjectFromString","formatString","valueType","newFormat","getEffectiveFormattingCode","formattingContext","formatValue","applyFormatting","error","formatAxisValue","applyTitleTagReplacement","columnFormatSettings","result","lastIndexOfTag","titleTagReplacement","formatTitle","title","formattingCode","defaultExample","formatExample","preFormattedValue","numericValue","formatTag","defaultThemeColors","defaultColorPalette","themes","configureThemes","customThemes","getThemes","createEChartsTheme","mode","currentTheme","colors","axisBaselineColor","axisTickColor","axisLabelColor","gridlineColor","axisTitleBackgroundColor","legendTextColor","legendPageIconColor","legendPageTextColor","tooltipBorderColor","tooltipBackgroundColor","tooltipTextColor","titleColor","subtitleColor","defaultThemeLight","defaultThemeDark","limit","low","high","min","max","clip_rgb","rgb","classToType","name","obj","unpack","args","keyOrder","k","last","PI","TWOPI","PITHIRD","DEG2RAD","RAD2DEG","input","Color","me","autodetect","_input","a","b","chk","version","chroma","cmyk2rgb","m","alpha","rgb2cmyk","g","hsl2css","hsla","rgb2hsl","minRgb","maxRgb","h","round","rgb2css","rgba","hsl2rgb","t3","t2","t1","h_","RE_RGB","RE_RGBA","RE_RGB_PCT","RE_RGBA_PCT","RE_HSL","RE_HSLA","css2rgb","css","hsl","rest","floor","hcg2rgb","_g","p","rgb2hcg","delta","RE_HEX","RE_HEXA","hex2rgb","hex","u","rgb2hex","hxa","cos","hsi2rgb","sqrt","acos","rgb2hsi","min_","hsv2rgb","max_","rgb2hsv","LAB_CONSTANTS","pow","lab2rgb","z","b_","lab_xyz","xyz_rgb","rgb2lab","rgb2xyz","rgb_xyz","xyz_lab","sin","lch2lab","lch2rgb","L","hcl2rgb","hcl","atan2","lab2lch","rgb2lch","w3cx11","n","num2rgb","num","rgb2num","log","temperature2rgb","kelvin","temp","rgb2temperature","minTemp","maxTemp","eps","oklab2rgb","lrgb2rgb","abs","cbrt","rgb2oklab","lr","lg","lb","rgb2lrgb","oklch2rgb","rgb2oklch","mutate","amount","lab","mc","channel","src","EPS","MAX_ITER","lum","cur_lum","max_iter","test","mid","lm","rgb2luminance","luminance_x","index","mix","col1","col2","interpolator","lch","xyz0","xyz1","lrgb","x1","y1","z1","x2","y2","z2","interpolate_hsx","hue0","hue1","sat0","sat1","lbv0","lbv1","sat","hue","lbv","dh","c1","c2","hcg","hsi","hsv","oklab","oklch","average","weights","_average_lrgb","first","xyz","cnt","dx","dy","ci","xyz2","col","scale","_mode","_nacol","_spread","_domain","_pos","_padding","_classes","_colors","_out","_min","_max","_correctLightness","_colorCache","_useCache","_gamma","setColors","resetCache","getClass","tMapLightness","tMapDomain","getColor","bypassMap","classes","domain","tOut","tBreaks","_m","_o","L0","L1","pol","L_actual","L_ideal","L_diff","t0","numColors","dm","__range__","samples","end","asc","left","right","inclusive","range","ascending","binom_row","row","newrow","bezier","I","lab0","lab1","lab2","lab3","labs","sum","el","blend","bottom","top","blend_f","c0","each","normal","multiply","darken","lighten","screen","overlay","burn","dodge","cubehelix","start","rotations","gamma","lightness","dl","fract","amp","cos_a","sin_a","digits","random","code","analyze","key","limits","values","min_log","max_log","pb","pr","cluster","assignments","clusterSizes","repeat","nb_iters","centroids","mindist","best","dist","newCentroids","kClusters","tmpKMeansBreaks","contrast","l1","l2","exp","deltaE","Kl","Kc","Kh","rad2deg","rad","deg2rad","deg","a1","b1","L2","a2","avgL","C1","C2","avgC","G","a1p","a2p","C1p","C2p","avgCp","arctan1","arctan2","h1p","h2p","avgHp","T","deltaHp","deltaL","deltaCp","sl","sc","sh","deltaTheta","Rt","distance","sum_sq","valid","scales","colorbrewer","brewer","isStringTuple","item","convertLightToDark","color","chromaColor","newL","newS","resolveColor","appearance","lightColor","darkColor","light","dark","resolveColorsObject","resolveColorPalette","theme","resolveColorScale","colorScale","generateColorScale","startColor","endColor","steps","getContrastingTextColor","backgroundColor","setColorOpacity","opacity","namedPalettes","namedScales","debounce","function_","wait","options","immediate","storedContext","storedArguments","timeoutId","timestamp","run","callContext","callArguments","later","debounced","arguments_","callNow","debounceModule","ANIMATION_DURATION","themesRegistered","registerThemes","echarts","shouldUseSvg","container","useECharts","renderer","connectGroup","animationDuration","autoResize","resizeDebounce","chartInstance","shallowRef","containerRef","ref","resizeObserver","getThemeValue","init","targetContainer","useRenderer","instance","setOption","option","setOptionOpts","resize","dispose","getDataURL","isDisposed","debouncedResize","onMounted","parentElement","onUnmounted","watch","newTheme","applySeriesColors","chart","seriesColors","prevOption","newSeries","applyEchartsOptions","echartsOptions","applySeriesOptions","seriesOptions","config","configSeries","referenceIndices","acc","seriesType","tempSeries","_","useFormatting","formatValueFn","formatAxisValueFn","formatTitleFn","fmtFn","useFormatter","computed","chartPropsKey","chartConfigKey","themeStoresKey","echartsInstanceKey","seriesConfigKey","getSystemTheme","useTheme","defaultAppearance","syncWithSystem","storageKey","systemTheme","selectedAppearance","stored","mediaQuery","handler","e","newValue","activeAppearance","cycle","currentIndex","resolveColorFn","resolveColorsObjectFn","resolveColorPaletteFn","resolveColorScaleFn","provideTheme","themeReturn","context","provide","injectTheme","inject","useThemeStores","injected","root","factory","this","download","strFileName","strMimeType","self","defaultMime","mimeType","payload","url","anchor","toString","myBlob","fileName","blob","reader","ajax","dataUrlToBlob","saver","tempUiArr","mx","strUrl","parts","decoder","binData","uiArr","winMode","X","W","Z","Y","N","F","R","K","$","E","M","S","O","J","C","U","H","BW","LW","getTimestamp","createExportChart","width","height","configWithoutAnimation","useExport","isExporting","getChartDataUrl","chartConfig","pixelRatio","excludeComponents","exportAsImage","filename","dataUrl","showHeaders","useBom","separator","csvConfig","mkConfig","csv","generateCsv","downloadCsv","getYAxisIndex","componentIndex","yCount","y2Count","useTooltip","defaultFormatter","params","swapXY","xType","totalSeriesCount","xColumn","xFormat","yFormat","y2Format","paramsArray","output","firstValue","xVal","param","paramValue","yVal","valueArr","xValLocal","yCol","yColumn","size","sizeFormat","tooltipTitle","sizeVal","labelVal","yColName","createTooltipConfig","createFormatter","getColumnSummary","summary","firstRow","sampleValue","numValues","sorted","maxDecimals","decimalIndex","getDistinctValues","getDistinctCount","getSortedData","sortColumn","aVal","bVal","aStr","bStr","useChartConfig","props","overrideXType","processedData","colSummary","dateCols","columnSummary","xAxisType","_e","_d","_f","y2Col","_h","_i","unitSummaries","seriesCount","distinctSeries","baseConfig","legend","hasTitle","hasSubtitle","hasLegend","titleFontSize","subtitleFontSize","titleBoxPadding","titleBoxHeight","legendHeight","legendPaddingTop","legendTop","chartAreaPaddingTop","chartAreaPaddingBottom","chartTop","chartBottom","xAxisTitle","yAxisTitle","xAxisTitlePadding","xAxisConfig","yAxisConfig","tooltipConfig","getSeriesConfig","series","xMismatch","seriesOrder","seriesConfigs","yList","yArray","y2Array","distinctValues","seriesValue","seriesData","point","yAxisIndex","ZOOM_DEFAULTS","TOOLBOX_DEFAULTS","BRUSH_DEFAULTS","ANIMATION_DEFAULTS","TOOLTIP_DEFAULTS","getToolboxPositionConfig","position","useInteractiveFeatures","chartType","dataZoomConfig","zoomProp","toValue","zoomComponents","xAxisKey","yAxisKey","addAxisZoom","axisKey","isY","isVertical","toolboxConfig","toolboxProp","positionConfig","feature","saveConfig","viewConfig","magicConfig","brushConfig","brushProp","animationConfig","animationProp","tooltipBaseConfig","tooltipProp","defaultTrigger","trigger","interactiveConfig","dataZoom","toolbox","brush","animation","__props","emit","__emit","hovering","isFirstRender","initChart","updateChart","updateLabelWidths","distinctXValues","modConst","clientWidth","__expose","_createElementBlock","_createElementVNode","_normalizeStyle","_renderSlot","_ctx","chartContext","reactive","seriesMap","addSeries","seriesArray","removeSeries","updateSeries","existing","_unref","exportAsPng","exportAsCsv","handleSaveImage","handleDownloadData","_normalizeClass","_xAxisType","fillColorResolved","outlineColorResolved","labelColorResolved","colorPaletteResolved","seriesColorsResolved","barSeriesConfig","baseSeriesConfig","yAxis","stackTotalSeries","total","dataPoint","interactive","tooltipBase","_createBlock","EChartsBase","_cache","$event","_createVNode","ChartFooter","lineColorResolved","lineTypeMap","stepMap","lineSeriesConfig","yColumns","newRow","areaSeriesConfig","scatterFormatter","_unitSummaries","pointColorResolved","scatterSeriesConfig","show","confine","enterable","axisPointer","borderColor","textStyle","sizeRange","sizes","bubbleSeriesConfig","baseSeries","sizeMin","sizeMax","sizeSpan","sizeValue","normalized","_columnSummary","boxPlotData","categories","cat","q1","q3","histogramData","binWidth","bins","counts","binStart","binEnd","count","xAxisBase","valueFormat","percentFormat","funnelData","nameCol","valueCol","maxValue","percent","colorScaleResolved","heatmapData","xCategories","yCategories","xIndex","yIndex","hasDescription","titleText","subtext","xIdx","yIdx","calendarData","minDate","maxDate","dateStr","formattedDate","minYear","maxYear","calendarCount","startYear","cellSize","yearHeight","calendars","yearCount","year","dynamicHeight","sankeyData","nodeSet","links","source","target","nodes","geoJsonLoaded","usGeoJson","mapData","_hoisted_1","mapName","loadGeoJson","geoJson","pointData","lng","mapBounds","lats","lngs","minLat","maxLat","minLng","maxLng","centerLat","centerLng","latSpan","lngSpan","span","zoom","bubbleData","symbolSize","seriesConfig","colorResolved","labelBgResolved","seriesName","markLineConfig","isHorizontal","lineConfig","labelText","seriesConfig2","newConfig","borderColorResolved","borderTypeMap","markAreaConfig","hasYBounds","hasXBounds","areaConfig","labelPositionMap","markPointConfig"],"mappings":"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","x_google_ignoreList":[0,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,103,108,109]}